import{j as d,r as x,R as D,a as yu,b as Rp,c as q,A as xu,S as oo,X as ao,d as se,e as Ep,f as Ip}from"./styles-BBhVFbFw.js";const Qt=new WeakMap,Cr=new WeakMap,Br={current:[]};let ks=!1,kn=0;const bn=new Set,dr=new Map;function bu(e){const t=Array.from(e).sort((n,r)=>n instanceof Gt&&n.options.deps.includes(r)?1:r instanceof Gt&&r.options.deps.includes(n)?-1:0);for(const n of t){if(Br.current.includes(n))continue;Br.current.push(n),n.recompute();const r=Cr.get(n);if(r)for(const s of r){const i=Qt.get(s);i&&bu(i)}}}function jp(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function Mp(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function vu(e){if(kn>0&&!dr.has(e)&&dr.set(e,e.prevState),bn.add(e),!(kn>0)&&!ks)try{for(ks=!0;bn.size>0;){const t=Array.from(bn);bn.clear();for(const n of t){const r=dr.get(n)??n.prevState;n.prevState=r,jp(n)}for(const n of t){const r=Qt.get(n);r&&(Br.current.push(n),bu(r))}for(const n of t){const r=Qt.get(n);if(r)for(const s of r)Mp(s)}}}finally{ks=!1,Br.current=[],dr.clear()}}function Cn(e){kn++;try{e()}finally{if(kn--,kn===0){const t=bn.values().next().value;t&&vu(t)}}}function Tp(e){return typeof e=="function"}class ai{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var s,i;this.listeners.add(r);const o=(i=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:i.call(s,r,this);return()=>{this.listeners.delete(r),o?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):Tp(t)?this.state=t(this.prevState):this.state=t,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),vu(this)}}class Gt{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=this.options.deps.length,r=new Array(n),s=new Array(n);for(let i=0;i<n;i++){const o=this.options.deps[i];r[i]=o.prevState,s[i]=o.state}return this.lastSeenDepValues=s,{prevDepVals:r,currDepVals:s,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const s=this.getDepVals();this.state=this.options.fn(s),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof Gt&&i.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let i=0;i<s.length;i++)if(s[i]!==r[i]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,s;this.listeners.add(n);const i=(s=(r=this.options).onSubscribe)==null?void 0:s.call(r,n,this);return()=>{this.listeners.delete(n),i?.()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const n of t)if(n instanceof Gt)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof ai){let r=Qt.get(n);r||(r=new Set,Qt.set(n,r)),r.add(this);let s=Cr.get(this);s||(s=new Set,Cr.set(this,s)),s.add(n)}}unregisterFromGraph(t=this.options.deps){for(const n of t)if(n instanceof Gt)this.unregisterFromGraph(n.options.deps);else if(n instanceof ai){const r=Qt.get(n);r&&r.delete(this);const s=Cr.get(this);s&&s.delete(n)}}}const lt="__TSR_index",ka="popstate",Ca="beforeunload";function Bp(e){let t=e.getLocation();const n=new Set,r=o=>{t=e.getLocation(),n.forEach(a=>a({location:t,action:o}))},s=o=>{e.notifyOnIndexChange??!0?r(o):t=e.getLocation()},i=async({task:o,navigateOpts:a,...c})=>{if(a?.ignoreBlocker??!1){o();return}const u=e.getBlockers?.()??[],h=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&u.length&&h)for(const f of u){const p=Dr(c.path,c.state);if(await f.blockerFn({currentLocation:t,nextLocation:p,action:c.type})){e.onBlocked?.();return}}o()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,a,c)=>{const l=t.state[lt];a=Pa(l+1,a),i({task:()=>{e.pushState(o,a),r({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:o,state:a})},replace:(o,a,c)=>{const l=t.state[lt];a=Pa(l,a),i({task:()=>{e.replaceState(o,a),r({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:o,state:a})},go:(o,a)=>{i({task:()=>{e.go(o),s({type:"GO",index:o})},navigateOpts:a,type:"GO"})},back:o=>{i({task:()=>{e.back(o?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{i({task:()=>{e.forward(o?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>t.state[lt]!==0,createHref:o=>e.createHref(o),block:o=>{if(!e.setBlockers)return()=>{};const a=e.getBlockers?.()??[];return e.setBlockers([...a,o]),()=>{const c=e.getBlockers?.()??[];e.setBlockers?.(c.filter(l=>l!==o))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:r}}function Pa(e,t){t||(t={});const n=co();return{...t,key:n,__TSR_key:n,[lt]:e}}function Dp(e){const t=typeof document<"u"?window:void 0,n=t.history.pushState,r=t.history.replaceState;let s=[];const i=()=>s,o=w=>s=w,a=(w=>w),c=(()=>Dr(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const w=co();t.history.replaceState({[lt]:0,key:w,__TSR_key:w},"")}let l=c(),u,h=!1,f=!1,p=!1,m=!1;const y=()=>l;let A,g;const b=()=>{A&&(S._ignoreSubscribers=!0,(A.isPush?t.history.pushState:t.history.replaceState)(A.state,"",A.href),S._ignoreSubscribers=!1,A=void 0,g=void 0,u=void 0)},v=(w,R,j)=>{const O=a(R);g||(u=l),l=Dr(R,j),A={href:O,state:j,isPush:A?.isPush||w==="push"},g||(g=Promise.resolve().then(()=>b()))},k=w=>{l=c(),S.notify({type:w})},P=async()=>{if(f){f=!1;return}const w=c(),R=w.state[lt]-l.state[lt],j=R===1,O=R===-1,Q=!j&&!O||h;h=!1;const He=Q?"GO":O?"BACK":"FORWARD",pe=Q?{type:"GO",index:R}:{type:O?"BACK":"FORWARD"};if(p)p=!1;else{const Be=i();if(typeof document<"u"&&Be.length){for(const vs of Be)if(await vs.blockerFn({currentLocation:l,nextLocation:w,action:He})){f=!0,t.history.go(1),S.notify(pe);return}}}l=c(),S.notify(pe)},C=w=>{if(m){m=!1;return}let R=!1;const j=i();if(typeof document<"u"&&j.length)for(const O of j){const Q=O.enableBeforeUnload??!0;if(Q===!0){R=!0;break}if(typeof Q=="function"&&Q()===!0){R=!0;break}}if(R)return w.preventDefault(),w.returnValue=""},S=Bp({getLocation:y,getLength:()=>t.history.length,pushState:(w,R)=>v("push",w,R),replaceState:(w,R)=>v("replace",w,R),back:w=>(w&&(p=!0),m=!0,t.history.back()),forward:w=>{w&&(p=!0),m=!0,t.history.forward()},go:w=>{h=!0,t.history.go(w)},createHref:w=>a(w),flush:b,destroy:()=>{t.history.pushState=n,t.history.replaceState=r,t.removeEventListener(Ca,C,{capture:!0}),t.removeEventListener(ka,P)},onBlocked:()=>{u&&l!==u&&(l=u)},getBlockers:i,setBlockers:o,notifyOnIndexChange:!1});return t.addEventListener(Ca,C,{capture:!0}),t.addEventListener(ka,P),t.history.pushState=function(...w){const R=n.apply(t.history,w);return S._ignoreSubscribers||k("PUSH"),R},t.history.replaceState=function(...w){const R=r.apply(t.history,w);return S._ignoreSubscribers||k("REPLACE"),R},S}function Dr(e,t){const n=e.indexOf("#"),r=e.indexOf("?"),s=co();return{href:e,pathname:e.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:e.length),hash:n>-1?e.substring(n):"",search:r>-1?e.slice(r,n===-1?void 0:n):"",state:t||{[lt]:0,key:s,__TSR_key:s}}}function co(){return(Math.random()+1).toString(36).substring(7)}function ci(e){return e[e.length-1]}function Lp(e){return typeof e=="function"}function Pt(e,t){return Lp(e)?e(t):e}const Op=Object.prototype.hasOwnProperty;function we(e,t){if(e===t)return e;const n=t,r=Ea(e)&&Ea(n);if(!r&&!(Lr(e)&&Lr(n)))return n;const s=r?e:Na(e);if(!s)return n;const i=r?n:Na(n);if(!i)return n;const o=s.length,a=i.length,c=r?new Array(a):{};let l=0;for(let u=0;u<a;u++){const h=r?u:i[u],f=e[h],p=n[h];if(f===p){c[h]=f,(r?u<o:Op.call(e,h))&&l++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){c[h]=p;continue}const m=we(f,p);c[h]=m,m===f&&l++}return o===a&&l===o?e:c}function Na(e){const t=[],n=Object.getOwnPropertyNames(e);for(const s of n){if(!Object.prototype.propertyIsEnumerable.call(e,s))return!1;t.push(s)}const r=Object.getOwnPropertySymbols(e);for(const s of r){if(!Object.prototype.propertyIsEnumerable.call(e,s))return!1;t.push(s)}return t}function Lr(e){if(!Ra(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!Ra(n)||!n.hasOwnProperty("isPrototypeOf"))}function Ra(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ea(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Nt(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!Nt(e[r],t[r],n))return!1;return!0}if(Lr(e)&&Lr(t)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const o in t)if((!r||t[o]!==void 0)&&!Nt(e[o],t[o],n))return!1;return!0}let s=0;if(!r)s=Object.keys(e).length;else for(const o in e)e[o]!==void 0&&s++;let i=0;for(const o in t)if((!r||t[o]!==void 0)&&(i++,i>s||!Nt(e[o],t[o],n)))return!1;return s===i}return!1}function Zt(e){let t,n;const r=new Promise((s,i)=>{t=s,n=i});return r.status="pending",r.resolve=s=>{r.status="resolved",r.value=s,t(s),e?.(s)},r.reject=s=>{r.status="rejected",n(s)},r}function ut(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}var Fp="Invariant failed";function Ge(e,t){if(!e)throw new Error(Fp)}const Ae="__root__",Oe=0,Tt=1,Yt=2,en=3;function Qe(e){return lo(e.filter(t=>t!==void 0).join("/"))}function lo(e){return e.replace(/\/{2,}/g,"/")}function uo(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function dt(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function Pr(e){return dt(uo(e))}function Or(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function Vp(e,t,n){return Or(e,n)===Or(t,n)}function $p(e){const{type:t,value:n}=e;if(t===Oe)return n;const{prefixSegment:r,suffixSegment:s}=e;if(t===Tt){const i=n.substring(1);if(r&&s)return`${r}{$${i}}${s}`;if(r)return`${r}{$${i}}`;if(s)return`{$${i}}${s}`}if(t===en){const i=n.substring(1);return r&&s?`${r}{-$${i}}${s}`:r?`${r}{-$${i}}`:s?`{-$${i}}${s}`:`{-$${i}}`}if(t===Yt){if(r&&s)return`${r}{$}${s}`;if(r)return`${r}{$}`;if(s)return`{$}${s}`}return n}function Up({base:e,to:t,trailingSlash:n="never",parseCache:r}){let s=wu(e,r).slice();const i=ns(t,r);s.length>1&&ci(s)?.value==="/"&&s.pop();for(let c=0,l=i.length;c<l;c++){const u=i[c],h=u.value;h==="/"?c?c===l-1&&s.push(u):s=[u]:h===".."?s.pop():h==="."||s.push(u)}s.length>1&&(ci(s).value==="/"?n==="never"&&s.pop():n==="always"&&s.push({type:Oe,value:"/"}));const o=s.map($p);return Qe(o)}const wu=(e,t)=>Su(e,t,!0),ns=(e,t)=>Su(e,t,!1),Su=(e,t,n)=>{if(!e)return[];const r=t?.get(e);if(r)return r;const s=Qp(e,n);return t?.set(e,s),s},Kp=/^\$.{1,}$/,zp=/^(.*?)\{(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,qp=/^(.*?)\{-(\$[a-zA-Z_$][a-zA-Z0-9_$]*)\}(.*)$/,Hp=/^\$$/,Wp=/^(.*?)\{\$\}(.*)$/;function Qp(e,t){e=lo(e);const n=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),n.push({type:Oe,value:"/"})),!e)return n;const r=e.split("/").filter(Boolean);return n.push(...r.map(s=>{const i=!t&&s!==Ae&&s.slice(-1)==="_"?s.slice(0,-1):s,o=i.match(Wp);if(o){const l=o[1],u=o[2];return{type:Yt,value:"$",prefixSegment:l||void 0,suffixSegment:u||void 0}}const a=i.match(qp);if(a){const l=a[1],u=a[2],h=a[3];return{type:en,value:u,prefixSegment:l||void 0,suffixSegment:h||void 0}}const c=i.match(zp);if(c){const l=c[1],u=c[2],h=c[3];return{type:Tt,value:""+u,prefixSegment:l||void 0,suffixSegment:h||void 0}}if(Kp.test(i)){const l=i.substring(1);return{type:Tt,value:"$"+l,prefixSegment:void 0,suffixSegment:void 0}}return Hp.test(i)?{type:Yt,value:"$",prefixSegment:void 0,suffixSegment:void 0}:{type:Oe,value:i.includes("%25")?i.split("%25").map(l=>decodeURI(l)).join("%25"):decodeURI(i)}})),e.slice(-1)==="/"&&(e=e.substring(1),n.push({type:Oe,value:"/"})),n}function hr({path:e,params:t,leaveWildcards:n,leaveParams:r,decodeCharMap:s,parseCache:i}){const o=ns(e,i);function a(h){const f=t[h],p=typeof f=="string";return h==="*"||h==="_splat"?p?encodeURI(f):f:p?Gp(f,s):f}let c=!1;const l={},u=Qe(o.map(h=>{if(h.type===Oe)return h.value;if(h.type===Yt){l._splat=t._splat,l["*"]=t._splat;const f=h.prefixSegment||"",p=h.suffixSegment||"";if(!("_splat"in t))return c=!0,n?`${f}${h.value}${p}`:f||p?`${f}${p}`:void 0;const m=a("_splat");return n?`${f}${h.value}${m??""}${p}`:`${f}${m}${p}`}if(h.type===Tt){const f=h.value.substring(1);!c&&!(f in t)&&(c=!0),l[f]=t[f];const p=h.prefixSegment||"",m=h.suffixSegment||"";if(r){const y=a(h.value);return`${p}${h.value}${y??""}${m}`}return`${p}${a(f)??"undefined"}${m}`}if(h.type===en){const f=h.value.substring(1),p=h.prefixSegment||"",m=h.suffixSegment||"";if(!(f in t)||t[f]==null)return n?`${p}${f}${m}`:p||m?`${p}${m}`:void 0;if(l[f]=t[f],r){const y=a(h.value);return`${p}${h.value}${y??""}${m}`}return n?`${p}${f}${a(f)??""}${m}`:`${p}${a(f)??""}${m}`}return h.value}));return{usedParams:l,interpolatedPath:u,isMissingParams:c}}function Gp(e,t){let n=encodeURIComponent(e);if(t)for(const[r,s]of t)n=n.replaceAll(r,s);return n}function li(e,t,n){const r=Jp(e,t,n);if(!(t.to&&!r))return r??{}}function Jp(e,{to:t,fuzzy:n,caseSensitive:r},s){const i=t,o=wu(e.startsWith("/")?e:`/${e}`,s),a=ns(i.startsWith("/")?i:`/${i}`,s),c={};return _p(o,a,c,n,r)?c:void 0}function _p(e,t,n,r,s){let i=0,o=0;for(;i<e.length||o<t.length;){const a=e[i],c=t[o];if(c){if(c.type===Yt){const l=e.slice(i);let u;if(c.prefixSegment||c.suffixSegment){if(!a)return!1;const h=c.prefixSegment||"",f=c.suffixSegment||"",p=a.value;if("prefixSegment"in c&&!p.startsWith(h)||"suffixSegment"in c&&!e[e.length-1]?.value.endsWith(f))return!1;let m=decodeURI(Qe(l.map(y=>y.value)));h&&m.startsWith(h)&&(m=m.slice(h.length)),f&&m.endsWith(f)&&(m=m.slice(0,m.length-f.length)),u=m}else u=decodeURI(Qe(l.map(h=>h.value)));return n["*"]=u,n._splat=u,!0}if(c.type===Oe){if(c.value==="/"&&!a?.value){o++;continue}if(a){if(s){if(c.value!==a.value)return!1}else if(c.value.toLowerCase()!==a.value.toLowerCase())return!1;i++,o++;continue}else return!1}if(c.type===Tt){if(!a||a.value==="/")return!1;let l="",u=!1;if(c.prefixSegment||c.suffixSegment){const h=c.prefixSegment||"",f=c.suffixSegment||"",p=a.value;if(h&&!p.startsWith(h)||f&&!p.endsWith(f))return!1;let m=p;h&&m.startsWith(h)&&(m=m.slice(h.length)),f&&m.endsWith(f)&&(m=m.slice(0,m.length-f.length)),l=decodeURIComponent(m),u=!0}else l=decodeURIComponent(a.value),u=!0;u&&(n[c.value.substring(1)]=l,i++),o++;continue}if(c.type===en){if(!a){o++;continue}if(a.value==="/"){o++;continue}let l="",u=!1;if(c.prefixSegment||c.suffixSegment){const h=c.prefixSegment||"",f=c.suffixSegment||"",p=a.value;if((!h||p.startsWith(h))&&(!f||p.endsWith(f))){let m=p;h&&m.startsWith(h)&&(m=m.slice(h.length)),f&&m.endsWith(f)&&(m=m.slice(0,m.length-f.length)),l=decodeURIComponent(m),u=!0}}else{let h=!0;for(let f=o+1;f<t.length;f++){const p=t[f];if(p?.type===Oe&&p.value===a.value){h=!1;break}if(p?.type===Tt||p?.type===Yt){e.length<t.length&&(h=!1);break}}h&&(l=decodeURIComponent(a.value),u=!0)}u&&(n[c.value.substring(1)]=l,i++),o++;continue}}if(i<e.length&&o>=t.length)return n["**"]=Qe(e.slice(i).map(l=>l.value)),!!r&&t[t.length-1]?.value!=="/";if(o<t.length&&i>=e.length){for(let l=o;l<t.length;l++)if(t[l]?.type!==en)return!1;break}break}return!0}const Xp=.75,Zp=1,Yp=.5,em=.4,tm=.25,nm=.2,rm=.05,sm=.02,im=.01,Ia=2e-4,ja=1e-4;function Ma(e,t){return e.prefixSegment&&e.suffixSegment?t+rm+Ia*e.prefixSegment.length+ja*e.suffixSegment.length:e.prefixSegment?t+sm+Ia*e.prefixSegment.length:e.suffixSegment?t+im+ja*e.suffixSegment.length:t}function om(e){const t=[];return e.forEach((r,s)=>{if(r.isRoot||!r.path)return;const i=uo(r.fullPath);let o=ns(i),a=0;for(;o.length>a+1&&o[a]?.value==="/";)a++;a>0&&(o=o.slice(a));let c=0,l=!1;const u=o.map((h,f)=>{if(h.value==="/")return Xp;if(h.type===Oe)return Zp;let p;h.type===Tt?p=Yp:h.type===en?(p=em,c++):p=tm;for(let m=f+1;m<o.length;m++){const y=o[m];if(y.type===Oe&&y.value!=="/")return l=!0,Ma(h,p+nm)}return Ma(h,p)});t.push({child:r,trimmed:i,parsed:o,index:s,scores:u,optionalParamCount:c,hasStaticAfter:l})}),t.sort((r,s)=>{const i=Math.min(r.scores.length,s.scores.length);for(let o=0;o<i;o++)if(r.scores[o]!==s.scores[o])return s.scores[o]-r.scores[o];if(r.scores.length!==s.scores.length){if(r.optionalParamCount!==s.optionalParamCount){if(r.hasStaticAfter===s.hasStaticAfter)return r.optionalParamCount-s.optionalParamCount;if(r.hasStaticAfter&&!s.hasStaticAfter)return-1;if(!r.hasStaticAfter&&s.hasStaticAfter)return 1}return s.scores.length-r.scores.length}for(let o=0;o<i;o++)if(r.parsed[o].value!==s.parsed[o].value)return r.parsed[o].value>s.parsed[o].value?1:-1;return r.index-s.index}).map((r,s)=>(r.child.rank=s,r.child))}function am({routeTree:e,initRoute:t}){const n={},r={},s=o=>{o.forEach((a,c)=>{t?.(a,c);const l=n[a.id];if(Ge(!l,`Duplicate routes found with id: ${String(a.id)}`),n[a.id]=a,!a.isRoot&&a.path){const h=dt(a.fullPath);(!r[h]||a.fullPath.endsWith("/"))&&(r[h]=a)}const u=a.children;u?.length&&s(u)})};s([e]);const i=om(Object.values(n));return{routesById:n,routesByPath:r,flatRoutes:i}}function $e(e){return!!e?.isNotFound}function cm(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Fr="tsr-scroll-restoration-v1_3",lm=(e,t)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{e(...r),n=null},t))}};function um(){const e=cm();if(!e)return null;const t=e.getItem(Fr);let n=t?JSON.parse(t):{};return{state:n,set:r=>(n=Pt(r,n)||n,e.setItem(Fr,JSON.stringify(n)))}}const fr=um(),ui=e=>e.state.__TSR_key||e.href;function dm(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}let Vr=!1;function ku({storageKey:e,key:t,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:s,location:i}){let o;try{o=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(l){console.error(l);return}const a=t||window.history.state?.__TSR_key,c=o[a];Vr=!0;e:{if(r&&c&&Object.keys(c).length>0){for(const h in c){const f=c[h];if(h==="window")window.scrollTo({top:f.scrollY,left:f.scrollX,behavior:n});else if(h){const p=document.querySelector(h);p&&(p.scrollLeft=f.scrollX,p.scrollTop=f.scrollY)}}break e}const l=(i??window.location).hash.split("#",2)[1];if(l){const h=window.history.state?.__hashScrollIntoViewOptions??!0;if(h){const f=document.getElementById(l);f&&f.scrollIntoView(h)}break e}const u={top:0,left:0,behavior:n};if(window.scrollTo(u),s)for(const h of s){if(h==="window")continue;const f=typeof h=="function"?h():document.querySelector(h);f&&f.scrollTo(u)}}Vr=!1}function hm(e,t){if(!fr&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!fr))return;e.isScrollRestorationSetup=!0,Vr=!1;const r=e.options.getScrollRestorationKey||ui;window.history.scrollRestoration="manual";const s=i=>{if(Vr||!e.isScrollRestoring)return;let o="";if(i.target===document||i.target===window)o="window";else{const c=i.target.getAttribute("data-scroll-restoration-id");c?o=`[data-scroll-restoration-id="${c}"]`:o=dm(i.target)}const a=r(e.state.location);fr.set(c=>{const l=c[a]||={},u=l[o]||={};if(o==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(o){const h=document.querySelector(o);h&&(u.scrollX=h.scrollLeft||0,u.scrollY=h.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",lm(s,100),!0),e.subscribe("onRendered",i=>{const o=r(i.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(ku({storageKey:Fr,key:o,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&fr.set(a=>(a[o]||={},a)))})}function fm(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}function pm(e,t=String){const n=new URLSearchParams;for(const r in e){const s=e[r];s!==void 0&&n.set(r,t(s))}return n.toString()}function Cs(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function mm(e){const t=new URLSearchParams(e),n={};for(const[r,s]of t.entries()){const i=n[r];i==null?n[r]=Cs(s):Array.isArray(i)?i.push(Cs(s)):n[r]=[i,Cs(s)]}return n}const Am=ym(JSON.parse),gm=xm(JSON.stringify,JSON.parse);function ym(e){return t=>{t[0]==="?"&&(t=t.substring(1));const n=mm(t);for(const r in n){const s=n[r];if(typeof s=="string")try{n[r]=e(s)}catch{}}return n}}function xm(e,t){const n=typeof t=="function";function r(s){if(typeof s=="object"&&s!==null)try{return e(s)}catch{}else if(n&&typeof s=="string")try{return t(s),e(s)}catch{}return s}return s=>{const i=pm(s,r);return i?`?${i}`:""}}function bm(e){if(e.statusCode=e.statusCode||e.code||307,!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}function Le(e){return e instanceof Response&&!!e.options}function vm(e){const t=new Map;let n,r;const s=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,r&&(r.next=i,i.prev=r)):(i.next.prev=void 0,n=i.next,i.next=void 0,r&&(i.prev=r,r.next=i)),r=i)};return{get(i){const o=t.get(i);if(o)return s(o),o.value},set(i,o){if(t.size>=e&&n){const c=n;t.delete(c.key),c.next&&(n=c.next,c.next.prev=void 0),c===r&&(r=void 0)}const a=t.get(i);if(a)a.value=o,s(a);else{const c={key:i,value:o,prev:r};r&&(r.next=c),r=c,n||(n=c),t.set(i,c)}}}}const Nr=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},rs=(e,t)=>!!(e.preload&&!e.router.state.matches.some(n=>n.id===t)),Cu=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),Ge(n.options.notFoundComponent);const r=e.matches.find(s=>s.routeId===n.id);Ge(r,"Could not find match for route: "+n.id),e.updateMatch(r.id,s=>({...s,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(t.routeId=n.parentRoute.id,Cu(e,t))},at=(e,t,n)=>{if(!(!Le(n)&&!$e(n))){if(Le(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const r=Le(n)?"redirected":"notFound";e.updateMatch(t.id,s=>({...s,status:r,isFetching:!1,error:n})),$e(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw Le(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n),n):(Cu(e,n),n)}},Pu=(e,t)=>{const n=e.router.getMatch(t);return!!(!e.router.isServer&&n._nonReactive.dehydrated||e.router.isServer&&n.ssr===!1)},An=(e,t,n,r)=>{const{id:s,routeId:i}=e.matches[t],o=e.router.looseRoutesById[i];if(n instanceof Promise)throw n;n.routerCode=r,e.firstBadMatchIndex??=t,at(e,e.router.getMatch(s),n);try{o.options.onError?.(n)}catch(a){n=a,at(e,e.router.getMatch(s),n)}e.updateMatch(s,a=>(a._nonReactive.beforeLoadPromise?.resolve(),a._nonReactive.beforeLoadPromise=void 0,a._nonReactive.loadPromise?.resolve(),{...a,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},wm=(e,t,n,r)=>{const s=e.router.getMatch(t),i=e.matches[n-1]?.id,o=i?e.router.getMatch(i):void 0;if(e.router.isShell()){s.ssr=t===Ae;return}if(o?.ssr===!1){s.ssr=!1;return}const a=p=>p===!0&&o?.ssr==="data-only"?"data-only":p,c=e.router.options.defaultSsr??!0;if(r.options.ssr===void 0){s.ssr=a(c);return}if(typeof r.options.ssr!="function"){s.ssr=a(r.options.ssr);return}const{search:l,params:u}=s,h={search:pr(l,s.searchError),params:pr(u,s.paramsError),location:e.location,matches:e.matches.map(p=>({index:p.index,pathname:p.pathname,fullPath:p.fullPath,staticData:p.staticData,id:p.id,routeId:p.routeId,search:pr(p.search,p.searchError),params:pr(p.params,p.paramsError),ssr:p.ssr}))},f=r.options.ssr(h);if(ut(f))return f.then(p=>{s.ssr=a(p??c)});s.ssr=a(f??c)},Nu=(e,t,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const s=n.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!rs(e,t)&&(n.options.loader||n.options.beforeLoad||Iu(n))&&typeof s=="number"&&s!==1/0&&(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const o=setTimeout(()=>{Nr(e)},s);r._nonReactive.pendingTimeout=o}},Sm=(e,t,n)=>{const r=e.router.getMatch(t);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;Nu(e,t,n,r);const s=()=>{const i=e.router.getMatch(t);i.preload&&(i.status==="redirected"||i.status==="notFound")&&at(e,i,i.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(s):s()},km=(e,t,n,r)=>{const s=e.router.getMatch(t),i=s._nonReactive.loadPromise;s._nonReactive.loadPromise=Zt(()=>{i?.resolve()});const{paramsError:o,searchError:a}=s;o&&An(e,n,o,"PARSE_PARAMS"),a&&An(e,n,a,"VALIDATE_SEARCH"),Nu(e,t,r,s);const c=new AbortController,l=e.matches[n-1]?.id,f={...(l?e.router.getMatch(l):void 0)?.context??e.router.options.context??void 0,...s.__routeContext};let p=!1;const m=()=>{p||(p=!0,e.updateMatch(t,S=>({...S,isFetching:"beforeLoad",fetchCount:S.fetchCount+1,abortController:c,context:f})))},y=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,S=>({...S,isFetching:!1}))};if(!r.options.beforeLoad){Cn(()=>{m(),y()});return}s._nonReactive.beforeLoadPromise=Zt();const{search:A,params:g,cause:b}=s,v=rs(e,t),k={search:A,abortController:c,params:g,preload:v,context:f,location:e.location,navigate:S=>e.router.navigate({...S,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:v?"preload":b,matches:e.matches,...e.router.options.additionalContext},P=S=>{if(S===void 0){Cn(()=>{m(),y()});return}(Le(S)||$e(S))&&(m(),An(e,n,S,"BEFORE_LOAD")),Cn(()=>{m(),e.updateMatch(t,w=>({...w,__beforeLoadContext:S,context:{...w.context,...S}})),y()})};let C;try{if(C=r.options.beforeLoad(k),ut(C))return m(),C.catch(S=>{An(e,n,S,"BEFORE_LOAD")}).then(P)}catch(S){m(),An(e,n,S,"BEFORE_LOAD")}P(C)},Cm=(e,t)=>{const{id:n,routeId:r}=e.matches[t],s=e.router.looseRoutesById[r],i=()=>{if(e.router.isServer){const c=wm(e,n,t,s);if(ut(c))return c.then(a)}return a()},o=()=>km(e,n,t,s),a=()=>{if(Pu(e,n))return;const c=Sm(e,n,s);return ut(c)?c.then(o):o()};return i()},Pn=(e,t,n)=>{const r=e.router.getMatch(t);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const s={matches:e.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(s),n.options.scripts?.(s),n.options.headers?.(s)]).then(([i,o,a])=>{const c=i?.meta,l=i?.links,u=i?.scripts,h=i?.styles;return{meta:c,links:l,headScripts:u,headers:a,scripts:o,styles:h}})},Ru=(e,t,n,r)=>{const s=e.matchPromises[n-1],{params:i,loaderDeps:o,abortController:a,context:c,cause:l}=e.router.getMatch(t),u=rs(e,t);return{params:i,deps:o,preload:!!u,parentMatchPromise:s,abortController:a,context:c,location:e.location,navigate:h=>e.router.navigate({...h,_fromLocation:e.location}),cause:u?"preload":l,route:r,...e.router.options.additionalContext}},Ta=async(e,t,n,r)=>{try{const s=e.router.getMatch(t);try{(!e.router.isServer||s.ssr===!0)&&Eu(r);const i=r.options.loader?.(Ru(e,t,n,r)),o=r.options.loader&&ut(i);if(!!(o||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||s._nonReactive.minPendingPromise)&&e.updateMatch(t,h=>({...h,isFetching:"loader"})),r.options.loader){const h=o?await i:i;at(e,e.router.getMatch(t),h),h!==void 0&&e.updateMatch(t,f=>({...f,loaderData:h}))}r._lazyPromise&&await r._lazyPromise;const c=Pn(e,t,r),l=c?await c:void 0,u=s._nonReactive.minPendingPromise;u&&await u,r._componentsPromise&&await r._componentsPromise,e.updateMatch(t,h=>({...h,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),...l}))}catch(i){let o=i;const a=s._nonReactive.minPendingPromise;a&&await a,at(e,e.router.getMatch(t),i);try{r.options.onError?.(i)}catch(u){o=u,at(e,e.router.getMatch(t),u)}const c=Pn(e,t,r),l=c?await c:void 0;e.updateMatch(t,u=>({...u,error:o,status:"error",isFetching:!1,...l}))}}catch(s){const i=e.router.getMatch(t);if(i){const o=Pn(e,t,r);if(o){const a=await o;e.updateMatch(t,c=>({...c,...a}))}i._nonReactive.loaderPromise=void 0}at(e,i,s)}},Pm=async(e,t)=>{const{id:n,routeId:r}=e.matches[t];let s=!1,i=!1;const o=e.router.looseRoutesById[r];if(Pu(e,n)){if(e.router.isServer){const l=Pn(e,n,o);if(l){const u=await l;e.updateMatch(n,h=>({...h,...u}))}return e.router.getMatch(n)}}else{const l=e.router.getMatch(n);if(l._nonReactive.loaderPromise){if(l.status==="success"&&!e.sync&&!l.preload)return l;await l._nonReactive.loaderPromise;const u=e.router.getMatch(n);u.error&&at(e,u,u.error)}else{const u=Date.now()-l.updatedAt,h=rs(e,n),f=h?o.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:o.options.staleTime??e.router.options.defaultStaleTime??0,p=o.options.shouldReload,m=typeof p=="function"?p(Ru(e,n,t,o)):p,y=!!h&&!e.router.state.matches.some(v=>v.id===n),A=e.router.getMatch(n);A._nonReactive.loaderPromise=Zt(),y!==A.preload&&e.updateMatch(n,v=>({...v,preload:y}));const{status:g,invalid:b}=A;if(s=g==="success"&&(b||(m??u>f)),!(h&&o.options.preload===!1))if(s&&!e.sync)i=!0,(async()=>{try{await Ta(e,n,t,o);const v=e.router.getMatch(n);v._nonReactive.loaderPromise?.resolve(),v._nonReactive.loadPromise?.resolve(),v._nonReactive.loaderPromise=void 0}catch(v){Le(v)&&await e.router.navigate(v.options)}})();else if(g!=="success"||s&&e.sync)await Ta(e,n,t,o);else{const v=Pn(e,n,o);if(v){const k=await v;e.updateMatch(n,P=>({...P,...k}))}}}}const a=e.router.getMatch(n);i||(a._nonReactive.loaderPromise?.resolve(),a._nonReactive.loadPromise?.resolve()),clearTimeout(a._nonReactive.pendingTimeout),a._nonReactive.pendingTimeout=void 0,i||(a._nonReactive.loaderPromise=void 0),a._nonReactive.dehydrated=void 0;const c=i?a.isFetching:!1;return c!==a.isFetching||a.invalid!==!1?(e.updateMatch(n,l=>({...l,isFetching:c,invalid:!1})),e.router.getMatch(n)):a};async function Ba(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(n=>n._forcePending)&&Nr(t);try{for(let s=0;s<t.matches.length;s++){const i=Cm(t,s);ut(i)&&await i}const n=t.firstBadMatchIndex??t.matches.length;for(let s=0;s<n;s++)t.matchPromises.push(Pm(t,s));await Promise.all(t.matchPromises);const r=Nr(t);ut(r)&&await r}catch(n){if($e(n)&&!t.preload){const r=Nr(t);throw ut(r)&&await r,n}if(Le(n))throw n}return t.matches}async function Eu(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...r}=t.options;Object.assign(e.options,r),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const n=[];for(const r of ju){const s=e.options[r]?.preload;s&&n.push(s())}if(n.length)return Promise.all(n).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function pr(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function Iu(e){for(const t of ju)if(e.options[t]?.preload)return!0;return!1}const ju=["component","errorComponent","pendingComponent","notFoundComponent"];function Nm(e){return{input:({url:t})=>{for(const n of e)t=Mu(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=Tu(e[n],t);return t}}}function Rm(e){const t=Pr(e.basepath),n=`/${t}`,r=`${n}/`,s=e.caseSensitive?n:n.toLowerCase(),i=e.caseSensitive?r:r.toLowerCase();return{input:({url:o})=>{const a=e.caseSensitive?o.pathname:o.pathname.toLowerCase();return a===s?o.pathname="/":a.startsWith(i)&&(o.pathname=o.pathname.slice(n.length)),o},output:({url:o})=>(o.pathname=Qe(["/",t,o.pathname]),o)}}function Mu(e,t){const n=e?.input?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function Tu(e,t){const n=e?.output?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function Rt(e){const t=e.resolvedLocation,n=e.location,r=t?.pathname!==n.pathname,s=t?.href!==n.href,i=t?.hash!==n.hash;return{fromLocation:t,toLocation:n,pathChanged:r,hrefChanged:s,hashChanged:i}}class Em{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,s=this.basepath??r?.basepath??"/",i=this.basepath===void 0,o=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(f=>[encodeURIComponent(f),f])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=Dp())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new ai(jm(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(f=>!["redirected"].includes(f.status))}}}),hm(this));let a=!1;const c=this.options.basepath??"/",l=this.options.rewrite;if(i||s!==c||o!==l){this.basepath=c;const f=[];Pr(c)!==""&&f.push(Rm({basepath:c})),l&&f.push(l),this.rewrite=f.length===0?void 0:f.length===1?f[0]:Nm(f),this.history&&this.updateLatestLocation(),a=!0}a&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,flatRoutes:s}=am({routeTree:this.routeTree,initRoute:(o,a)=>{o.init({originalIndex:a})}});this.routesById=n,this.routesByPath=r,this.flatRoutes=s;const i=this.options.notFoundRoute;i&&(i.init({originalIndex:99999999999}),this.routesById[i.id]=i)},this.subscribe=(n,r)=>{const s={eventType:n,fn:r};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const s=({href:c,state:l})=>{const u=new URL(c,this.origin),h=Mu(this.rewrite,u),f=this.options.parseSearch(h.search),p=this.options.stringifySearch(f);h.search=p;const m=h.href.replace(h.origin,""),{pathname:y,hash:A}=h;return{href:m,publicHref:c,url:h.href,pathname:y,searchStr:p,search:we(r?.search,f),hash:A.split("#").reverse()[0]??"",state:we(r?.state,l)}},i=s(n),{__tempLocation:o,__tempKey:a}=i.state;if(o&&(!a||a===this.tempLocationKey)){const c=s(o);return c.state.key=i.state.key,c.state.__TSR_key=i.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:i}}return i},this.resolvePathWithBase=(n,r)=>Up({base:n,to:lo(r),trailingSlash:this.options.trailingSlash,parseCache:this.parsePathnameCache}),this.matchRoutes=(n,r,s)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},s):this.matchRoutesInternal(n,r),this.parsePathnameCache=vm(1e3),this.getMatchedRoutes=(n,r)=>Mm({pathname:n,routePathname:r,caseSensitive:this.options.caseSensitive,routesByPath:this.routesByPath,routesById:this.routesById,flatRoutes:this.flatRoutes,parseCache:this.parsePathnameCache}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{this.state.pendingMatches?.forEach(n=>{this.cancelMatch(n.id)})},this.buildLocation=n=>{const r=(i={})=>{const o=i._fromLocation||this.latestLocation,a=this.matchRoutes(o,{_buildLocation:!0}),c=ci(a);i.from;const l=i.unsafeRelative==="path"?o.pathname:i.from??c.fullPath,u=this.resolvePathWithBase(l,"."),h=c.search,f={...c.params},p=i.to?this.resolvePathWithBase(u,`${i.to}`):this.resolvePathWithBase(u,"."),m=i.params===!1||i.params===null?{}:(i.params??!0)===!0?f:Object.assign(f,Pt(i.params,f)),y=hr({path:p,params:m,parseCache:this.parsePathnameCache}).interpolatedPath,A=this.matchRoutes(y,void 0,{_buildLocation:!0}).map(j=>this.looseRoutesById[j.routeId]);if(Object.keys(m).length>0)for(const j of A){const O=j.options.params?.stringify??j.options.stringifyParams;O&&Object.assign(m,O(m))}const g=hr({path:p,params:m,leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath;let b=h;if(n._includeValidateSearch&&this.options.search?.strict){const j={};A.forEach(O=>{if(O.options.validateSearch)try{Object.assign(j,di(O.options.validateSearch,{...j,...b}))}catch{}}),b=j}b=Tm({search:b,dest:i,destRoutes:A,_includeValidateSearch:n._includeValidateSearch}),b=we(h,b);const v=this.options.stringifySearch(b),k=i.hash===!0?o.hash:i.hash?Pt(i.hash,o.hash):void 0,P=k?`#${k}`:"";let C=i.state===!0?o.state:i.state?Pt(i.state,o.state):{};C=we(o.state,C);const S=`${g}${v}${P}`,w=new URL(S,this.origin),R=Tu(this.rewrite,w);return{publicHref:R.pathname+R.search+R.hash,href:S,url:R.href,pathname:g,search:b,searchStr:v,state:C,hash:k??"",unmaskOnReload:i.unmaskOnReload}},s=(i={},o)=>{const a=r(i);let c=o?r(o):void 0;if(!c){let l={};const u=this.options.routeMasks?.find(h=>{const f=li(a.pathname,{to:h.from,caseSensitive:!1,fuzzy:!1},this.parsePathnameCache);return f?(l=f,!0):!1});if(u){const{from:h,...f}=u;o={from:n.from,...f,params:l},c=r(o)}}return c&&(a.maskedLocation=c),a};return n.mask?s(n,{from:n.from,...n.mask}):s(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...s})=>{const i=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(u=>{s.state[u]=this.latestLocation.state[u]});const l=Nt(s.state,this.latestLocation.state);return c.forEach(u=>{delete s.state[u]}),l},o=dt(this.latestLocation.href)===dt(s.href),a=this.commitLocationPromise;if(this.commitLocationPromise=Zt(()=>{a?.resolve()}),o&&i())this.load();else{let{maskedLocation:c,hashScrollIntoView:l,...u}=s;c&&(u={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=l??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[s.replace?"replace":"push"](u.publicHref,u.state,{ignoreBlocker:r})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:s,viewTransition:i,ignoreBlocker:o,href:a,...c}={})=>{if(a){const u=this.history.location.state.__TSR_index,h=Dr(a,{__TSR_index:n?u:u+1});c.to=h.pathname,c.search=this.options.parseSearch(h.search),c.hash=h.hash.slice(1)}const l=this.buildLocation({...c,_includeValidateSearch:!0});return this.commitLocation({...l,viewTransition:i,replace:n,resetScroll:r,hashScrollIntoView:s,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:s,...i})=>{if(!r&&s)try{new URL(`${s}`),r=!0}catch{}return r?(s||(s=this.buildLocation({to:n,...i}).url),i.replace?window.location.replace(s):window.location.href=s,Promise.resolve()):this.buildAndCommitLocation({...i,href:s,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0}),s=i=>{try{return encodeURI(decodeURI(i))}catch{return i}};if(Pr(s(this.latestLocation.href))!==Pr(s(r.href))){let i=r.url;throw this.origin&&i.startsWith(this.origin)&&(i=i.replace(this.origin,"")||"/"),bm({href:i})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(s=>!n.some(i=>i.id===s.id))}))},this.load=async n=>{let r,s,i;for(i=new Promise(o=>{this.startTransition(async()=>{try{this.beforeLoad();const a=this.latestLocation,c=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Rt({resolvedLocation:c,location:a})}),this.emit({type:"onBeforeLoad",...Rt({resolvedLocation:c,location:a})}),await Ba({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:a,updateMatch:this.updateMatch,onReady:async()=>{this.startViewTransition(async()=>{let l,u,h;Cn(()=>{this.__store.setState(f=>{const p=f.matches,m=f.pendingMatches||f.matches;return l=p.filter(y=>!m.some(A=>A.id===y.id)),u=m.filter(y=>!p.some(A=>A.id===y.id)),h=p.filter(y=>m.some(A=>A.id===y.id)),{...f,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...f.cachedMatches,...l.filter(y=>y.status!=="error")]}}),this.clearExpiredCache()}),[[l,"onLeave"],[u,"onEnter"],[h,"onStay"]].forEach(([f,p])=>{f.forEach(m=>{this.looseRoutesById[m.routeId].options[p]?.(m)})})})}})}catch(a){Le(a)?(r=a,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):$e(a)&&(s=a),this.__store.setState(c=>({...c,statusCode:r?r.status:s?404:c.matches.some(l=>l.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===i&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(o=>({...o,statusCode:404}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,o=this.state.resolvedLocation,a=typeof r.types=="function"?r.types(Rt({resolvedLocation:o,location:i})):r.types;if(a===!1){n();return}s={update:n,types:a}}else s=n;document.startViewTransition(s)}else n()},this.updateMatch=(n,r)=>{const s=this.state.pendingMatches?.some(i=>i.id===n)?"pendingMatches":this.state.matches.some(i=>i.id===n)?"matches":this.state.cachedMatches.some(i=>i.id===n)?"cachedMatches":"";s&&this.__store.setState(i=>({...i,[s]:i[s]?.map(o=>o.id===n?r(o):o)}))},this.getMatch=n=>{const r=s=>s.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=s=>n?.filter?.(s)??!0?{...s,invalid:!0,...n?.forcePending||s.status==="error"?{status:"pending",error:void 0}:void 0}:s;return this.__store.setState(s=>({...s,matches:s.matches.map(r),cachedMatches:s.cachedMatches.map(r),pendingMatches:s.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.resolveRedirect=n=>{if(!n.options.href){const r=this.buildLocation(n.options);let s=r.url;this.origin&&s.startsWith(this.origin)&&(s=s.replace(this.origin,"")||"/"),n.options.href=r.href,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(i=>!r(i))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const s=this.looseRoutesById[r.routeId];if(!s.options.loader)return!0;const i=(r.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=i};this.clearCache({filter:n})},this.loadRouteChunk=Eu,this.preloadRoute=async n=>{const r=this.buildLocation(n);let s=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...i,...this.state.cachedMatches.map(a=>a.id)]);Cn(()=>{s.forEach(a=>{o.has(a.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,a]}))})});try{return s=await Ba({router:this,matches:s,location:r,preload:!0,updateMatch:(a,c)=>{i.has(a)?s=s.map(l=>l.id===a?c(l):l):this.updateMatch(a,c)}}),s}catch(a){if(Le(a))return a.options.reloadDocument?void 0:await this.preloadRoute({...a.options,_fromLocation:r});$e(a)||console.error(a);return}},this.matchRoute=(n,r)=>{const s={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},i=this.buildLocation(s);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=li(a.pathname,{...r,to:i.pathname},this.parsePathnameCache);return!c||n.params&&!Nt(c,n.params,{partial:!0})?!1:c&&(r?.includeSearch??!0)?Nt(a.search,i.search,{partial:!0})?c:!1:c},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??gm,parseSearch:t.parseSearch??Am}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,n){const{foundRoute:r,matchedRoutes:s,routeParams:i}=this.getMatchedRoutes(t.pathname,n?.dest?.to);let o=!1;(r?r.path!=="/"&&i["**"]:dt(t.pathname))&&(this.options.notFoundRoute?s.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.children)return h.id}return Ae}})(),c=[],l=u=>u?.id?u.context??this.options.context??void 0:this.options.context??void 0;return s.forEach((u,h)=>{const f=c[h-1],[p,m,y]=(()=>{const Q=f?.search??t.search,He=f?._strictSearch??void 0;try{const pe=di(u.options.validateSearch,{...Q})??void 0;return[{...Q,...pe},{...He,...pe},void 0]}catch(pe){let Be=pe;if(pe instanceof $r||(Be=new $r(pe.message,{cause:pe})),n?.throwOnError)throw Be;return[Q,{},Be]}})(),A=u.options.loaderDeps?.({search:p})??"",g=A?JSON.stringify(A):"",{interpolatedPath:b,usedParams:v}=hr({path:u.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),k=hr({path:u.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap,parseCache:this.parsePathnameCache}).interpolatedPath+g,P=this.getMatch(k),C=this.state.matches.find(Q=>Q.routeId===u.id),S=P?._strictParams??v;let w;if(!P){const Q=u.options.params?.parse??u.options.parseParams;if(Q)try{Object.assign(S,Q(S))}catch(He){if(w=new Im(He.message,{cause:He}),n?.throwOnError)throw w}}Object.assign(i,S);const R=C?"stay":"enter";let j;if(P)j={...P,cause:R,params:C?we(C.params,i):i,_strictParams:S,search:we(C?C.search:P.search,p),_strictSearch:m};else{const Q=u.options.loader||u.options.beforeLoad||u.lazyFn||Iu(u)?"pending":"success";j={id:k,index:h,routeId:u.id,params:C?we(C.params,i):i,_strictParams:S,pathname:b,updatedAt:Date.now(),search:C?we(C.search,p):p,_strictSearch:m,searchError:void 0,status:Q,isFetching:!1,error:void 0,paramsError:w,__routeContext:void 0,_nonReactive:{loadPromise:Zt()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:R,loaderDeps:C?we(C.loaderDeps,A):A,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:u.options.staticData||{},fullPath:u.fullPath}}n?.preload||(j.globalNotFound=a===u.id),j.searchError=y;const O=l(f);j.context={...O,...j.__routeContext,...j.__beforeLoadContext},c.push(j)}),c.forEach((u,h)=>{const f=this.looseRoutesById[u.routeId];if(!this.getMatch(u.id)&&n?._buildLocation!==!0){const m=c[h-1],y=l(m);if(f.options.context){const A={deps:u.loaderDeps,params:u.params,context:y??{},location:t,navigate:g=>this.navigate({...g,_fromLocation:t}),buildLocation:this.buildLocation,cause:u.cause,abortController:u.abortController,preload:!!u.preload,matches:c};u.__routeContext=f.options.context(A)??void 0}u.context={...y,...u.__routeContext,...u.__beforeLoadContext}}}),c}}class $r extends Error{}class Im extends Error{}function jm(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function di(e,t){if(e==null)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new $r("Async validation not supported");if(n.issues)throw new $r(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function Mm({pathname:e,routePathname:t,caseSensitive:n,routesByPath:r,routesById:s,flatRoutes:i,parseCache:o}){let a={};const c=dt(e),l=p=>li(c,{to:p.fullPath,caseSensitive:p.options?.caseSensitive??n,fuzzy:!0},o);let u=t!==void 0?r[t]:void 0;if(u)a=l(u);else{let p;for(const m of i){const y=l(m);if(y)if(m.path!=="/"&&y["**"])p||(p={foundRoute:m,routeParams:y});else{u=m,a=y;break}}!u&&p&&(u=p.foundRoute,a=p.routeParams)}let h=u||s[Ae];const f=[h];for(;h.parentRoute;)h=h.parentRoute,f.push(h);return f.reverse(),{matchedRoutes:f,routeParams:a,foundRoute:u}}function Tm({search:e,dest:t,destRoutes:n,_includeValidateSearch:r}){const s=n.reduce((a,c)=>{const l=[];if("search"in c.options)c.options.search?.middlewares&&l.push(...c.options.search.middlewares);else if(c.options.preSearchFilters||c.options.postSearchFilters){const u=({search:h,next:f})=>{let p=h;"preSearchFilters"in c.options&&c.options.preSearchFilters&&(p=c.options.preSearchFilters.reduce((y,A)=>A(y),h));const m=f(p);return"postSearchFilters"in c.options&&c.options.postSearchFilters?c.options.postSearchFilters.reduce((y,A)=>A(y),m):m};l.push(u)}if(r&&c.options.validateSearch){const u=({search:h,next:f})=>{const p=f(h);try{return{...p,...di(c.options.validateSearch,p)??void 0}}catch{return p}};l.push(u)}return a.concat(l)},[])??[],i=({search:a})=>t.search?t.search===!0?a:Pt(t.search,a):{};s.push(i);const o=(a,c)=>{if(a>=s.length)return c;const l=s[a];return l({search:c,next:h=>o(a+1,h)})};return o(0,e)}const Bm="Error preloading route! ";class Bu{constructor(t){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,s=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),s?this._path=Ae:this.parentRoute||Ge(!1);let i=s?Ae:r?.path;i&&i!=="/"&&(i=uo(i));const o=r?.id||i;let a=s?Ae:Qe([this.parentRoute.id===Ae?"":this.parentRoute.id,o]);i===Ae&&(i="/"),a!==Ae&&(a=Qe(["/",a]));const c=a===Ae?"/":Qe([this.parentRoute.fullPath,i]);this._path=i,this._id=a,this._fullPath=c,this._to=c},this.clone=n=>{this._path=n._path,this._id=n._id,this._fullPath=n._fullPath,this._to=n._to,this.options.getParentRoute=n.options.getParentRoute,this.children=n.children},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class Dm extends Bu{constructor(t){super(t)}}function ho(e){const t=e.errorComponent??ss;return d.jsx(Lm,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:n,reset:r})=>n?x.createElement(t,{error:n,reset:r}):e.children})}class Lm extends x.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,n){this.props.onCatch&&this.props.onCatch(t,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function ss({error:e}){const[t,n]=x.useState(!1);return d.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[d.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),d.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:t?"Hide Error":"Show Error"})]}),d.jsx("div",{style:{height:".25rem"}}),t?d.jsx("div",{children:d.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?d.jsx("code",{children:e.message}):null})}):null]})}function Om({children:e,fallback:t=null}){return Fm()?d.jsx(D.Fragment,{children:e}):d.jsx(D.Fragment,{children:t})}function Fm(){return D.useSyncExternalStore(Vm,()=>!0,()=>!1)}function Vm(){return()=>{}}var Ps={exports:{}},Ns={},Rs={exports:{}},Es={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da;function $m(){if(Da)return Es;Da=1;var e=yu();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(h,f){var p=f(),m=r({inst:{value:p,getSnapshot:f}}),y=m[0].inst,A=m[1];return i(function(){y.value=p,y.getSnapshot=f,c(y)&&A({inst:y})},[h,p,f]),s(function(){return c(y)&&A({inst:y}),h(function(){c(y)&&A({inst:y})})},[h]),o(p),p}function c(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!n(h,p)}catch{return!0}}function l(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return Es.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Es}var La;function Um(){return La||(La=1,Rs.exports=$m()),Rs.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa;function Km(){if(Oa)return Ns;Oa=1;var e=yu(),t=Um();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return Ns.useSyncExternalStoreWithSelector=function(l,u,h,f,p){var m=i(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=a(function(){function g(C){if(!b){if(b=!0,v=C,C=f(C),p!==void 0&&y.hasValue){var S=y.value;if(p(S,C))return k=S}return k=C}if(S=k,r(v,C))return S;var w=f(C);return p!==void 0&&p(S,w)?(v=C,S):(v=C,k=w)}var b=!1,v,k,P=h===void 0?null:h;return[function(){return g(u())},P===null?void 0:function(){return g(P())}]},[u,h,f,p]);var A=s(l,m[0],m[1]);return o(function(){y.hasValue=!0,y.value=A},[A]),c(A),A},Ns}var Fa;function zm(){return Fa||(Fa=1,Ps.exports=Km()),Ps.exports}var qm=zm();function Hm(e,t=n=>n){return qm.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,Wm)}function Wm(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!t.has(r)||!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Va(e);if(n.length!==Va(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}function Va(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}const Is=x.createContext(null);function Du(){return typeof document>"u"?Is:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Is,Is)}function be(e){const t=x.useContext(Du());return e?.warn,t}function he(e){const t=be({warn:e?.router===void 0}),n=e?.router||t,r=x.useRef(void 0);return Hm(n.__store,s=>{if(e?.select){if(e.structuralSharing??n.options.defaultStructuralSharing){const i=we(r.current,e.select(s));return r.current=i,i}return e.select(s)}return s})}const is=x.createContext(void 0),Qm=x.createContext(void 0);function Ue(e){const t=x.useContext(e.from?Qm:is);return he({select:r=>{const s=r.matches.find(i=>e.from?e.from===i.routeId:i.id===t);if(Ge(!((e.shouldThrow??!0)&&!s),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),s!==void 0)return e.select?e.select(s):s},structuralSharing:e.structuralSharing})}function fo(e){return Ue({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function po(e){const{select:t,...n}=e;return Ue({...n,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function mo(e){return Ue({from:e.from,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,strict:e.strict,select:t=>{const n=e.strict===!1?t.params:t._strictParams;return e.select?e.select(n):n}})}function Ao(e){return Ue({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}function Ke(e){const t=be();return x.useCallback(n=>t.navigate({...n,from:n.from??e?.from}),[e?.from,t])}var Gm=Rp();const mr=typeof window<"u"?x.useLayoutEffect:x.useEffect;function js(e){const t=x.useRef({value:e,prev:null}),n=t.current.value;return e!==n&&(t.current={value:e,prev:n}),t.current.prev}function Jm(e,t,n={},r={}){x.useEffect(()=>{if(!e.current||r.disabled||typeof IntersectionObserver!="function")return;const s=new IntersectionObserver(([i])=>{t(i)},n);return s.observe(e.current),()=>{s.disconnect()}},[t,n,r.disabled,e])}function _m(e){const t=x.useRef(null);return x.useImperativeHandle(e,()=>t.current,[]),t}function Xm(e,t){const n=be(),[r,s]=x.useState(!1),i=x.useRef(!1),o=_m(t),{activeProps:a,inactiveProps:c,activeOptions:l,to:u,preload:h,preloadDelay:f,hashScrollIntoView:p,replace:m,startTransition:y,resetScroll:A,viewTransition:g,children:b,target:v,disabled:k,style:P,className:C,onClick:S,onFocus:w,onMouseEnter:R,onMouseLeave:j,onTouchStart:O,ignoreBlocker:Q,params:He,search:pe,hash:Be,state:vs,mask:ee,reloadDocument:xe,unsafeRelative:nt,from:yt,_fromLocation:ga,...ya}=e,wp=he({select:U=>U.location.search,structuralSharing:!0}),xa=e.from,mn=x.useMemo(()=>({...e,from:xa}),[n,wp,xa,e._fromLocation,e.hash,e.to,e.search,e.params,e.state,e.mask,e.unsafeRelative]),We=x.useMemo(()=>n.buildLocation({...mn}),[n,mn]),ar=x.useMemo(()=>{if(k)return;let U=We.maskedLocation?We.maskedLocation.url:We.url,oe=!1;return n.origin&&(U.startsWith(n.origin)?U=n.history.createHref(U.replace(n.origin,""))||"/":oe=!0),{href:U,external:oe}},[k,We.maskedLocation,We.url,n.origin,n.history]),cr=x.useMemo(()=>{if(ar?.external)return ar.href;try{return new URL(u),u}catch{}},[u,ar]),Ot=e.reloadDocument||cr?!1:h??n.options.defaultPreload,ws=f??n.options.defaultPreloadDelay??0,Ss=he({select:U=>{if(cr)return!1;if(l?.exact){if(!Vp(U.location.pathname,We.pathname,n.basepath))return!1}else{const oe=Or(U.location.pathname,n.basepath),Ee=Or(We.pathname,n.basepath);if(!(oe.startsWith(Ee)&&(oe.length===Ee.length||oe[Ee.length]==="/")))return!1}return(l?.includeSearch??!0)&&!Nt(U.location.search,We.search,{partial:!l?.exact,ignoreUndefined:!l?.explicitUndefined})?!1:l?.includeHash?U.location.hash===We.hash:!0}}),xt=x.useCallback(()=>{n.preloadRoute({...mn}).catch(U=>{console.warn(U),console.warn(Bm)})},[n,mn]),Sp=x.useCallback(U=>{U?.isIntersecting&&xt()},[xt]);Jm(o,Sp,nA,{disabled:!!k||Ot!=="viewport"}),x.useEffect(()=>{i.current||!k&&Ot==="render"&&(xt(),i.current=!0)},[k,xt,Ot]);const kp=U=>{const oe=U.currentTarget.target,Ee=v!==void 0?v:oe;if(!k&&!rA(U)&&!U.defaultPrevented&&(!Ee||Ee==="_self")&&U.button===0){U.preventDefault(),Gm.flushSync(()=>{s(!0)});const Sa=n.subscribe("onResolved",()=>{Sa(),s(!1)});n.navigate({...mn,replace:m,resetScroll:A,hashScrollIntoView:p,startTransition:y,viewTransition:g,ignoreBlocker:Q})}};if(cr)return{...ya,ref:o,href:cr,...b&&{children:b},...v&&{target:v},...k&&{disabled:k},...P&&{style:P},...C&&{className:C},...S&&{onClick:S},...w&&{onFocus:w},...R&&{onMouseEnter:R},...j&&{onMouseLeave:j},...O&&{onTouchStart:O}};const ba=U=>{k||Ot&&xt()},Cp=ba,Pp=U=>{if(!(k||!Ot))if(!ws)xt();else{const oe=U.target;if(gn.has(oe))return;const Ee=setTimeout(()=>{gn.delete(oe),xt()},ws);gn.set(oe,Ee)}},Np=U=>{if(k||!Ot||!ws)return;const oe=U.target,Ee=gn.get(oe);Ee&&(clearTimeout(Ee),gn.delete(oe))},lr=Ss?Pt(a,{})??Zm:Ms,ur=Ss?Ms:Pt(c,{})??Ms,va=[C,lr.className,ur.className].filter(Boolean).join(" "),wa=(P||lr.style||ur.style)&&{...P,...lr.style,...ur.style};return{...ya,...lr,...ur,href:ar?.href,ref:o,onClick:yn([S,kp]),onFocus:yn([w,ba]),onMouseEnter:yn([R,Pp]),onMouseLeave:yn([j,Np]),onTouchStart:yn([O,Cp]),disabled:!!k,target:v,...wa&&{style:wa},...va&&{className:va},...k&&Ym,...Ss&&eA,...r&&tA}}const Ms={},Zm={className:"active"},Ym={role:"link","aria-disabled":!0},eA={"data-status":"active","aria-current":"page"},tA={"data-transitioning":"transitioning"},gn=new WeakMap,nA={rootMargin:"100px"},yn=e=>t=>{for(const n of e)if(n){if(t.defaultPrevented)return;n(t)}},ge=x.forwardRef((e,t)=>{const{_asChild:n,...r}=e,{type:s,ref:i,...o}=Xm(r,t),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return n===void 0&&delete o.disabled,x.createElement(n||"a",{...o,ref:i},a)});function rA(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}let sA=class extends Bu{constructor(t){super(t),this.useMatch=n=>Ue({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Ue({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Ao({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>mo({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>po({...n,from:this.id}),this.useLoaderData=n=>fo({...n,from:this.id}),this.useNavigate=()=>Ke({from:this.fullPath}),this.Link=D.forwardRef((n,r)=>d.jsx(ge,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}};function iA(e){return new sA(e)}class oA extends Dm{constructor(t){super(t),this.useMatch=n=>Ue({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Ue({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Ao({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>mo({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>po({...n,from:this.id}),this.useLoaderData=n=>fo({...n,from:this.id}),this.useNavigate=()=>Ke({from:this.fullPath}),this.Link=D.forwardRef((n,r)=>d.jsx(ge,{ref:r,from:this.fullPath,...n})),this.$$typeof=Symbol.for("react.memo")}}function aA(e){return new oA(e)}function Re(e){return typeof e=="object"?new $a(e,{silent:!0}).createRoute(e):new $a(e,{silent:!0}).createRoute}class $a{constructor(t,n){this.path=t,this.createRoute=r=>{this.silent;const s=iA(r);return s.isRoot=!1,s},this.silent=n?.silent}}class Ua{constructor(t){this.useMatch=n=>Ue({select:n?.select,from:this.options.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Ue({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Ao({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useParams=n=>mo({select:n?.select,structuralSharing:n?.structuralSharing,from:this.options.id}),this.useLoaderDeps=n=>po({...n,from:this.options.id}),this.useLoaderData=n=>fo({...n,from:this.options.id}),this.useNavigate=()=>{const n=be();return Ke({from:n.routesById[this.options.id].fullPath})},this.options=t,this.$$typeof=Symbol.for("react.memo")}}function Ka(e){return typeof e=="object"?new Ua(e):t=>new Ua({id:e,...t})}function cA(){const e=be(),t=x.useRef({router:e,mounted:!1}),[n,r]=x.useState(!1),{hasPendingMatches:s,isLoading:i}=he({select:h=>({isLoading:h.isLoading,hasPendingMatches:h.matches.some(f=>f.status==="pending")}),structuralSharing:!0}),o=js(i),a=i||n||s,c=js(a),l=i||s,u=js(l);return e.startTransition=h=>{r(!0),x.startTransition(()=>{h(),r(!1)})},x.useEffect(()=>{const h=e.history.subscribe(e.load),f=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return dt(e.latestLocation.href)!==dt(f.href)&&e.commitLocation({...f,replace:!0}),()=>{h()}},[e,e.history]),mr(()=>{if(typeof window<"u"&&e.ssr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(f){console.error(f)}})()},[e]),mr(()=>{o&&!i&&e.emit({type:"onLoad",...Rt(e.state)})},[o,e,i]),mr(()=>{u&&!l&&e.emit({type:"onBeforeRouteMount",...Rt(e.state)})},[l,u,e]),mr(()=>{c&&!a&&(e.emit({type:"onResolved",...Rt(e.state)}),e.__store.setState(h=>({...h,status:"idle",resolvedLocation:h.location})),fm(e))},[a,c,e]),null}function lA(e){const t=he({select:n=>`not-found-${n.location.pathname}-${n.status}`});return d.jsx(ho,{getResetKey:()=>t,onCatch:(n,r)=>{if($e(n))e.onCatch?.(n,r);else throw n},errorComponent:({error:n})=>{if($e(n))return e.fallback?.(n);throw n},children:e.children})}function uA(){return d.jsx("p",{children:"Not Found"})}function $t(e){return d.jsx(d.Fragment,{children:e.children})}function Lu(e,t,n){return t.options.notFoundComponent?d.jsx(t.options.notFoundComponent,{data:n}):e.options.defaultNotFoundComponent?d.jsx(e.options.defaultNotFoundComponent,{data:n}):d.jsx(uA,{})}function dA({children:e}){const t=be();return t.isServer?d.jsx("script",{nonce:t.options.ssr?.nonce,className:"$tsr",dangerouslySetInnerHTML:{__html:[e].filter(Boolean).join(`
`)+";$_TSR.c()"}}):null}function hA(){const e=be();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const n=(e.options.getScrollRestorationKey||ui)(e.latestLocation),r=n!==ui(e.latestLocation)?n:void 0,s={storageKey:Fr,shouldScrollRestoration:!0};return r&&(s.key=r),d.jsx(dA,{children:`(${ku.toString()})(${JSON.stringify(s)})`})}const Ou=x.memo(function({matchId:t}){const n=be(),r=he({select:g=>{const b=g.matches.find(v=>v.id===t);return Ge(b),{routeId:b.routeId,ssr:b.ssr,_displayPending:b._displayPending}},structuralSharing:!0}),s=n.routesById[r.routeId],i=s.options.pendingComponent??n.options.defaultPendingComponent,o=i?d.jsx(i,{}):null,a=s.options.errorComponent??n.options.defaultErrorComponent,c=s.options.onCatch??n.options.defaultOnCatch,l=s.isRoot?s.options.notFoundComponent??n.options.notFoundRoute?.options.component:s.options.notFoundComponent,u=r.ssr===!1||r.ssr==="data-only",h=(!s.isRoot||s.options.wrapInSuspense||u)&&(s.options.wrapInSuspense??i??(s.options.errorComponent?.preload||u))?x.Suspense:$t,f=a?ho:$t,p=l?lA:$t,m=he({select:g=>g.loadedAt}),y=he({select:g=>{const b=g.matches.findIndex(v=>v.id===t);return g.matches[b-1]?.routeId}}),A=s.isRoot?s.options.shellComponent??$t:$t;return d.jsxs(A,{children:[d.jsx(is.Provider,{value:t,children:d.jsx(h,{fallback:o,children:d.jsx(f,{getResetKey:()=>m,errorComponent:a||ss,onCatch:(g,b)=>{if($e(g))throw g;c?.(g,b)},children:d.jsx(p,{fallback:g=>{if(!l||g.routeId&&g.routeId!==r.routeId||!g.routeId&&!s.isRoot)throw g;return x.createElement(l,g)},children:u||r._displayPending?d.jsx(Om,{fallback:o,children:d.jsx(za,{matchId:t})}):d.jsx(za,{matchId:t})})})})}),y===Ae&&n.options.scrollRestoration?d.jsxs(d.Fragment,{children:[d.jsx(fA,{}),d.jsx(hA,{})]}):null]})});function fA(){const e=be(),t=x.useRef(void 0);return d.jsx("script",{suppressHydrationWarning:!0,ref:n=>{n&&(t.current===void 0||t.current.href!==e.latestLocation.href)&&(e.emit({type:"onRendered",...Rt(e.state)}),t.current=e.latestLocation)}},e.latestLocation.state.__TSR_key)}const za=x.memo(function({matchId:t}){const n=be(),{match:r,key:s,routeId:i}=he({select:c=>{const l=c.matches.find(m=>m.id===t),u=l.routeId,f=(n.routesById[u].options.remountDeps??n.options.defaultRemountDeps)?.({routeId:u,loaderDeps:l.loaderDeps,params:l._strictParams,search:l._strictSearch});return{key:f?JSON.stringify(f):void 0,routeId:u,match:{id:l.id,status:l.status,error:l.error,_forcePending:l._forcePending,_displayPending:l._displayPending}}},structuralSharing:!0}),o=n.routesById[i],a=x.useMemo(()=>{const c=o.options.component??n.options.defaultComponent;return c?d.jsx(c,{},s):d.jsx(Fu,{})},[s,o.options.component,n.options.defaultComponent]);if(r._displayPending)throw n.getMatch(r.id)?._nonReactive.displayPendingPromise;if(r._forcePending)throw n.getMatch(r.id)?._nonReactive.minPendingPromise;if(r.status==="pending"){const c=o.options.pendingMinMs??n.options.defaultPendingMinMs;if(c){const l=n.getMatch(r.id);if(l&&!l._nonReactive.minPendingPromise&&!n.isServer){const u=Zt();l._nonReactive.minPendingPromise=u,setTimeout(()=>{u.resolve(),l._nonReactive.minPendingPromise=void 0},c)}}throw n.getMatch(r.id)?._nonReactive.loadPromise}if(r.status==="notFound")return Ge($e(r.error)),Lu(n,o,r.error);if(r.status==="redirected")throw Ge(Le(r.error)),n.getMatch(r.id)?._nonReactive.loadPromise;if(r.status==="error"){if(n.isServer){const c=(o.options.errorComponent??n.options.defaultErrorComponent)||ss;return d.jsx(c,{error:r.error,reset:void 0,info:{componentStack:""}})}throw r.error}return a}),Fu=x.memo(function(){const t=be(),n=x.useContext(is),r=he({select:l=>l.matches.find(u=>u.id===n)?.routeId}),s=t.routesById[r],i=he({select:l=>{const h=l.matches.find(f=>f.id===n);return Ge(h),h.globalNotFound}}),o=he({select:l=>{const u=l.matches,h=u.findIndex(f=>f.id===n);return u[h+1]?.id}}),a=t.options.defaultPendingComponent?d.jsx(t.options.defaultPendingComponent,{}):null;if(i)return Lu(t,s,void 0);if(!o)return null;const c=d.jsx(Ou,{matchId:o});return n===Ae?d.jsx(x.Suspense,{fallback:a,children:c}):c});function pA(){const e=be(),n=e.routesById[Ae].options.pendingComponent??e.options.defaultPendingComponent,r=n?d.jsx(n,{}):null,s=e.isServer||typeof document<"u"&&e.ssr?$t:x.Suspense,i=d.jsxs(s,{fallback:r,children:[!e.isServer&&d.jsx(cA,{}),d.jsx(mA,{})]});return e.options.InnerWrap?d.jsx(e.options.InnerWrap,{children:i}):i}function mA(){const e=be(),t=he({select:s=>s.matches[0]?.id}),n=he({select:s=>s.loadedAt}),r=t?d.jsx(Ou,{matchId:t}):null;return d.jsx(is.Provider,{value:t,children:e.options.disableGlobalCatchBoundary?r:d.jsx(ho,{getResetKey:()=>n,errorComponent:ss,onCatch:s=>{s.message||s.toString()},children:r})})}const AA=e=>new gA(e);class gA extends Em{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=Re,globalThis.createLazyFileRoute=Ka):typeof window<"u"&&(window.createFileRoute=Re,window.createLazyFileRoute=Ka);function yA({router:e,children:t,...n}){Object.keys(n).length>0&&e.update({...e.options,...n,context:{...e.options.context,...n.context}});const r=Du(),s=d.jsx(r.Provider,{value:e,children:t});return e.options.Wrap?d.jsx(e.options.Wrap,{children:s}):s}function xA({router:e,...t}){return d.jsx(yA,{router:e,...t,children:d.jsx(pA,{})})}const re={"beech.ico":"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAgXklEQVR42u3dCbSdZXkv8O/MmQEDATIwD2UQzMRgQQUWC8K9FXqLioBeoXKdrgphSkGt1LZia0V7r2IVlJZAAqxWtEVBkKqAoIADIhREhgSSMIQkZB5Ozn1e8y1AbhIO4dv7+/a3f7+1nrUPjatn7+d73+f973322adzYGAgU0oppVR7VWcGALQdAQAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAgLYOAB0dHZmqX737c+M6o3Y488pJJ5xz9dRTyq4zvrL3xLg/w1wbpTa7b4elvVKFPZtmR5ohaZa4NvUsrwDUzEkXj50cNTu+XBQ1v29Y77e6h3bNLLs6uzp+Hvdnedy3n0edGdXnasHv92xf1Mej7k17JO2VKuzZNDvSDEmzJM2UNFtcLT8CoJpDpDvqH+PLe6LeFTWqond1YtQlUQ8YKNi3v98DD0R9MWpSRe/mqHym3BP398tRva6cAEB1hkhH3KRn/R9tobu9W9StQgBtvG9TGL413wut4sNp1uQzBwGAimzKP2vB+52eWVzrGQVtePinNX9NVt1X6jbnT6P+t6soAFD+IBkaN5/e1L93dXZn3Z09pVd6w8lmXgn4oCtJmzkjas+N/UPaK1XYs2l2bMZfxuwZ4TIKAJTr2KhtN/WP++98WDZ1j+NKrzeM2n5zj+FUl5E2s8k1n/ZKFfZsmh2bMTpqmssoAFCuP67BY5jqtwJoF7HWe+Lm4Bo8lMNdTQGAco2vyeMY41LSJtJar8Ob6HZwKQUAyjWkJo+jy6WkTfTU5HF4864AAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAA0D5WrlmWLV+9pPRa17/WxYBBSHulCns2zQ4EAFrYw0/dk933xA9LryXLFroYMAhpr1Rhz6bZgQAAAAgAAIAAAAAIAACAAAAACACwSUO0gDbRowUIAPCSnbWANjFBCxAA4CXHawFt4gQtQACAl/z5SReP3U8bqLNY4/vEzRk6gQAAL+mNujEG5Ju0gpoe/gfEzfcy73dBAKAZ+tf1ZwPrs9Krd0hfNmrrka9W40dtM/LeD1++/10fv3Li16bPmvJ3UZ8rsk7/8h7HxCAeZ2XwisN5QlobRa+3tIbTWo41/ZNY27+INb7zq+2DtFeqsGfT7EAAoIU99fi8bM4jc0uvYSOGZtuM2frVa7utO0duM/zgIcN7z+jp6zo36rwiqyNeZYi2PBkD/5GoC6OGWyVte+iPiPpkWgvxn3PS2ih6vaU1nNZyrOlD09oezB5Ie6UKezbNDgQAqKPdo/466oE4AKZoR9sd/lPj5sGov8rXAggA0GZ2ivpBHAgTtaJtDv90rW+NGq8bCADQ3kZFzYqDoVsran/4p2s8O2qEbiAAQDMWWkdn1ts9JOvrGVZqpfuxCXtHvdeVqr3Tovba1Bote32mPbKZNQoCAK3njbu8JZu82zHZpF2PLrVGDN96c3fzZFeq9jZ5jdPaKHt9pj2S9goIANBch2pB7R2iBSAA1MWAFhRmWPrVMG2op7i2IzMfwgMCQI08owWF8kbA+urSgkI9pwUCAOX6rRYAJXhECwQAyvUdLQBK8G0tEAAo0ewZ8x6Om2/pBNBE/x6z50FtEAAo3/SoxdoANMGSqDO1QQCgGq8CPB43xwoBQBMO//8WM+dRrRAAqE4I+GncpM84/zfdABogzZZJMWvu0AoBgAq+EhD1Z/HlntmGl+guzTfttwuu9Cd1F+g4VMKCfE8Wvc//NZ8haZbsmWaLZ/4CANUPAo9EfSnqw/mmPaHgmhbfZlzUiZnPIYCyPBv1zrQX055swD4/MZ8haZb4lT8BAF4MGeuj0jOEQ/NBBDTPwqg3xx68Lu1F7UAAoIwgkF4SnK4T0FTTPStHAKAKrsk2vDsYaLxl+Z4DAYDSXwVYGzc+FASa48HYc6u1AQGAqjCQoDlWaAECAAAgAAAAAgAAIABQpvufuD27+5Hvll5Lly9yMdiotDaqsEbTXgEBgNroX78uW7d+bek1MDDgYrBRaW1UYY2mvQICAAAgAAAAAgAAIAAAAAIAACAAAAAtEgBOunhsZ9R+p395j3dPnzXln8uus66a9H/j/hwWNdbSAajMWTE2zeY0o6twVqQzK51d6QwTAF77xRwd9fn4ckHU/R1ZdnVPX9d7y6+ej8T9uS3qqbh/90adEtVh+wE0/ZzoyGfwvWkmp9mcZnQVzop0ZqWzK51hcf/+IWpbAWBwF/WouHko6uyo7Sq8/iZFzYy6Je7zNrYjQNPOiTRzb8ln8KQK39V0hk1PZ1rc56MFgM1f1MPi5rtRo1toLR4ZdXPc96G2JUDDz4k0a2/OZ2+reEPUDfkZJwBs4qJeFdXbgmtyctRFtiZAw12Uz9xW0xM1q0pPFqv0CsAZUTtt7B+6Oruy4X1blV5De0ds7v5/NC7sGHsToGFPFHdIs3ZT/55mdBXOinRmbcL4qA8JABu5tpv6h+HDtsoO2Pltpdde46Zs7v4PiTreFgVomOPzWbtRaUZX4axIZ9ZmvEsA+P9NqcHinGJ/AjTM1Bo8hslV+fXAStyJaMbW2Yafj7Q6PwIAaJxxNXgMXVU5K3wSYLF8JgBA49Tlt62GCAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAACAAAAACAAAgAAAAAkApVq5alj0072el1+NP32/FAFRUmtFVOCvSmSUAFGTtujXZ88vml15LVjxnhwFUVJrRVTgr0pklAAAAAgAAIAAAAAIAACAAAAC1DwDDXIqW11WTx9HnUtbW0Jo8jh6X0rysUwDY03poeTvX5HHs5lLWVl3mzK4upXlZpwDwTuuhdZ108dg3x82EujwcV7S2TqzJ49gx9tzhLmdLq8SZV3oAiIU8JW7OsB5a9vAfEjdfqtFD+kA8pomubO3W6aS4+WCNHtIX4zENdWVb1ulx/Q5q6wAQDTgmbm7M/EyrVYfqjnFzQ9SUGj2s9B6AG+OxHeUK12adpmt5U83mTAo0N+R7kNaT1uJ34/odXbkAEHeqL73E9N5Ldjnt7GumfrfQmj31e9NnTb7tY//yprmjtx99Y9ToqGxzNWLUiGx9//rSa+2ada009PaLOuHMmROvLPoaTp815Qcfnznx/tHbbzsnrs+Rr3b9UnVU5IdNI7camQ3i/o6JuiXW6Jy0VtOaLXwfqMbWS3MmrdFborZ9teue1kYVpL0ymD0VdUTag7EXf5P2ZNE9TLMjzZA0S1pl7qUZXYWzIp1Zg7h+6ez7fjoLGzVn0hmezvJ0pr9qAEhpMurS+HJh1I+jvtHd0zmt0OrtPLanr/uwoSP6xo/Yalg2mOobPiSb+7unSq/5c+ZX/dDvjkovYf8u/jP95aJv9Q7pPbXoa9jT13XkkGG9+43Yamj3YK9hZZ7eD+vNBnufY41OSGs1rdnC94FqbL00ZyYMes7E2qiKwd7ntAdjL+6b9mTRPUyzI82QNEvSTMlnS3eVZ2Ca0VU4K9KZ9RrmzPhGzZl0hudn+XPpbH/lK0adr3g5/oH852TDvULTci9zbpdf6K9m3skOFGu3fLbcls8aWsuI/Gx/ID/rXwoA+bu4vxO1tT615OGf3gz0/ahDdQNooEOibomZ40lia0pn/HfyMz/rjC/S614zo3r1pmV9OupN2gA0wQFRF2lDy0pnfXp/R296BeD0bBMfLNHV2ZWNGrZt6TVyyDYu2aaf/Y+Om49t6t+7Oruz7s6e0qujo6MS/apKP1T1Kq2NKkh7pQX68dGYPWNM4I1LZ1YVzs50hm9C+pHO/0wB4B2b+l/09Q3L9hv/x6XXXjtOsaI27e1RQzb1j/uMPzibusdxpdfIoaMr0awDdz6iEv1Q1au0NipxeMReqUI/9t/5sFd7Fnm88btx6cyqwtmZzvDNeGcKAD70pLVN1gKgBJO0oKVNTAHA6+utbXstAEpQxo8A1mh7YUb7c8DFer6E7+lTFIEylPEX7RZoe3EEgGL9RgsAGuZ+LRAAqmgg6tvaANAw12uBAFBFV8+eMe8RbQBojJixD6dZqxMCQJXMizpHGwAa7ux85iIAlG5O1NGRTL05BaDxrwKkWXt0PnsRAEqxIuofog6MBfmAdgA0LQSkmXtgPoNX6IgA8HK3R12Sbfi86qLr41H/PWrbWITnRC22jACaHgIWpxmcZnHUn+SzuREzP50ldwgA1ZfeIDI1FsXhUdOjPt2A+seoG6JW2oIApQeBlVH/kc/mRsz8dJakz0U+KD9jBIAKmhv1lrhQ99gSABQcNO6Om8Pzs0YAqJhz4wI9bZkC0KAQ8Ey24bcQBIAKWZb5gAgAGi+dNUsFgOqYE8lstXUJQINfBVgbN7X40Le6BIC1liUATfKCAEDlLVw6L5u/6NHSa83aavzSxDMvzKlEP1T1Kq2NKkh7pQr9eG7JkwZozQkANTd/0WPZ48/+uvRatXZ5Jfrx5MKHKtEPVb1Ka6MK0l6pQj+eet6fNmnrALB+fX+2fPWS0mvFmqWuFAAtIZ1ZVTg70xm+xQFg1eoV2X1P/LD0evCpu6woAFpCOrOqcHamM3yLAwAAUE8CAAAIALSgHi0ASjBECwQAyrW7FgAl2EsLBABKctLFYyfHzd46AZRg15hBh2iDAEDzD/++uPmKTgAl+j8xi/woQACgiYf/+Lj5Xrbh71MDlGVK1I0xkyZohQDQ7gdzZ9TUqFPPvHLi9edcM/XOQmv2lHvOumrSo2PGjXl8zNgxR0Rlr1auMLClp8NgZkzUW2MmPRaz6bE0o4qee2mWxkw9JZ+tJpoAULmDvyfqY/Fl+vDsn0Vd2TOk+/iuns5DCq3ersm9Q3t2HTq8r2voiL5sMNXh8gBbIM2Owc6ZNJNiNu2SZlTRcy/N0rgrM/PZ+mSatWnmukICQBUO/+3i5o6oL0XtqCMADbNjPmvvyGcvAkBph//QuLk5aqpuADRNmrk35zMYAaAUF0YdqA0ATZdm7wXaIACU8ex/q7iZrhMApTkrZvEobRAAmm1alJefAMozPOoYbRAAms1L/wDle5MWCADNNkYLAEq3vRYIAM3WpQUApevWAgEAABAAAAABAAAQAABAAAAABAAo2rrVWbZ21UDpNbDetWDj0tqowhpNewUEAGrjP/9pdXb9RatKryVPSwBsXFobVVijaa+AAAAACAAAgAAAAAgAAIAAAAAIAACAAAAAAgAAIAAAAAIAACAAAAACAAAgAJSlp4Tv2Wf5AJSut4TvOUoAqI6dTrp4bLMP5H3sO4DS7dXMbxZnTXrCuYcAUB0jok5o4gLYP24OtO8ASjc5n8nNks6akQJAtfx9LIIxTTj808tNX7fnACrja/lsbvT8T2fM5+vStDoFgAlRt8UFmtLAi79L3Hw/6hD7DaAyDk2zOZ/RjZr/6Wy5LWqntggA/f392ZpV60qvdavXZjtM2GEwtVfU3WddPfnZc6456OGoB4qpqQ9NnzVlQfz/fjTqrYO5L52dfsEC4HUfUjFLBzn/02x+NGb1/DSzi5v/Bz2czpR0tuRnzKvel3RmVeHsTGf4lgeAdf3Z/DnzS68lzy/J+ob2DLp6h3Rv29XTsWfUPsVU5149fV3bx//vjsHeh6zDxgV43WKWvob53xGzeoc0s4ub/x17pjPltZxB6cyqwtmZzvAtDgAAQE1fXdECABAAAAABAAAQAAAAAQAAEAAAgBYKAIu0AQDaysIUAH6pDwDQVn6RAsB1+gAAbeW6FAAuj3pcLwCgLTwWdUXn7Bnz1sQX74laqycAUGvprD81nf2//y2A+OL2uHl71GK9AYBaSmf82+PM/0n6jxd/DTD+DzfGzb5RX4tark8AUAvL87N93/ysz/4gAOQhYH7UB+LLbaPeGnVy1GkF1xlRn4q63TUBoM2ls/CTUe9vwHl7cn6Wb5vO9nTGv/wbb/SDgOJ/tCrqx1Gzoq4ouC6L+kzU4fGtpkUtdP0BaDPPRx2bzsKov466vAHn7az8LF+1sTtQ6icB5i9FHJd5AyIA7SOdedPiDLypzDtR+kcBRwN+FjeXWQ8AtIlv5mdfqarytwCutR4AaBPXVOFOVCUAPGw9ANAmnhAAXrLCegCgTfQLAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAIAAAAAIAACAAVMHaNeuy1SvXtlRlAxYXwOsWs7TV5n86swSAgqxZvSZbMHdBS9X69ettXIDXKc3SVpv/6cwSAAAAAQAAEAAAAAEAABAAAAABAAAQAACgVa0SAHKzZ8xbHDdrrQkAaq4/6hkB4A/dY10AUHP3xpPeSnxSXJUCwCzrAoCam12VO1KlAHBZ1BxrA4Camhv1VQHglZFoxryVcXNK1BprBICaSe9zOzk/6wSAjYSA2+NmWtRCawWAmkhn2rT8jKuMyv0aYDTo1rjZO+oLUc9aNwC0qGfzs+yP4mz7QdXuXCU/ByAatTDq7Phyh6j9o46N+tMS6+Soz2Ybfn4DQDXNzWf1ySWfGdPys2vHdJZFPVfFZlX6g4DSr0pE/SbqpqjrS6xZURfEXdor6iv2GEDlpNm8V5rV+cwu88y4MT+7+qvcMJ8E+NoCyaqoj2QV+jUOALKr02xOM1orBIBGmx61ThsASpdm8dnaIAA065WA+XFzp04AlO6OmMkLtEEAaCYfWgRQPm/OFgCazo8AAMrXrwUCAAAgAFAlh72vNzvuvCGl16gxljwbl9ZGFdZo2isgAFAbQ0d1ZMO3Kb86u1wLNjEMY21UYY2mvQICAAAgAAAAAgAAIAAAAAIAACAAAAACAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAAAgAFGbJ80uzZUtWlF7ZgGvxcqtXrKnEdVHVq7Q2eJmYHVW4LmmWIgC0lBcWvZAtfHph6TUgAPyBpUuWVuK6qOpVWhu87PyP2VGF65JmKQIAACAAAAACAAAgAAAAAgAAIAAAgADAllmtBQClW6kFAkCzzdcCgNI9pQUCQLPdrgUApbtDCwSAZvtR1FxtAChNmsG3aYMA0FSzZ8xbGzcX6ARAaS6IWbxOGwSAMkLAzLi5QicAmu6KfAYjAJTm/VGfz/zdPYBmGMhn7vu1QgAo+1WA/qhz48sDo1IaXawrAIVbnM/YA9PMTbNXSwSAqgSBX0e9J74cHbVjHggmFlyHRn0o6uc63nDL8mcZxzTgOqrmVLp2f59fSxrrV1EfjnpzA67jgflMHZ1mbJq12i0AVDUIrI9aEHVf1C8LrruivhrfZmrUZ3S7ocNsn/xZxvcbcB1Vcypdu/PStYy6z7JumL+NmhS9vjTqzgZcx/vymbpeqwUAIWNDyPhU5g2IjfB81LTo75NaUZv9kq7ltKhFulG4q6K/FzqcBQCa78IoG69Yl8Qw8ymP9QsB8+LmizpRqPRmvPO1QQCgvKF2r04U6t+1oLZu0IJC/SpmkI/hFQAokWerxTLQ6ssnd9orCAC14vMHiuVTxeprjRbYKwgAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIABQhIVPL8wWPbO49PIHC2Bw0l6pwp5NswMBgBa2fOmK7IXFS0uvbL1rAYMSe6UKezbNDgQAAEAAAAAEAABAAAAABAAAQAAAAAQAirBSC4ASrNYCAYByzdUCoATztUAAoFw/1gKgBD/UAgGAct0siQNNtiDqJm0QACjR7Bnz0s/hLtQJoIk+GbPH+48EgPKddPHYkVHviPrUmTMn/vTc6w6aU3Z96LL9vhP35/yot0Z1NTgEfDNurrCcgSb4l6jLGzzTu6LelmZomqVVmOnpbIn784moE9OZIwBU4+D/XHz5TNS1URd1dXcf1NnVMaH86vyTuD8XZxt+TvZ43M/3RXU0sB1/HvW3Uf3mE9AA/flMOz2edDTkD3ymGRl1Wnz5RNR/pu+XZmkVZno6W+L+fCbqunTmxP38bNQIAaCcw3983NwTdV7UkIrf3XRf07P0a+N+9zboVYD1UelHAftFfS3b8DM6gNcrzZKvR+0fM+YvohryJCOfjemJ3DeixlW8J+nMmRF1d34WCQBNPPxT6kpvfturxe76iVGXNvIbxOZ8KOoDUTvGf6Y+7dqAemPU+9LiNxuhVPfke/GNDdrrw9MsifpfUf/V4MdyaT4jW8kfRd0UZ9JwAaB5ZuSNb0Wnx2I5ohnfKDbs8qjHG1D3R/1zfIuDo/7KDIZS/E3UQWkv5nuyEXt9RZOe1L0lzcYWvQ77Rp0vADRnoQyNm7NafOPW4l376eeAUX8ZX840i6G52y/23ica9bN4M/E1Oys/mwSABjs6aliLL5b0mwFb1WgY+TVEaK4L6vJA8nfUH9niDyP9uPWIVrvTrRgA9qnBmu+O2rM2T0VmzJsTNw+aydAUv40991iNHs/u+UxsdfsKAI03piaLfvuaDaVnzGVoirp98ufWZroAMFhdNVksPeYYsAUGtMBMb9cAAAAIAACAAAAACAAAgAAAAAgAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACQEvprdnj6XNJoSmG1ezxbO2SCgDtZr+6PJCTLh7bEzf7uKTQFPvEnqtT4D7AJRUA2s37arSJ3xW1lUsKTTEi33N1ePKQXgk9zSUVANrNTlGXxAboaPENvFvcfMHlhKb6Quy9PVp8dnTks2MXl1MAaEcfiro2NsKEFty8nVEnxpd3Rm3nUkJTjY76SezBd6S92ILzIz0BujbqIy6lAFCYFxa9kC1bsqL0GjK0L5uw+7jB1IlRT5x73UErz7vu4KWtUOded/CyCbuPXx33+7qoMYN5nKtXrq7EdVm9ao1dz0altVGJNRp7Zdwu4wZT20VdO37XcavOvW7q4pghi1qhzrl26rK4309EnTiYx9nb11uJ65LOFgGg4pYuWZotfHph6dXZ1RHVOdjqiP/9kI6ubEQrVGdXNjzub/dreHzZyuUrK3Fd1q1d56Rjo9LaqMIaTXulu7dz0NXV09kTe2yr2JNbt0J1dXcOfy2Pr7unsxLXJZ0tAgAAIAAAAAIAACAAAAACAAAgAAAAAsBgrXTZaKC1WlBb/VpAAy0TABrvKeuMBlk+e8a85dpQT3Ftl3oCgbOptQPAXdYZDXKnFtSe+YG11cIB4N6oh601GuAqLai9q7WABviveIXpFwJAg0WTB+LmAuuNgj0YNVMbau8KTyBogL9oxTvdkr8FECHgX+PmMmuOgqS/8vHuWFf+UEDN5df4pKilukFB/inW1fUCQHN9MOoSa4/XaU7UUbGBf6UVbRMC0ku1R0U9qRu8Tp/PWvhPGne28Cbuj5oeX06N+lbUKmuR1+B3UZ+I2jfW0T3a0XYh4O642SfqU/lagMFalZ85U2IdnZvOIgGgvI18T9T/iC9Hp2Ee9baoIwqu46JmZBt+Tkxjpc2U3qh1av4srehreWjU+Fgze0T9jV/7a+sQsCzqM2ktxH/ulK+NotfbUflanpn5HIJmeDCf1cc14Fq+LT9j3pDOnKh7W71ZnTXazCuiHoz6UdQPC67vRX0uvs0BUZ+1xxrmyTxVnxJ1VdStDbiWd0X5LAleOT/m5muj6PV2a76W3xPfZlLUE7rdMGk2H5BmdT6zi76WP8rPmNp8loSPAn5tQ2JdVPoNhG/oRuHWRB0b/f2lVlDT+XFf3EzL/LiyES5Ls9kbeQWAZjg/P7AozuWxeX+jDdQ8BKSXqL+uE4U/eZihDQJAszbxc3HzE50o1Le1gDZxvRYU6vaYyQu1QQBoJr9CVCw/G6VdzNWCQnlPjwDQdN7RWyw/F6Vd+IuTxVqvBQIAACAAAAACAAAgAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACADt4/mnl2RLnluq8lq53Ef9w2CsWrE6W7ZoucprccwPBICWsnzZsmzx84tVXmvX+vsnMBhr1qzJFj77vMpr6ZIXLAoBAAAQAAAAAQAAEAAAAAEAABAAAEAAYAut1oJC9WsBbcLvxBZrpRYIAM02XwsK9YwW0EZrfUAbCvOUFggAzXabFhTm7tkz5nlFhbYQaz29AvBTnSjMHVogADTbj6PmakMhZmoB1jxbYI4nYwJAWSn+Ap143R6N+qo20Ga+HvVbbXjdLohZvE4bBIAyQkBK8d/UiS2WPuT7ndHHNVpBm82OtObfle8Btsw3o49XaYMAUKYzov4u86aeLXnmf2Rs4Hu1gjYNAb9IeyDfCwzeQD5zz9AKAaDsTdwfdX58eUDUlVGLdGWz0tA7K2pfhz/mx+/3wL5RZ0b9XEc2a1E+Yw9MMzfNXi0RAKqyke+Pem98OTpqx7RIoyaqF2vvqOHRo0lRX/Suf3hxdqyO+lLU5LRH8r1iZrxUaZbukGZrmrFRv7ZqCgoAAwMDmSquZp3/1EDUgqj7on6pXqyHo1ZYI0ptdn6syPeKmfFSpVn6dJqt1kix5RUAAPAjAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAAAQAAaCv/D651goW1Yu0cAAAAAElFTkSuQmCC","discor.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABvUExURVdl8v///1Zl8lZk8VZk8e7w/fj4/ldk8lZk8VZk8lZk8VZl8ldk8lZk8VZk8aSr+LrA+WJu8rG3+GZy84SO9a20+MXK+ldk8pOc9ldk8d7h/HaB9Gt38+Tm/Fdl8Vdl8lZl8VUA9gBl/0dwTEdwTCQujVkAAAAldFJOU///J+z7///2zdQQCo6cXP//////////Mv+e/////56envv/AAADM8XgAAABK0lEQVQ4y4VT2baDIAwMKIoriktdansf+v/feMFE0VoP86BhHIHJAp8daVnIIAwDWZSpY2EL+CuGHfGbfwmyPIQTwjw7CngCFyTcCR4B/EDw2AT853ej4CjIErhBkq2CHG6RWwF3969r90Qv3AhGWjRqYn07DG3PJtUQ+feBlPLTCHaAIEWcQknaip1QEV1CgcEzOguiJ/IFSAw0+4JGXgIlab2BWLeJMKZkAZqc8ad6YWypcbsZjZJgsJQ5tmOsMxeyq4EEeERnqRagZ6wHaO2qoyOkMynU+qqUcEYl2azYBRXZLPcjop5ygUFHiaJUK8Mtc6u0Vu1svERqS/VWrEaLaSviJDTV4nUq917m5lRub8P4W87btP629w+Of/TsJuNxeEd+me678f8HQVYjIhOHP3oAAAAASUVORK5CYII=","gf.png":"data:image/png;base64,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","glas.ico":"data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAYqMdAAC8/wBanhIAAbT0AGSkIQBfoRkAWZ4RAP///wAJt/QAZKQgAF+hGAATuvUAFLr1AFyfFQAVuvUAY6QfAGGiHABbnxQAZqUjAAa29AAHtvQACLb0AGGiGwAQufUAErn1AFufEwBlpSIAYKIaAF2gFwBeoBcA9/f3AAK19AADtfQABLX0AAW19AAMuPUAYqMeAA249QAOuPUAXaAWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAICCSMjFhUVIyMjIyMgAgICIyMjIyMjIyMjIyMjIwQCAiQGBwgICAgICAgIBwMgAiYCFwcICAgICAgICAcaIQInAhEHBwgfHx8fCAcHEiECAgIBBwcHBwcHBwcHBxIiAgIYJSUBBwcICAcHBygOIwICGRAQBwcICAgIBwcHDiMCAgwKChAlCB8fCAYeHSgUAgINGwUKEAcICAcGCx4oFAICDxMbBwcHBwcHHAseHRQCAiMjIyMjIyMjIyMjIyMUAgIjIyMjIyMjIyMjIyMjIwIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8AAP//AAA=","redit.ico":"data:image/x-icon;base64,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","roblo.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAC80lEQVR4AdSYgXkUIRCFTyvQDrQDrSBagVqB2oFWYKxAO9AOjBVoKjAdaAemg+T9m3DfHAs7ENhbko/JciwM72dm2eMe7u75Xy3AL/Geyl7Ihig1AIjGPkk5IFe31w+6PpNtUmoAXiUUAvRF7X9k/2U/ZEcFqgFArPRlyyPdeS1LAT1R+yqlFABxtWnCmAD0V+qxb7q+k3UDKgXwVl+a3IJoxAMBDEadNmBdB6kOpQAnqcGNbRaI54fniPQjasVApQA9IuDxkqJsAGwExUAlAKwGzj0Bve8zpwVi6569g0oAjrH6JfDoiN9BpyUAa+R/iWCvD0AnJQA8VJ6zre6fewDsFNhWAr15zzwAwuQ52er+pSa+8ABGzX9p3/3e6c8DGDkC59K/WwIg9zH6jWhuBEZe/Sn/WdWlCAyf/x5AawSea4L3su+yf7KeZcp/HOYiwPeQKP/pXmwIvlBvxAPxVHWMOm362FSm/MdDDqB19c9wHhlQiP8ctdd+xA+LM43LAbTm/z7E0yyH/1oXZ7/6uM0BdJ2EiYx1XZwUAPnPGcDMWVUlvGxzuUFdFycF0HWCiIKNAYuaiz+S/9h+QAqgNcScouyB3QruvjgpgNZJWB1E82sDvzoAEw7sb7nZYLPNIQZAfEv+57TxXBEZ/Of6lLQf7EAMSAHQPqKxORzkPyJjgNb8x+daNlt9JooBWkOMz7Vslv9MZAFGFo9WNwIjA5D/yZejjcC9y3/CYgFGjkAy/y3AyOLRmcx/boQI0OGlGviuTl3VYUo2/1EYAKgjnF9/AXmghjeyrzIc6LJZ+bk0swWI+3Gq+qhGzraPdd0KiIXV9OmyBGBHsIWlgDgizl7vdmCHeheAWEcA4pDOYR2jfgMU977750XxuC2NAH2XjCggHghgMOq0Abs0duledvsMg3oBBH/haoF4fniOeJ5Iwxqgo0UgCM9d2cnY0dgIYqDcGNqHAUCMNQvEls3WHb+DXPE4XCuF8F1jiLXvoADk+rgGAAD///XR0HIAAAAGSURBVAMAy6KF4VwrNYcAAAAASUVORK5CYII=","tt.ico":"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAC4jAAAuIwF4pT92AAAC/ElEQVR42u3XWUhUcRTH8TtzZ5xRJ1PH0Wm1KHOYLNuhxSiEFiorWiiKigkLood6MCyShHYMWoweoh7aC2kTo9JcSK1UCk2iHhRMxtw1SZt07r3fRNQc6Elnxhd/cN7uhc//4Zz/+QvdUbqL4aoRwAhgSABx1CjM+w4w5WgSUxOPEzJzFmqvAkLDWJ6Zy9sOB2VdTvKv3iJGF+xdwKrXObTKMgBU1XJ+dqz3Ac2STF8q014QZTQPHwAFXj15xpTZcxC0Wm8CXFNqr+Hg/UdY1m3AR1B5B6A4OkFR6IsEVN55js0wcegAlU6Pz9QI/BbH4DtvAYJGRG0KdQE43xTx/fIt2hua6M+jTJIDI4cAUKsxLFnK5MvXWJ1fxLGKKlILiomfFI2fyewCkB9nc9E0gx3zY3ifdIG2hy9xJqaSHDRIgEqjwbjbxpLCEm40NFPX5exvt8LodQSHjmXlAIDyNJezwdaef42CyDK9EVtAOAv1QYMDjF4Tx9LiUrJ//sIllXYKZq79L+Cc0eqeOaAJCSHywWPuNrYAgCQj5ZbgSLxC7fYjPJmwiMAwDwIMy2PZWv6NFqcEgPN5HlXW9ST4TyJaNDBOrUPb0wUeAhht8aTU1APAny7adx3nkH84rm0Y6jmAaf8B7je1AkD7b6rjDhIl+rsCzGNYlZX3D5CWxblgNwECN27mbn1T/3itOXYJq8rX5Ru/hYvZ9KmcNkkCQEp9SHJAhHsA2mkWTn7+Ql+kqhoOr9+KoNcjaH3QWayE37hNir0OBaCziw7bCfb4jnMPQBBFYs+cp2XAaG1obSUpPYNlN2+zIreQU9U/aOydDXJBKRXWOKxag/uuY/2EiVzPyWNgFKBRVqh3SkgAgGyvx7ElgbOBFtSCyr37wPhICxnpGdDbjq4aBfnjVxzbEkkzzcUs6jyzE5pHB5GyMx77vXSkd2Xwobyn5RwJF6mYtann5GGizrNLqbq7onwCiDdFcHpsNKeMVvb6jWe6xoBaUI28C0YAQwMMZ/0FmrrK3uRP9CwAAAAASUVORK5CYII=","twit.ico":"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB7ElEQVR4Ae1XMZLCMAwUdw0ldJQ8ATpKnkBJByUd8ALyA/gBdJTQUtHS8QT4AaRM5ctmThmfogQ75CYNmhGTbGJr45Vk0yAiQzXaF9VsHwIZAofDgYwxqo9GI/K16/X6cqyxvdVqmdvtZh6PhwmCIHXcw7vdrpFj8ny9XhsYxhe8lwWHw2EycLFYpNh0Ok2w8/nsFHy1WrkE1wnAN5tNMkGv10ux3W6XIab5fD5P3ovldCGrP2Ap4LiW8uRJAcIwe1wpArYU0FJimhQgxaQ9cqX4BZYCgSVmS8HBfRP1JQEsY1xKGSmAcTC+l0QrIWDraicVMBBA4O1265ScpQnAMbkMwphjub1HAI7EkxoDK7n0/gQQGATsCmDMo+z++Hf8E5CjPZ9PiqKIZrMZhWFIl8slxcbjMTWbTTqdTuRrXoz5i2WXRIL+WxWw2+Uml13rnJUT4K9E9nMFaF3SxiojoO1u2rJzl4z3/+oIcHBMLiUp2rDe3ozg+BIYtNee87KjGzLGndPx7JD/0K7xog2Gl30ymaSY1jm9CPhsrXnnBK1zOhHgCWWtF7l2TtA6p3S1E+73exoMBrRcLul4PJKL3e93arfbSUeMA1O/36eYPHU6nWQu7pyaqRlfZnezV05anhSN34va7PPXrHYCP+VaTG3LBV1KAAAAAElFTkSuQmCC","yt.png":"data:image/png;base64,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"},Nn={panicKey:"Escape",panicUrl:"https://classroom.google.com",autoCloakEnabled:!1,cloakTitle:"Classes",cloakFavicon:re["glas.ico"],aboutBlankCloakerEnabled:!1,cloakType:"blob",searchBarPinned:!1,region:"chicago",antiCloseEnabled:!0,proxyType:"ultraviolet"},Vu=x.createContext(null);function bA({children:e}){const[t,n]=x.useState(()=>{const i=localStorage.getItem("fern-settings");if(i)try{return{...Nn,...JSON.parse(i)}}catch(o){return console.error("Failed to parse settings:",o),Nn}return Nn}),[r,s]=x.useState(!1);return x.useEffect(()=>{localStorage.setItem("fern-settings",JSON.stringify(t))},[t]),d.jsx(Vu.Provider,{value:{settings:t,setSettings:n,isRecordingKey:r,setIsRecordingKey:s},children:e})}function Hn(){const e=x.useContext(Vu);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wA=q("arrow-right",vA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Ur=q("bookmark",SA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],CA=q("check",kA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],NA=q("chevron-down",PA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],EA=q("chevron-up",RA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jA=q("circle-alert",IA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],TA=q("circle-check",MA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],go=q("clock",BA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],LA=q("download",DA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],FA=q("external-link",OA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],$A=q("film",VA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],KA=q("folder",UA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],qA=q("gamepad-2",zA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],WA=q("house",HA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qa=q("loader-circle",QA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],JA=q("message-circle",GA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],XA=q("pen",_A);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],YA=q("pin-off",ZA);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],tg=q("pin",eg);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],rg=q("save",ng);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ig=q("settings",sg);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ag=q("shield",og);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ha=q("star",cg);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hi=q("trash-2",lg);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dg=q("upload",ug);function hg(){const{settings:e,isRecordingKey:t}=Hn(),[n]=x.useState(document.title),[r]=x.useState(()=>document.querySelector("link[rel*='icon']")?.href||"/vite.svg");return x.useEffect(()=>{const s=i=>{t||i.key===e.panicKey&&(window.location.href=e.panicUrl)};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e.panicKey,e.panicUrl,t]),x.useEffect(()=>{if(!e.autoCloakEnabled)return;const s=()=>{const i=document.querySelector("link[rel*='icon']");document.hidden?(document.title=e.cloakTitle,i&&(i.href=e.cloakFavicon)):(document.title=n,i&&(i.href=r))};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s),document.title=n;const i=document.querySelector("link[rel*='icon']");i&&(i.href=r)}},[e.autoCloakEnabled,e.cloakTitle,e.cloakFavicon,n,r]),x.useEffect(()=>{if(!e.aboutBlankCloakerEnabled||window.self!==window.top||window.location.href==="about:blank"||window.location.href.startsWith("blob:")||sessionStorage.getItem("fern-cloak-triggered"))return;sessionStorage.setItem("fern-cloak-triggered","true");const i="/",a=window.location.hostname==="s3.amazonaws.com"?window.location.origin+i+"index.html":window.location.origin+i;if(e.cloakType==="about:blank"){const c=window.open("about:blank","_blank");if(!c){alert("Please allow popups for this site to use about:blank cloaking"),sessionStorage.removeItem("fern-cloak-triggered");return}const l=c.document.createElement("iframe");l.style.cssText="position:fixed;top:0;left:0;bottom:0;right:0;width:100%;height:100%;border:none;margin:0;padding:0;overflow:hidden;",l.src=a,c.document.body.style.cssText="margin:0;padding:0;",c.document.body.appendChild(l),document.documentElement.className="dark",document.body.innerHTML=`
				<style>
					@import url("https://fonts.googleapis.com/css2?family=Euphoria+Script&display=swap");
					* {
						margin: 0;
						padding: 0;
						box-sizing: border-box;
					}
					body {
						background: oklch(0.1776 0 0);
						color: oklch(0.9491 0 0);
						font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
						display: flex;
						align-items: center;
						justify-content: center;
						min-height: 100vh;
					}
					.container {
						text-align: center;
						max-width: 600px;
						padding: 2rem;
					}
					h1 {
						font-family: "Euphoria Script", cursive;
						font-size: 3.75rem;
						font-weight: 700;
						margin-bottom: 2rem;
						color: oklch(0.9491 0 0);
					}
					p {
						color: oklch(0.7699 0 0);
						font-size: 1.125rem;
						line-height: 1.6;
					}
				</style>
				<div class="container">
					<h1>fern</h1>
					<p>Your session is now running in the about:blank tab. You can safely close this tab.</p>
				</div>
			`}else{const c=`
				<!DOCTYPE html>
				<html>
				<head>
					<title>Fern</title>
					<style>
						body, html {
							margin: 0;
							padding: 0;
							height: 100%;
							overflow: hidden;
						}
						iframe {
							width: 100%;
							height: 100%;
							border: none;
							position: absolute;
							top: 0;
							left: 0;
						}
					</style>
				</head>
				<body>
					<iframe src="${a}" allowfullscreen></iframe>
				</body>
				</html>
			`,l=new Blob([c],{type:"text/html"}),u=URL.createObjectURL(l);window.location.replace(u)}},[e.aboutBlankCloakerEnabled,e.cloakType]),x.useEffect(()=>{if(!e.antiCloseEnabled)return;const s=i=>{i.preventDefault(),i.returnValue=!0};return window.addEventListener("beforeunload",s),()=>window.removeEventListener("beforeunload",s)},[e.antiCloseEnabled]),null}const fg=()=>{const e=he(),t=Ke(),n=e.location.pathname==="/search",r=e.location.pathname==="/x7k9m2p",s=e.location.pathname.startsWith("/scrammy"),i=()=>{const c={query:btoa("https://classroom.google.com/u/0/h"),target:btoa("https://fern.best/resources/tuff.html")};t({to:"/search",search:c})};return d.jsxs(bA,{children:[d.jsx(hg,{}),d.jsx(Fu,{}),!n&&!r&&!s&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:i,className:"fixed bottom-4 left-1/2 -translate-x-1/2 cursor-pointer","aria-label":"Play game",children:d.jsx("img",{src:"/fc/cpvp.png",alt:"Advertisement",className:"w-64 md:w-80 h-auto rounded-lg shadow-2xl hover:scale-105 transition-transform"})}),d.jsxs("footer",{className:"fixed bottom-4 right-4 flex gap-3 text-xs text-muted-foreground items-center",children:[d.jsxs("a",{href:"https://discord.gg/TV2tWzSU7x",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors flex items-center gap-1","aria-label":"Join our Discord",children:[d.jsx(JA,{className:"w-4 h-4"}),"Discord"]}),d.jsx("span",{children:""}),d.jsx(ge,{to:"/settings",className:"hover:text-primary transition-colors",children:"Settings"}),d.jsx("span",{children:""}),d.jsx(ge,{to:"/terms",className:"hover:text-primary transition-colors",children:"Terms"}),d.jsx("span",{children:""}),d.jsx(ge,{to:"/privacy",className:"hover:text-primary transition-colors",children:"Privacy"}),d.jsx("span",{children:""}),d.jsx(ge,{to:"/credits",className:"hover:text-primary transition-colors",children:"Credits"})]})]})]})},je=aA({component:fg}),pg=Re("/x7k9m2p")({component:mg});function mg(){const[e,t]=x.useState([]),[n,r]=x.useState(!0),[s,i]=x.useState(null),[o,a]=x.useState(null),[c,l]=x.useState(""),[u,h]=x.useState(null);x.useEffect(()=>{const b=`${window.location.origin}/g.json`;console.log("Fetching games from:",b),fetch(b).then(v=>{if(console.log("Response status:",v.status,v.statusText),!v.ok)throw new Error(`Failed to load games: ${v.status} ${v.statusText}`);return v.json()}).then(v=>{console.log("Loaded games:",v.length),t(v),r(!1)}).catch(v=>{console.error("Error loading games:",v),i(v.message),r(!1)})},[]);const f=x.useMemo(()=>{const b=new Set;return e.forEach(v=>{v.tags?.forEach(k=>b.add(k))}),Array.from(b).sort()},[e]),p=x.useMemo(()=>e.filter(b=>{const v=b.name.toLowerCase().includes(c.toLowerCase()),k=!u||b.tags?.includes(u);return v&&k}),[e,c,u]),m=b=>{a(b)},y=()=>{a(null)},A=b=>`${window.location.origin}/resources/${b.directory}/index.html`,g=b=>`/resources/${b.directory}/${b.image}`;return n?d.jsx("div",{className:"h-screen w-screen flex items-center justify-center",children:d.jsx("div",{className:"text-muted-foreground",children:"Loading games..."})}):s?d.jsx("div",{className:"h-screen w-screen flex items-center justify-center",children:d.jsxs("div",{className:"text-destructive",children:["Error: ",s]})}):o?d.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background",children:[d.jsxs("div",{className:"border-b bg-card px-4 py-3 flex items-center gap-4",children:[d.jsxs("button",{onClick:y,className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[d.jsx(xu,{className:"w-4 h-4"}),"Back to games"]}),d.jsx("div",{className:"flex-1"}),d.jsx("div",{className:"text-sm font-medium",children:o.name})]}),d.jsx("div",{className:"flex-1 relative",children:d.jsx("iframe",{src:A(o),className:"absolute inset-0 w-full h-full border-0",title:o.name,allow:"fullscreen; autoplay; encrypted-media; gamepad; microphone; camera",allowFullScreen:!0})})]}):d.jsxs("div",{className:"min-h-screen bg-background p-6 overflow-x-hidden",children:[d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-4xl font-bold font-display mb-2",children:"games"}),d.jsxs("p",{className:"text-muted-foreground",children:["Browse and play ",e.length," games"]})]}),d.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(oo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),d.jsx("input",{type:"text",placeholder:"Search games...",value:c,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-10 py-2 rounded-md border bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),c&&d.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d.jsx(ao,{className:"w-4 h-4"})})]}),f.length>0&&d.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[d.jsx("span",{className:"text-xs text-muted-foreground",children:"Filter:"}),d.jsx("button",{onClick:()=>h(null),className:se("px-3 py-1 rounded-full text-xs border transition-colors",u?"bg-background hover:bg-accent border-border":"bg-primary text-primary-foreground border-primary"),children:"All"}),f.map(b=>d.jsx("button",{onClick:()=>h(b),className:se("px-3 py-1 rounded-full text-xs border transition-colors",u===b?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border"),children:b},b))]})]}),p.length===0?d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-muted-foreground",children:"No games found"})}):d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:p.map(b=>d.jsxs("button",{onClick:()=>m(b),className:"group relative aspect-square rounded-md border bg-card hover:bg-accent transition-all overflow-hidden",children:[d.jsxs("div",{className:"absolute inset-0 bg-muted flex items-center justify-center",children:[d.jsx("img",{src:g(b),alt:b.name,className:"w-full h-full object-cover",loading:"lazy",onError:v=>{const k=v.target;k.style.display="none";const P=k.nextElementSibling;P&&(P.style.display="flex")}}),d.jsx("div",{className:"absolute inset-0 items-center justify-center hidden",children:d.jsx("span",{className:"text-4xl font-bold text-muted-foreground",children:b.name[0]?.toUpperCase()||"?"})})]}),d.jsx("div",{className:"absolute inset-0 bg-background/80 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-3",children:d.jsxs("div",{className:"w-full",children:[d.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:b.name}),b.tags&&b.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:b.tags.slice(0,2).map(v=>d.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-primary/20 text-primary",children:v},v))})]})})]},b.directory))}),d.jsxs("div",{className:"mt-6 mb-24 text-center text-sm text-muted-foreground",children:["Showing ",p.length," of ",e.length," games"]})]}),d.jsxs("div",{className:"fixed bottom-4 right-4 text-base text-muted-foreground z-10",children:["brought to you by ",d.jsx("span",{className:"font-display text-xl text-primary",children:"fern"})]})]})}const Ag=Re("/terms")({component:gg});function gg(){return d.jsx("div",{className:"min-h-screen w-screen flex items-start justify-center p-8",children:d.jsxs("div",{className:"max-w-3xl w-full space-y-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(ge,{to:"/",className:"text-primary hover:underline text-sm",children:" Back to fern"}),d.jsx("h1",{className:"text-5xl font-bold font-display",children:"terms of service"}),d.jsxs("p",{className:"text-muted-foreground text-sm",children:["Last updated: ",new Date().toLocaleDateString()]})]}),d.jsxs("div",{className:"space-y-6 text-foreground",children:[d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Acceptance of Terms"}),d.jsx("p",{className:"text-muted-foreground",children:"By accessing and using fern, you agree to these terms. If you don't agree, please don't use the service."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Acceptable Use"}),d.jsx("p",{className:"text-muted-foreground",children:"You may not use fern for any illegal purposes or activities. This includes but is not limited to: distributing malware, engaging in fraud, violating intellectual property rights, or any activity prohibited by applicable law."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Age Requirements"}),d.jsx("p",{className:"text-muted-foreground",children:"We do not purposefully collect data from users under 13 years of age. If you are under 13, please do not use this service."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Service Availability"}),d.jsx("p",{className:"text-muted-foreground",children:'We provide fern "as is" without warranties. The service may be modified, suspended, or discontinued at any time.'})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Liability"}),d.jsx("p",{className:"text-muted-foreground",children:"We are not liable for any damages arising from your use of fern. Use at your own risk."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Changes to Terms"}),d.jsx("p",{className:"text-muted-foreground",children:"We may update these terms at any time. Continued use constitutes acceptance of updated terms."})]})]})]})})}const fi=(e,t)=>t.some(n=>e instanceof n);let Wa,Qa;function yg(){return Wa||(Wa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xg(){return Qa||(Qa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pi=new WeakMap,Ts=new WeakMap,os=new WeakMap;function bg(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(Et(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return os.set(t,e),t}function vg(e){if(pi.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});pi.set(e,t)}let mi={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return pi.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Et(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $u(e){mi=e(mi)}function wg(e){return xg().includes(e)?function(...t){return e.apply(Ai(this),t),Et(this.request)}:function(...t){return Et(e.apply(Ai(this),t))}}function Sg(e){return typeof e=="function"?wg(e):(e instanceof IDBTransaction&&vg(e),fi(e,yg())?new Proxy(e,mi):e)}function Et(e){if(e instanceof IDBRequest)return bg(e);if(Ts.has(e))return Ts.get(e);const t=Sg(e);return t!==e&&(Ts.set(e,t),os.set(t,e)),t}const Ai=e=>os.get(e);function kg(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=Et(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Et(o.result),c.oldVersion,c.newVersion,Et(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Cg=["get","getKey","getAll","getAllKeys","count"],Pg=["put","add","delete","clear"],Bs=new Map;function Ga(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Bs.get(t))return Bs.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Pg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Cg.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return Bs.set(t,i),i}$u(e=>({...e,get:(t,n,r)=>Ga(t,n)||e.get(t,n,r),has:(t,n)=>!!Ga(t,n)||e.has(t,n)}));const Ng=["continue","continuePrimaryKey","advance"],Ja={},gi=new WeakMap,Uu=new WeakMap,Rg={get(e,t){if(!Ng.includes(t))return e[t];let n=Ja[t];return n||(n=Ja[t]=function(...r){gi.set(this,Uu.get(this)[t](...r))}),n}};async function*Eg(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Rg);for(Uu.set(n,t),os.set(n,Ai(t));t;)yield n,t=await(gi.get(n)||t.continue()),gi.delete(n)}function _a(e,t){return t===Symbol.asyncIterator&&fi(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&fi(e,[IDBIndex,IDBObjectStore])}$u(e=>({...e,get(t,n,r){return _a(t,n)?Eg:e.get(t,n,r)},has(t,n){return _a(t,n)||e.has(t,n)}}));const Ig="fern-data",jg=1;let Ar=null;async function Me(){return Ar||(Ar=await kg(Ig,jg,{upgrade(e){const t=e.createObjectStore("history",{keyPath:"id",autoIncrement:!0});t.createIndex("by-date","visitedAt"),t.createIndex("by-url","url");const n=e.createObjectStore("bookmarks",{keyPath:"id",autoIncrement:!0});n.createIndex("by-folder","folder"),n.createIndex("by-date","createdAt")}}),Ar)}async function Mg(e){return(await Me()).add("history",e)}async function Tg(e=100){return(await(await Me()).transaction("history","readonly").store.index("by-date").getAll(null,e)).reverse()}async function Bg(e){const n=await(await Me()).getAll("history"),r=e.toLowerCase();return n.filter(s=>s.url.toLowerCase().includes(r)||s.title.toLowerCase().includes(r)).sort((s,i)=>i.visitedAt-s.visitedAt).slice(0,100)}async function Dg(e){await(await Me()).delete("history",e)}async function Lg(){await(await Me()).clear("history")}async function Og(e){return(await Me()).add("bookmarks",e)}async function Ku(){return(await Me()).getAll("bookmarks")}async function Fg(e,t){const n=await Me(),r=await n.get("bookmarks",e);if(!r)throw new Error("Bookmark not found");await n.put("bookmarks",{...r,...t})}async function Vg(e){await(await Me()).delete("bookmarks",e)}async function $g(e){const t=await Ku(),n=e.toLowerCase();return t.filter(r=>r.url.toLowerCase().includes(n)||r.title.toLowerCase().includes(n)||r.notes?.toLowerCase().includes(n))}function Ug(e){const t={};for(const[n,r]of Object.entries(e))t[n]={config:{keyPath:null,autoIncrement:!1,indexes:[]},data:r};return t}async function Kg(){const e={version:"1.0.0",exportedAt:Date.now(),history:[],bookmarks:[],localStorage:{},sessionStorage:{},cookies:"",indexedDBDatabases:[]};try{const t=await Me();e.history=await t.getAll("history"),e.bookmarks=await t.getAll("bookmarks");for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);s&&(e.localStorage[s]=localStorage.getItem(s)||"")}for(let r=0;r<sessionStorage.length;r++){const s=sessionStorage.key(r);s&&(e.sessionStorage[s]=sessionStorage.getItem(s)||"")}e.cookies=document.cookie;const n=await indexedDB.databases();for(const r of n)if(r.name)try{const s=await zg(r.name);s&&e.indexedDBDatabases.push(s)}catch(s){console.error(`Failed to export database ${r.name}:`,s)}}catch(t){throw console.error("Error exporting data:",t),t}return e}async function zg(e){return new Promise((t,n)=>{const r=indexedDB.open(e);r.onerror=()=>n(r.error),r.onsuccess=async()=>{const s=r.result,i=s.version,o=Array.from(s.objectStoreNames),a={};try{for(const c of o){const u=s.transaction(c,"readonly").objectStore(c),h=[];for(let m=0;m<u.indexNames.length;m++){const y=u.indexNames[m],A=u.index(y);h.push({name:y,keyPath:A.keyPath,options:{unique:A.unique,multiEntry:A.multiEntry}})}const f={keyPath:u.keyPath,autoIncrement:u.autoIncrement,indexes:h},p=await new Promise((m,y)=>{const A=u.getAll();A.onsuccess=()=>m(A.result),A.onerror=()=>y(A.error)});a[c]={config:f,data:p}}s.close(),t({name:e,version:i,stores:a})}catch(c){s.close(),n(c)}}})}async function qg(e){try{const t=await Me();await t.clear("history"),await t.clear("bookmarks");const n=t.transaction("history","readwrite");for(const s of e.history)await n.store.add(s);await n.done;const r=t.transaction("bookmarks","readwrite");for(const s of e.bookmarks)await r.store.add(s);await r.done;for(const[s,i]of Object.entries(e.localStorage))localStorage.setItem(s,i);for(const[s,i]of Object.entries(e.sessionStorage))sessionStorage.setItem(s,i);if(e.cookies){const s=e.cookies.split(";");for(const i of s)try{document.cookie=i.trim()}catch(o){console.warn("Failed to restore cookie:",i,o)}}for(const s of e.indexedDBDatabases)if(s.name!=="fern-data")try{await Hg(s)}catch(i){console.error(`Failed to import database ${s.name}:`,i)}}catch(t){throw console.error("Error importing data:",t),t}}async function Hg(e){return new Promise((t,n)=>{const r=e.stores||(e.data?Ug(e.data):{}),s=indexedDB.deleteDatabase(e.name);s.onsuccess=()=>{const i=indexedDB.open(e.name,e.version);i.onerror=()=>n(i.error),i.onupgradeneeded=o=>{const a=o.target.result;for(const[c,l]of Object.entries(r))if(!a.objectStoreNames.contains(c)){const{config:u}=l,h={autoIncrement:u.autoIncrement};u.keyPath&&(h.keyPath=u.keyPath);const f=a.createObjectStore(c,h);for(const p of u.indexes)f.createIndex(p.name,p.keyPath,p.options)}},i.onsuccess=async()=>{const o=i.result;try{for(const[a,c]of Object.entries(r)){if(!o.objectStoreNames.contains(a))continue;const l=o.transaction(a,"readwrite"),u=l.objectStore(a);for(const h of c.data)try{await new Promise((f,p)=>{const m=u.add(h);m.onsuccess=()=>f(),m.onerror=()=>p(m.error)})}catch(f){console.warn(`Failed to import item in ${a}:`,f)}await new Promise((h,f)=>{l.oncomplete=()=>h(),l.onerror=()=>f(l.error)})}o.close(),t()}catch(a){o.close(),n(a)}}},s.onerror=()=>n(s.error)})}function Wg(e,t="fern-export.json"){const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}async function Qg(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{try{const i=JSON.parse(s.target?.result);t(i)}catch{n(new Error("Invalid export file format"))}},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(e)})}function Gg(){const[e,t]=x.useState(!1),[n,r]=x.useState(!1),[s,i]=x.useState({type:null,message:""}),o=x.useRef(null),a=async()=>{try{t(!0),i({type:null,message:""});const u=await Kg(),h=`fern-export-${new Date().toISOString().split("T")[0]}.json`;Wg(u,h),i({type:"success",message:`Successfully exported all data! File: ${h}`})}catch(u){console.error("Export failed:",u),i({type:"error",message:"Failed to export data. Check console for details."})}finally{t(!1)}},c=()=>{o.current?.click()},l=async u=>{const h=u.target.files?.[0];if(h)try{r(!0),i({type:null,message:""});const f=await Qg(h);await qg(f),i({type:"success",message:"Successfully imported all data! Page will reload in 2 seconds..."}),setTimeout(()=>{window.location.reload()},2e3)}catch(f){console.error("Import failed:",f),i({type:"error",message:f instanceof Error?f.message:"Failed to import data"})}finally{r(!1),o.current&&(o.current.value="")}};return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Data Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Export and import all your browsing data including history, bookmarks, localStorage, sessionStorage, cookies, and IndexedDB databases."})]}),s.type&&d.jsxs("div",{className:`p-4 rounded-md flex items-start gap-3 ${s.type==="success"?"bg-green-500/10 border border-green-500/20 text-green-700 dark:text-green-400":"bg-red-500/10 border border-red-500/20 text-red-700 dark:text-red-400"}`,children:[s.type==="success"?d.jsx(TA,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}):d.jsx(jA,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-sm",children:s.message})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:a,disabled:e,className:"flex-1 px-4 py-2 rounded-md border bg-primary text-primary-foreground hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity flex items-center justify-center gap-2 text-sm",children:e?d.jsxs(d.Fragment,{children:[d.jsx(qa,{className:"w-4 h-4 animate-spin"}),"Exporting..."]}):d.jsxs(d.Fragment,{children:[d.jsx(LA,{className:"w-4 h-4"}),"Export All Data"]})}),d.jsx("input",{ref:o,type:"file",accept:".json",onChange:l,className:"hidden"}),d.jsx("button",{onClick:c,disabled:n,className:"flex-1 px-4 py-2 rounded-md border hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 text-sm",children:n?d.jsxs(d.Fragment,{children:[d.jsx(qa,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):d.jsxs(d.Fragment,{children:[d.jsx(dg,{className:"w-4 h-4"}),"Import Data"]})})]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Export creates a backup of all your history, bookmarks, settings, and site data. Import restores from a backup file."})]})]})}const Xa=globalThis.SharedWorker,Za=globalThis.localStorage,Jg=globalThis.navigator.serviceWorker,ke=MessagePort.prototype.postMessage;async function yi(){const e=(await self.clients.matchAll({type:"window",includeUncontrolled:!0})).map((async n=>{const r=await(function(s){let i=new MessageChannel;return new Promise((o=>{s.postMessage({type:"getPort",port:i.port2},[i.port2]),i.port1.onmessage=a=>{o(a.data)}}))})(n);return await zu(r),r})),t=Promise.race([Promise.any(e),new Promise(((n,r)=>setTimeout(r,1e3,new TypeError("timeout"))))]);try{return await t}catch(n){if(n instanceof AggregateError)throw console.error("bare-mux: failed to get a bare-mux SharedWorker MessagePort as all clients returned an invalid MessagePort."),new Error("All clients returned an invalid MessagePort.");return console.warn("bare-mux: failed to get a bare-mux SharedWorker MessagePort within 1s, retrying"),await yi()}}function zu(e){const t=new MessageChannel,n=new Promise(((r,s)=>{t.port1.onmessage=i=>{i.data.type==="pong"&&r()},setTimeout(s,1500)}));return ke.call(e,{message:{type:"ping"},port:t.port2},[t.port2]),n}function Ya(e,t){const n=new Xa(e,"bare-mux-worker");return t&&Jg.addEventListener("message",(r=>{if(r.data.type==="getPort"&&r.data.port){console.debug("bare-mux: recieved request for port from sw");const s=new Xa(e,"bare-mux-worker");ke.call(r.data.port,s.port,[s.port])}})),n.port}let Ds=null;function _g(){if(Ds===null){const e=new MessageChannel,t=new ReadableStream;let n;try{ke.call(e.port1,t,[t]),n=!0}catch{n=!1}return Ds=n,n}return Ds}class Xg{constructor(t){this.channel=new BroadcastChannel("bare-mux"),t instanceof MessagePort||t instanceof Promise?this.port=t:this.createChannel(t,!0)}createChannel(t,n){if(self.clients)this.port=yi(),this.channel.onmessage=r=>{r.data.type==="refreshPort"&&(this.port=yi())};else if(t&&SharedWorker){if(!t.startsWith("/")&&!t.includes("://"))throw new Error("Invalid URL. Must be absolute or start at the root.");this.port=Ya(t,n),console.debug("bare-mux: setting localStorage bare-mux-path to",t),Za["bare-mux-path"]=t}else{if(!SharedWorker)throw new Error("Unable to get a channel to the SharedWorker.");{const r=Za["bare-mux-path"];if(console.debug("bare-mux: got localStorage bare-mux-path:",r),!r)throw new Error("Unable to get bare-mux workerPath from localStorage.");this.port=Ya(r,n)}}}async sendMessage(t,n){this.port instanceof Promise&&(this.port=await this.port);try{await zu(this.port)}catch{return console.warn("bare-mux: Failed to get a ping response from the worker within 1.5s. Assuming port is dead."),this.createChannel(),await this.sendMessage(t,n)}const r=new MessageChannel,s=[r.port2,...n||[]],i=new Promise(((o,a)=>{r.port1.onmessage=c=>{const l=c.data;l.type==="error"?a(l.error):o(l)}}));return ke.call(this.port,{message:t,port:r.port2},s),await i}}function ec(e,t,n){console.error(`error while processing '${n}': `,t),e.postMessage({type:"error",error:t})}class Zg{constructor(t){this.worker=new Xg(t)}async getTransport(){return(await this.worker.sendMessage({type:"get"})).name}async setTransport(t,n,r){await this.setManualTransport(`
			const { default: BareTransport } = await import("${t}");
			return [BareTransport, "${t}"];
		`,n,r)}async setManualTransport(t,n,r){if(t==="bare-mux-remote")throw new Error("Use setRemoteTransport.");await this.worker.sendMessage({type:"set",client:{function:t,args:n}},r)}async setRemoteTransport(t,n){const r=new MessageChannel;r.port1.onmessage=async s=>{const i=s.data.port,o=s.data.message;if(o.type==="fetch")try{t.ready||await t.init(),await(async function(a,c,l){const u=await l.request(new URL(a.fetch.remote),a.fetch.method,a.fetch.body,a.fetch.headers,null);if(!_g()&&u.body instanceof ReadableStream){const h=new Response(u.body);u.body=await h.arrayBuffer()}u.body instanceof ReadableStream||u.body instanceof ArrayBuffer?ke.call(c,{type:"fetch",fetch:u},[u.body]):ke.call(c,{type:"fetch",fetch:u})})(o,i,t)}catch(a){ec(i,a,"fetch")}else if(o.type==="websocket")try{t.ready||await t.init(),await(async function(a,c,l){const[u,h]=l.connect(new URL(a.websocket.url),a.websocket.protocols,a.websocket.requestHeaders,(f=>{ke.call(a.websocket.channel,{type:"open",args:[f]})}),(f=>{f instanceof ArrayBuffer?ke.call(a.websocket.channel,{type:"message",args:[f]},[f]):ke.call(a.websocket.channel,{type:"message",args:[f]})}),((f,p)=>{ke.call(a.websocket.channel,{type:"close",args:[f,p]})}),(f=>{ke.call(a.websocket.channel,{type:"error",args:[f]})}));a.websocket.channel.onmessage=f=>{f.data.type==="data"?u(f.data.data):f.data.type==="close"&&h(f.data.closeCode,f.data.closeReason)},ke.call(c,{type:"websocket"})})(o,i,t)}catch(a){ec(i,a,"websocket")}},await this.worker.sendMessage({type:"set",client:{function:"bare-mux-remote",args:[r.port2,n]}},[r.port2])}getInnerPort(){return this.worker.port}}console.debug("bare-mux: running v2.1.7 (build c56d286)");const Yg=async e=>{const t=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(e));return Array.from(new Uint8Array(t)).map(n=>n.toString(16).padStart(2,"0")).join("")},qu=atob("d3NzOi8v"),Hu="wisp-server",Wu="org",tc="wi",ey=async()=>{const t=window.location.host.split(".").slice(-2).join(".");return await Yg(t)==="3b2ddc6f174c6c4e3e163bbf556f5c7ad5077f3dc09ff48bb74a27062a40161d"},xi=(e,t)=>e==="chicago"?t?`/${tc}/`:"/wisp/":t?`/${tc}-${e}/`:`/wisp-${e}/`,ty=()=>{try{const e=localStorage.getItem("fern-settings");if(e)return JSON.parse(e).region||"chicago"}catch{}return"chicago"},Qu=e=>{if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")return"wss://fern.best/wisp/";const n=window.location.host.split(".").slice(-2).join(".").includes("amazonaws"),r=xi(e,n);return n?`${qu}${Hu}.${Wu}${r}`:`wss://${window.location.host}${r}`},ny=await ey(),bi=ty(),ry=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Gu=ry?"wss://fern.best/wisp/":ny?`${qu}${Hu}.${Wu}${xi(bi,!0)}`:`wss://${window.location.host}${xi(bi,!1)}`;async function Dn(e,t){if("serviceWorker"in navigator){const n=e||bi,r=e?Qu(e):Gu,s=await navigator.serviceWorker.getRegistrations();for await(const a of s)await a.unregister();if(t==="scramjet")try{if(!window.$scramjetLoadController){const c=document.createElement("script");c.src="/scramjet/scramjet.all.js",await new Promise((l,u)=>{c.onload=l,c.onerror=u,document.head.appendChild(c)})}const{ScramjetController:a}=window.$scramjetLoadController();window.scramjetController||(window.scramjetController=new a({prefix:"/scrammy/",files:{wasm:"/scramjet/scramjet.wasm.wasm",all:"/scramjet/scramjet.all.js",sync:"/scramjet/scramjet.sync.js"}})),window.scramjetController.init().then(()=>{console.log("Scramjet controller initialized")}).catch(c=>{console.error("Scramjet init failed:",c)})}catch(a){console.error("Failed to load Scramjet:",a)}await(await navigator.serviceWorker.register("/sw.js")).update(),await navigator.serviceWorker.ready,console.log("Service worker ready");const o=new Zg("/erab/worker.js");t==="scramjet"?(await o.setTransport("/libcurl/index.mjs",[{wisp:r}]),console.log("Mode configured for region:",n,"using scramjet (libcurl)")):(await o.setTransport("/epoxy/index.mjs",[{wisp:r}]),console.log("Mode configured for region:",n,"using ultraviolet (epoxy)"))}}const nc=Object.freeze(Object.defineProperty({__proto__:null,getWispUrl:Qu,setupProxy:Dn,wispUrl:Gu},Symbol.toStringTag,{value:"Module"})),sy=Re("/settings")({component:iy});function iy(){const{settings:e,setSettings:t,isRecordingKey:n,setIsRecordingKey:r}=Hn(),s=Ke(),i=x.useRef(e.aboutBlankCloakerEnabled);x.useEffect(()=>{e.aboutBlankCloakerEnabled&&!i.current&&s({to:"/"}),i.current=e.aboutBlankCloakerEnabled},[e.aboutBlankCloakerEnabled,s]);const o=a=>{n&&(a.preventDefault(),t({...e,panicKey:a.key}),r(!1))};return d.jsx("div",{className:"min-h-screen flex items-start justify-center p-8",children:d.jsxs("div",{className:"max-w-3xl w-full space-y-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(ge,{to:"/",className:"text-primary hover:underline text-sm",children:" Back to fern"}),d.jsx("h1",{className:"text-5xl font-bold font-display",children:"settings"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs(ge,{to:"/history",className:"px-4 py-2 rounded-md border border-border hover:bg-accent transition-colors text-sm flex items-center gap-2",children:[d.jsx(go,{className:"w-4 h-4"}),"Browsing History"]}),d.jsxs(ge,{to:"/bookmarks",className:"px-4 py-2 rounded-md border border-border hover:bg-accent transition-colors text-sm flex items-center gap-2",children:[d.jsx(Ur,{className:"w-4 h-4"}),"Bookmarks"]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Panic Button"}),d.jsx("p",{className:"text-muted-foreground",children:"Quickly redirect to another site by pressing a key. Works globally across all pages."})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{className:"block text-sm font-medium",children:"Panic Key"}),d.jsx("button",{type:"button",onClick:()=>r(!0),onKeyDown:o,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors font-mono text-sm",children:n?"Press any key...":e.panicKey})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:"panic-url",className:"block text-sm font-medium",children:"Redirect URL"}),d.jsx("input",{id:"panic-url",type:"url",value:e.panicUrl,onChange:a=>t({...e,panicUrl:a.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-sm",placeholder:"https://classroom.google.com"})]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsx("div",{className:"space-y-2",children:d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Auto Cloak"}),d.jsx("p",{className:"text-muted-foreground",children:"Disguise the tab when you switch away from it. Changes the title and favicon automatically."})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer flex-shrink-0",children:[d.jsx("input",{type:"checkbox",checked:e.autoCloakEnabled,onChange:a=>t({...e,autoCloakEnabled:a.target.checked}),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),e.autoCloakEnabled&&d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:"cloak-title",className:"block text-sm font-medium",children:"Disguise Title"}),d.jsx("input",{id:"cloak-title",type:"text",value:e.cloakTitle,onChange:a=>t({...e,cloakTitle:a.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-sm",placeholder:"Classes"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("label",{htmlFor:"cloak-favicon",className:"block text-sm font-medium",children:"Disguise Favicon Path"}),d.jsx("input",{id:"cloak-favicon",type:"text",value:e.cloakFavicon,onChange:a=>t({...e,cloakFavicon:a.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary text-sm",placeholder:"data:image/x-icon;base64,..."})]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"URL Cloaker"}),d.jsx("p",{className:"text-muted-foreground",children:"Cloak the site in an iframe to hide the actual site address. Choose your preferred method below."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium",children:"Select Cloak Type"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"button",onClick:()=>{t({...e,cloakType:"blob",aboutBlankCloakerEnabled:!1})},className:`flex-1 px-4 py-3 rounded-md border transition-all ${e.cloakType==="blob"&&!e.aboutBlankCloakerEnabled?"border-primary bg-primary/10 text-primary font-medium":"border-border hover:bg-accent"}`,children:d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"font-semibold text-sm",children:"Blob URL"}),d.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"blob:https://..."})]})}),d.jsx("button",{type:"button",onClick:()=>{t({...e,cloakType:"about:blank",aboutBlankCloakerEnabled:!1})},className:`flex-1 px-4 py-3 rounded-md border transition-all ${e.cloakType==="about:blank"&&!e.aboutBlankCloakerEnabled?"border-primary bg-primary/10 text-primary font-medium":"border-border hover:bg-accent"}`,children:d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"font-semibold text-sm",children:"About Blank"}),d.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"about:blank"})]})})]})]}),d.jsx("button",{type:"button",onClick:()=>{t({...e,aboutBlankCloakerEnabled:!0})},disabled:e.aboutBlankCloakerEnabled,className:`w-full px-4 py-3 rounded-md font-medium transition-all ${e.aboutBlankCloakerEnabled?"bg-muted text-muted-foreground cursor-not-allowed":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:e.aboutBlankCloakerEnabled?"Cloak Applied":`Apply ${e.cloakType==="blob"?"Blob":"About:Blank"} Cloak`}),e.aboutBlankCloakerEnabled&&d.jsx("p",{className:"text-sm text-muted-foreground",children:"Cloak is active. Refresh the page to disable it."})]}),d.jsx("section",{className:"space-y-4",children:d.jsx("div",{className:"space-y-2",children:d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Anti-Close"}),d.jsx("p",{className:"text-muted-foreground",children:"Show a confirmation popup when attempting to close or reload the tab to prevent accidental closures."})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer flex-shrink-0",children:[d.jsx("input",{type:"checkbox",checked:e.antiCloseEnabled,onChange:a=>t({...e,antiCloseEnabled:a.target.checked}),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-muted peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})})}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Proxy Type"}),d.jsx("p",{className:"text-muted-foreground",children:"Choose which proxy backend to use. Ultraviolet is the default, while Scramjet is a newer experimental option."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"button",onClick:async()=>{e.proxyType!=="ultraviolet"&&(t({...e,proxyType:"ultraviolet"}),await Dn(e.region,"ultraviolet"))},className:`flex-1 px-4 py-3 rounded-md border transition-all ${e.proxyType==="ultraviolet"?"border-primary bg-primary/10 text-primary font-medium":"border-border hover:bg-accent"}`,children:d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"font-semibold text-sm",children:"Ultraviolet"}),d.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"Stable and proven"})]})}),d.jsx("button",{type:"button",onClick:async()=>{e.proxyType!=="scramjet"&&(t({...e,proxyType:"scramjet"}),await Dn(e.region,"scramjet"))},className:`flex-1 px-4 py-3 rounded-md border transition-all ${e.proxyType==="scramjet"?"border-primary bg-primary/10 text-primary font-medium":"border-border hover:bg-accent"}`,children:d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"font-semibold text-sm",children:"Scramjet"}),d.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"Experimental"})]})})]})]}),d.jsx("section",{className:"pt-6 border-t border-border",children:d.jsx(Gg,{})})]})})}function gr(e){return e&&encodeURIComponent(e.toString().split("").map((t,n)=>n%2?String.fromCharCode(t.charCodeAt(Number.NaN)^2):t).join(""))}function bt(e){if(e.startsWith("/cdn"))return new URL(e,window.location.href).href;try{return new URL(e).toString()}catch{}try{const t=new URL(`http://${e}`);if(t.hostname.includes("."))return t.toString()}catch{}return new URL(`https://duckduckgo.com/?q=${encodeURIComponent(e)}`).toString()}const rc=((e,t)=>new RegExp(e,t));Object.assign(rc,{cast:rc});const Wn=e=>Array.isArray(e)?e:[e],oy=(e,t)=>{const n=[[],[]];for(const r of e)t(r)?n[0].push(r):n[1].push(r);return n},Ju=Array,it=(e,t)=>e.includes(t),ay=(e,t=0)=>[...new Array(e)].map((n,r)=>r+t),V=(e,t,n)=>e===void 0?t===void 0?[]:Array.isArray(t)?t:[t]:(Array.isArray(t)?e.push(...t):e.push(t),e),St=(e,t)=>t==null?e??[]:e==null?Wn(t):e.concat(t),cy=(...e)=>e.reduce(St,[]),It=(e,t,n)=>{if(e===void 0)return Array.isArray(t)?t:[t];const r=n?.isEqual??((s,i)=>s===i);for(const s of Wn(t))e.some(i=>r(i,s))||e.push(s);return e},ly=(e,t)=>e.reduce((n,r)=>{const s=r[t];return n[s]=V(n[s],r),n},{}),tn=(e,t,n)=>e.length===t.length&&e.every(n?.isEqual?(r,s)=>n.isEqual(r,t[s]):(r,s)=>r===t[s]),Lt=(e,t)=>Te(e)===t,Te=e=>{const t=typeof e;return t==="object"?e===null?"null":"object":t==="function"?"object":t},Je={boolean:"boolean",null:"null",undefined:"undefined",bigint:"a bigint",number:"a number",object:"an object",string:"a string",symbol:"a symbol"},uy={...Je,function:"a function"};class dy extends Error{}const Y=e=>nn(e,dy),nn=(e,t=Error)=>{throw new t(e)};class hy extends Error{name="ParseError"}const N=e=>nn(e,hy),_u=e=>` ${e}`,fy="",$=(e,t)=>{const n={},r=Array.isArray(e);let s=!1;for(const[i,o]of Object.entries(e).entries()){const a=r?t(i,o[1]):t(...o,i);s||=typeof a[0]=="number";const c=Array.isArray(a[0])||a.length===0?a:[a];for(const[l,u]of c)typeof l=="object"?n[l.group]=V(n[l.group],u):n[l]=u}return s?Object.values(n):n},Xu=Object.entries,ze=(e,t)=>e in t,yo=(e,t)=>t in e;class py{constructor(t){Object.assign(this,t)}}const my=class{};class Zu extends my{}const Ay=(e,t)=>{const n={},r={};let s;for(s in e)s in t?n[s]=e[s]:r[s]=e[s];return[n,r]},Yu=(e,t)=>Ay(e,t)[1],Qn=e=>Object.keys(e).length===0,Kr=e=>[...Object.entries(e),...Object.getOwnPropertySymbols(e).map(t=>[t,e[t]])],gy=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),yy=e=>{const t=Object.keys(e).sort(),n={};for(let r=0;r<t.length;r++)n[t[r]]=e[t[r]];return n},De=_u(`unset${fy}`),xy=e=>Object.values(e).filter(t=>typeof t=="number"?!0:typeof e[t]!="number"),ed={Array,Boolean,Date,Error,Function,Map,Number,Promise,RegExp,Set,String,WeakMap,WeakSet},td=globalThis.File??Blob,nd={ArrayBuffer,Blob,File:td,FormData,Headers,Request,Response,URL},by={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array},rn={...ed,...nd,...by,String,Number,Boolean},xo=e=>{let t=Object.getPrototypeOf(e);for(;t?.constructor&&(!ze(t.constructor.name,rn)||!(e instanceof rn[t.constructor.name]));)t=Object.getPrototypeOf(t);const n=t?.constructor?.name;if(!(n===void 0||n==="Object"))return n},vi=e=>typeof e=="object"&&e!==null?xo(e)??"object":Te(e),le=Array.isArray,vy={Array:"an array",Function:"a function",Date:"a Date",RegExp:"a RegExp",Error:"an Error",Map:"a Map",Set:"a Set",String:"a String object",Number:"a Number object",Boolean:"a Boolean object",Promise:"a Promise",WeakMap:"a WeakMap",WeakSet:"a WeakSet"},wy={ArrayBuffer:"an ArrayBuffer instance",Blob:"a Blob instance",File:"a File instance",FormData:"a FormData instance",Headers:"a Headers instance",Request:"a Request instance",Response:"a Response instance",URL:"a URL instance"},Sy={Int8Array:"an Int8Array",Uint8Array:"a Uint8Array",Uint8ClampedArray:"a Uint8ClampedArray",Int16Array:"an Int16Array",Uint16Array:"a Uint16Array",Int32Array:"an Int32Array",Uint32Array:"a Uint32Array",Float32Array:"a Float32Array",Float64Array:"a Float64Array",BigInt64Array:"a BigInt64Array",BigUint64Array:"a BigUint64Array"},ky={...vy,...wy,...Sy},bo=e=>{const t=Object(e).name??null;return t&&ze(t,rn)&&rn[t]===e?t:null},sc=(e,t)=>{let n=e.prototype;for(;n!==null;){if(n===t.prototype)return!0;n=Object.getPrototypeOf(n)}return!1},Cy=e=>rd(e,new Map),rd=(e,t)=>{if(typeof e!="object"||e===null)return e;if(t?.has(e))return t.get(e);const n=bo(e.constructor);if(n==="Date")return new Date(e.getTime());if(n&&n!=="Array")return e;const r=Array.isArray(e)?e.slice():Object.create(Object.getPrototypeOf(e)),s=Object.getOwnPropertyDescriptors(e);if(t){t.set(e,r);for(const i in s){const o=s[i];"get"in o||"set"in o||(o.value=rd(o.value,t))}}return Object.defineProperties(r,s),r},Py=e=>{let t=De;return()=>t===De?t=e():t},as=e=>typeof e=="function"&&e.length===0,Ny=class extends Function{constructor(...e){const t=e.slice(0,-1),n=e.at(-1);try{super(...t,n)}catch(r){return Y(`Encountered an unexpected error while compiling your definition:
                Message: ${r} 
                Source: (${e.slice(0,-1)}) => {
                    ${e.at(-1)}
                }`)}}};class mt{constructor(t,...[n]){return Object.assign(Object.setPrototypeOf(t.bind(n?.bind??this),this.constructor.prototype),n?.attach)}}const Ry=Py(()=>{try{return new Function("return false")()}catch{return!0}});class qe{constructor(){}}var Ey={};const Iy=()=>{try{return((new Error().stack?.split(`
`)[2]?.trim()||"").match(/\(?(.+?)(?::\d+:\d+)?\)?$/)?.[1]||"unknown").replace(/^file:\/\//,"")}catch{return"unknown"}},jy=Ey??{},My={fileName:Iy,env:jy},Ty=e=>e[0].toUpperCase()+e.slice(1),sd=e=>new RegExp(By(e),typeof e=="string"?"":e.flags),By=e=>`^(?:${typeof e=="string"?e:e.source})$`,ot={negativeLookahead:e=>`(?!${e})`,nonCapturingGroup:e=>`(?:${e})`},Rn="\\",cs={" ":1,"\n":1,"	":1},Dy=/^-0\.?0*$/.source,id=/[1-9]\d*/.source,Ly=/\.\d+/.source,Oy=/\.\d*[1-9]/.source,od=e=>sd(ot.negativeLookahead(Dy)+ot.nonCapturingGroup("-?"+ot.nonCapturingGroup(ot.nonCapturingGroup("0|"+id)+ot.nonCapturingGroup(e.decimalPattern)+"?")+(e.allowDecimalOnly?"|"+e.decimalPattern:"")+"?")),ic=od({decimalPattern:Oy,allowDecimalOnly:!1}),Fy=ic.test.bind(ic),wi=od({decimalPattern:Ly,allowDecimalOnly:!0});wi.test.bind(wi);const Vy=/^-?\d*\.?\d*$/,$y=e=>e.length!==0&&Vy.test(e),zr=sd(ot.negativeLookahead("^-0$")+"-?"+ot.nonCapturingGroup(ot.nonCapturingGroup("0|"+id))),Uy=zr.test.bind(zr),Si=/^-?\d+$/,Ky=Si.test.bind(Si),ad={number:"a number",bigint:"a bigint",integer:"an integer"},cd=(e,t)=>`'${e}' was parsed as ${ad[t]} but could not be narrowed to a literal value. Avoid unnecessary leading or trailing zeros and other abnormal notation`,zy=(e,t)=>t==="number"?Fy(e):Uy(e),qy=(e,t)=>t==="number"?Number(e):Number.parseInt(e),Hy=(e,t)=>t==="number"?$y(e):Ky(e),Wy=(e,t)=>vo(e,"number",t),Qy=(e,t)=>vo(e,"number",{...t,strict:!0}),Gy=(e,t)=>vo(e,"integer",t),vo=(e,t,n)=>{const r=qy(e,t);return!Number.isNaN(r)&&Hy(e,t)?n?.strict?zy(e,t)?r:N(cd(e,t)):r:n?.errorOnFail?N(n?.errorOnFail===!0?`Failed to parse ${ad[t]} from '${e}'`:n?.errorOnFail):void 0},Jy=e=>{if(e[e.length-1]!=="n")return;const t=e.slice(0,-1);let n;try{n=BigInt(t)}catch{return}if(zr.test(t))return n;if(Si.test(t))return N(cd(e,"bigint"))},_y="0.50.0",Xy={version:_y,filename:My.fileName(),FileConstructor:td},Gn=Xy,oc=new Map,Ls=Object.create(null),ki=e=>{const t=oc.get(e);if(t)return t;let n=Zy(e);return Ls[n]?n=`${n}${Ls[n]++}`:Ls[n]=1,Gn[n]=e,oc.set(e,n),n},Ln=e=>/^[$A-Z_a-z][\w$]*$/.test(e),Zy=e=>{switch(typeof e){case"object":{if(e===null)break;const t=xo(e)??"object";return t[0].toLowerCase()+t.slice(1)}case"function":return Ln(e.name)?e.name:"fn";case"symbol":return e.description&&Ln(e.description)?e.description:"symbol"}return Y(`Unexpected attempt to register serializable value of type ${Te(e)}`)},wo=e=>typeof e=="string"?JSON.stringify(e):typeof e=="bigint"?`${e}n`:`${e}`,Yy=(e,t={})=>En(e,{onUndefined:"$ark.undefined",onBigInt:n=>`$ark.bigint-${n}`,...t},[]),F=(e,t)=>{switch(Te(e)){case"object":const n=e,r=n.constructor.name;return r==="Object"||r==="Array"?t?.quoteKeys===!1?qr(n,t?.indent??0,""):JSON.stringify(En(n,sn,[]),null,t?.indent):qr(n,t?.indent??0,"");case"symbol":return sn.onSymbol(e);default:return wo(e)}},qr=(e,t,n)=>{if(typeof e=="function")return sn.onFunction(e);if(typeof e!="object"||e===null)return wo(e);const r=n+" ".repeat(t);if(Array.isArray(e)){if(e.length===0)return"[]";const i=e.map(o=>qr(o,t,r)).join(`,
`+r);return t?`[
${r}${i}
${n}]`:`[${i}]`}const s=e.constructor.name;if(s==="Object"){const i=Kr(e).map(([o,a])=>{const c=typeof o=="symbol"?sn.onSymbol(o):Ln(o)?o:JSON.stringify(o),l=qr(a,t,r);return`${r}${c}: ${l}`});return i.length===0?"{}":t?`{
${i.join(`,
`)}
${n}}`:`{${i.join(", ")}}`}return e instanceof Date?Jn(e):"expression"in e&&typeof e.expression=="string"?e.expression:s},sn={onCycle:()=>"(cycle)",onSymbol:e=>`Symbol(${ki(e)})`,onFunction:e=>`Function(${ki(e)})`},En=(e,t,n)=>{switch(Te(e)){case"object":{const r=e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();if(typeof r=="function")return sn.onFunction(r);if(n.includes(r))return"(cycle)";const s=[...n,r];if(Array.isArray(r))return r.map(o=>En(o,t,s));if(r instanceof Date)return r.toDateString();const i={};for(const o in r)i[o]=En(r[o],t,s);for(const o of Object.getOwnPropertySymbols(r))i[t.onSymbol?.(o)??o.toString()]=En(r[o],t,s);return i}case"symbol":return sn.onSymbol(e);case"bigint":return t.onBigInt?.(e)??`${e}n`;case"undefined":return t.onUndefined??"undefined";case"string":return e.replaceAll("\\","\\\\");default:return e}},Jn=e=>{const t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),s=e.getHours(),i=e.getMinutes(),o=e.getSeconds(),a=e.getMilliseconds();if(n===0&&r===1&&s===0&&i===0&&o===0&&a===0)return`${t}`;const c=`${ex[n]} ${r}, ${t}`;if(s===0&&i===0&&o===0&&a===0)return c;let l=e.toLocaleTimeString();const u=l.endsWith(" AM")||l.endsWith(" PM")?l.slice(-3):"";return u&&(l=l.slice(0,-u.length)),a?l+=`.${nx(a,3)}`:tx.test(l)&&(l=l.slice(0,-3)),`${l+u}, ${c}`},ex=["January","February","March","April","May","June","July","August","September","October","November","December"],tx=/:\d\d:00$/,nx=(e,t)=>String(e).padStart(t,"0"),ld=(e,t,...[n])=>{const r=n?.stringifySymbol??F;let s=e;switch(typeof t){case"string":s=Ln(t)?e===""?t:`${e}.${t}`:`${e}[${JSON.stringify(t)}]`;break;case"number":s=`${e}[${t}]`;break;case"symbol":s=`${e}[${r(t)}]`;break;default:n?.stringifyNonKey?s=`${e}[${n.stringifyNonKey(t)}]`:N(`${F(t)} must be a PropertyKey or stringifyNonKey must be passed to options`)}return s},_n=(e,...t)=>e.reduce((n,r)=>ld(n,r,...t),"");class ud extends Ju{cache={};constructor(...t){super(),this.push(...t)}toJSON(){if(this.cache.json)return this.cache.json;this.cache.json=[];for(let t=0;t<this.length;t++)this.cache.json.push(typeof this[t]=="symbol"?F(this[t]):this[t]);return this.cache.json}stringify(){return this.cache.stringify?this.cache.stringify:this.cache.stringify=_n(this)}stringifyAncestors(){if(this.cache.stringifyAncestors)return this.cache.stringifyAncestors;let t="";const n=[t];for(const r of this)t=ld(t,r),n.push(t);return this.cache.stringifyAncestors=n}}class dd{chars;i;def;constructor(t){this.def=t,this.chars=[...t],this.i=0}shift(){return this.chars[this.i++]??""}get lookahead(){return this.chars[this.i]??""}get nextLookahead(){return this.chars[this.i+1]??""}get length(){return this.chars.length}shiftUntil(t){let n="";for(;this.lookahead&&!t(this,n);)n+=this.shift();return n}shiftUntilEscapable(t){let n="";for(;this.lookahead;)if(this.lookahead===Rn)this.shift(),t(this,n)?n+=this.shift():this.lookahead===Rn?n+=this.shift():n+=`${Rn}${this.shift()}`;else{if(t(this,n))break;n+=this.shift()}return n}shiftUntilLookahead(t){return typeof t=="string"?this.shiftUntil(n=>n.lookahead===t):this.shiftUntil(n=>n.lookahead in t)}shiftUntilNonWhitespace(){return this.shiftUntil(()=>!(this.lookahead in cs))}jumpToIndex(t){this.i=t<0?this.length+t:t}jumpForward(t){this.i+=t}get location(){return this.i}get unscanned(){return this.chars.slice(this.i,this.length).join("")}get scanned(){return this.chars.slice(0,this.i).join("")}sliceChars(t,n){return this.chars.slice(t,n).join("")}lookaheadIs(t){return this.lookahead===t}lookaheadIsIn(t){return this.lookahead in t}}const rx=(e,t)=>`Unmatched ${e}${t===""?"":` before ${t}`}`,hd=e=>`Missing ${e}`;let Ci="$ark",sx=2;for(;Ci in globalThis;)Ci=`$ark${sx++}`;const fd=Ci;globalThis[fd]=Gn;const E=Gn,ix=e=>`${fd}.${e}`,fe=e=>ix(ki(e));class pd extends Zu{argNames;body="";constructor(...t){super(),this.argNames=t;for(const n of t){if(n in this)throw new Error(`Arg name '${n}' would overwrite an existing property on FunctionBody`);this[n]=n}}indentation=0;indent(){return this.indentation+=4,this}dedent(){return this.indentation-=4,this}prop(t,n=!1){return md(t,n)}index(t,n=!1){return Ad(`${t}`,n)}line(t){return this.body+=`${" ".repeat(this.indentation)}${t}
`,this}const(t,n){return this.line(`const ${t} = ${n}`),this}let(t,n){return this.line(`let ${t} = ${n}`)}set(t,n){return this.line(`${t} = ${n}`)}if(t,n){return this.block(`if (${t})`,n)}elseIf(t,n){return this.block(`else if (${t})`,n)}else(t){return this.block("else",t)}for(t,n,r=0){return this.block(`for (let i = ${r}; ${t}; i++)`,n)}forIn(t,n){return this.block(`for (const k in ${t})`,n)}block(t,n,r=""){return this.line(`${t} {`),this.indent(),n(this),this.dedent(),this.line(`}${r}`)}return(t=""){return this.line(`return ${t}`)}write(t="anonymous",n=0){return`${t}(${this.argNames.join(", ")}) { ${n?this.body.split(`
`).map(r=>" ".repeat(n)+`${r}`).join(`
`):this.body} }`}compile(){return new Ny(...this.argNames,this.body)}}const Xn=e=>Lt(e,"object")||typeof e=="symbol"?fe(e):wo(e),md=(e,t=!1)=>typeof e=="string"&&Ln(e)?`${t?"?":""}.${e}`:Ad(ox(e),t),ox=e=>typeof e=="symbol"?fe(e):JSON.stringify(e),Ad=(e,t=!1)=>`${t?"?.":""}[${e}]`;class Os extends pd{traversalKind;optimistic;constructor(t){super("data","ctx"),this.traversalKind=t.kind,this.optimistic=t.optimistic===!0}invoke(t,n){const r=n?.arg??this.data,s=typeof t=="string"?!0:this.requiresContextFor(t),i=typeof t=="string"?t:t.id;return s?`${this.referenceToId(i,n)}(${r}, ${this.ctx})`:`${this.referenceToId(i,n)}(${r})`}referenceToId(t,n){const r=n?.kind??this.traversalKind,s=`this.${t}${r}`;return n?.bind?`${s}.bind(${n?.bind})`:s}requiresContextFor(t){return this.traversalKind==="Apply"||t.allowsRequiresContext}initializeErrorCount(){return this.const("errorCount","ctx.currentErrorCount")}returnIfFail(){return this.if("ctx.currentErrorCount > errorCount",()=>this.return())}returnIfFailFast(){return this.if("ctx.failFast && ctx.currentErrorCount > errorCount",()=>this.return())}traverseKey(t,n,r){const s=this.requiresContextFor(r);return s&&this.line(`${this.ctx}.path.push(${t})`),this.check(r,{arg:n}),s&&this.line(`${this.ctx}.path.pop()`),this}check(t,n){return this.traversalKind==="Allows"?this.if(`!${this.invoke(t,n)}`,()=>this.return(!1)):this.line(this.invoke(t,n))}}const gd=e=>$(e,(t,n)=>[t,le(n)?[...n]:n]),_e=_u("arkKind"),M=(e,t)=>e?.[_e]===t,ue=e=>M(e,"root")||M(e,"constraint"),ax=["unit","proto","domain"],ls=["required","optional","index","sequence"],yd=["pattern","divisor","exactLength","max","min","maxLength","minLength","before","after"],xd=[...yd,"structure","predicate"],So=[...xd,...ls],us=["alias","union","morph","unit","intersection","proto","domain"],cx=[...us,...So],bd=$(So,(e,t)=>[t,1]),lx=$([...ls,"undeclared"],(e,t)=>[t,1]),vd=$(cx,(e,t)=>[t,e]),Rr=e=>typeof e=="string"&&e in vd,Hr=e=>vd[e],ko=e=>us.slice(Hr(e)+1);[...ko("union")];[...ko("morph")];const Bt=e=>typeof e=="string"||typeof e=="boolean"||e===null?e:typeof e=="number"?Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e:Xn(e),ds=e=>{let t="{ ";for(const[n,r]of Object.entries(e))t+=`${n}: ${Xn(r)}, `;return t+" }"},J=e=>{const t=e;return t.hasAssociatedError&&(t.defaults.expected??=n=>"description"in n?n.description:t.defaults.description(n),t.defaults.actual??=n=>F(n),t.defaults.problem??=n=>`must be ${n.expected}${n.actual?` (was ${n.actual})`:""}`,t.defaults.message??=n=>{if(n.path.length===0)return n.problem;const r=`${n.propString} ${n.problem}`;return r[0]==="["?`value at ${r}`:r}),t};class ux extends Error{name="ToJsonSchemaError";code;context;constructor(t,n){super(F(n,{quoteKeys:!1,indent:4})),this.code=t,this.context=n}hasCode(t){return this.code===t}}const dx={dialect:"https://json-schema.org/draft/2020-12/schema",useRefs:!1,fallback:{arrayObject:e=>te.throw("arrayObject",e),arrayPostfix:e=>te.throw("arrayPostfix",e),defaultValue:e=>te.throw("defaultValue",e),domain:e=>te.throw("domain",e),morph:e=>te.throw("morph",e),patternIntersection:e=>te.throw("patternIntersection",e),predicate:e=>te.throw("predicate",e),proto:e=>te.throw("proto",e),symbolKey:e=>te.throw("symbolKey",e),unit:e=>te.throw("unit",e),date:e=>te.throw("date",e)}},te={Error:ux,throw:(...e)=>{throw new te.Error(...e)},throwInternalOperandError:(e,t)=>Y(`Unexpected JSON Schema input for ${e}: ${F(t)}`),defaultConfig:dx};E.config??={};const Pi=(e,t)=>{if(!t)return e;const n={...e};let r;for(r in t){const s={...e.keywords};if(r==="keywords"){for(const i in t[r]){const o=t.keywords[i];o!==void 0&&(s[i]=typeof o=="string"?{description:o}:o)}n.keywords=s}else r==="toJsonSchema"?n[r]=wd(e.toJsonSchema,t.toJsonSchema):Rr(r)?n[r]={...e[r],...t[r]}:n[r]=t[r]}return n},wd=((e,t)=>{if(!e)return t??{};if(!t)return e;const n={...e};let r;for(r in t)r==="fallback"?n.fallback=hx(e.fallback,t.fallback):n[r]=t[r];return n}),hx=(e,t)=>{e=ac(e),t=ac(t);const n={};let r;for(r in te.defaultConfig.fallback)n[r]=t[r]??t.default??e[r]??e.default??te.defaultConfig.fallback[r];return n},ac=e=>typeof e=="function"?{default:e}:e??{};class on extends Zu{[_e]="error";path;data;nodeConfig;input;ctx;constructor({prefixPath:t,relativePath:n,...r},s){super(),this.input=r,this.ctx=s,gy(this,r);const i=s.data;r.code==="union"&&(r.errors=r.errors.flatMap(a=>{const c=a.hasCode("union")?a.errors:[a];return!t&&!n?c:c.map(l=>l.transform(u=>({...u,path:cy(t,u.path,n)})))})),this.nodeConfig=s.config[this.code];const o=[...r.path??s.path];n&&o.push(...n),t&&o.unshift(...t),this.path=new ud(...o),this.data="data"in r?r.data:i}transform(t){return new on(t({data:this.data,path:this.path,...this.input}),this.ctx)}hasCode(t){return this.code===t}get propString(){return _n(this.path)}get expected(){if(this.input.expected)return this.input.expected;const t=this.meta?.expected??this.nodeConfig.expected;return typeof t=="function"?t(this.input):t}get actual(){if(this.input.actual)return this.input.actual;const t=this.meta?.actual??this.nodeConfig.actual;return typeof t=="function"?t(this.data):t}get problem(){if(this.input.problem)return this.input.problem;const t=this.meta?.problem??this.nodeConfig.problem;return typeof t=="function"?t(this):t}get message(){if(this.input.message)return this.input.message;const t=this.meta?.message??this.nodeConfig.message;return typeof t=="function"?t(this):t}get flat(){return this.hasCode("intersection")?[...this.errors]:[this]}toJSON(){return{data:this.data,path:this.path,...this.input,expected:this.expected,actual:this.actual,problem:this.problem,message:this.message}}toString(){return this.message}throw(){throw this}}class ht extends Ju{[_e]="errors";ctx;constructor(t){super(),this.ctx=t}byPath=Object.create(null);get flatByPath(){return $(this.byPath,(t,n)=>[t,n.flat])}get flatProblemsByPath(){return $(this.byPath,(t,n)=>[t,n.flat.map(r=>r.problem)])}byAncestorPath=Object.create(null);count=0;mutable=this;throw(){throw this.toTraversalError()}toTraversalError(){return new fx(this)}add(t){const n=this.byPath[t.propString];if(n){if(t===n||n.hasCode("union")&&n.errors.length===0)return;const r=t.hasCode("union")&&t.errors.length===0?t:new on({code:"intersection",errors:n.hasCode("intersection")?[...n.errors,t]:[n,t]},this.ctx),s=this.indexOf(n);this.mutable[s===-1?this.length:s]=r,this.byPath[t.propString]=r,this.addAncestorPaths(t)}else this.byPath[t.propString]=t,this.addAncestorPaths(t),this.mutable.push(t);this.count++}transform(t){const n=new ht(this.ctx);for(const r of this)n.add(t(r));return n}merge(t){for(const n of t)this.add(new on({...n,path:[...this.ctx.path,...n.path]},this.ctx))}affectsPath(t){return this.length===0?!1:t.stringifyAncestors().some(n=>n in this.byPath)||t.stringify()in this.byAncestorPath}get summary(){return this.toString()}get issues(){return this}toJSON(){return[...this.map(t=>t.toJSON())]}toString(){return this.join(`
`)}addAncestorPaths(t){for(const n of t.path.stringifyAncestors())this.byAncestorPath[n]=V(this.byAncestorPath[n],t)}}class fx extends Error{name="TraversalError";constructor(t){t.length===1?super(t.summary):super(`
`+t.map(n=>`   ${px(n)}`).join(`
`)),Object.defineProperty(this,"arkErrors",{value:t,enumerable:!1})}}const px=e=>e.toString().split(`
`).join(`
  `);class Ut{path=[];errors=new ht(this);root;config;queuedMorphs=[];branches=[];seen={};constructor(t,n){this.root=t,this.config=n}get data(){let t=this.root;for(const n of this.path)t=t?.[n];return t}get propString(){return _n(this.path)}reject(t){return this.error(t),!1}mustBe(t){return this.error(t),!1}error(t){const n=typeof t=="object"?t.code?t:{...t,code:"predicate"}:{code:"predicate",expected:t};return this.errorFromContext(n)}hasError(){return this.currentErrorCount!==0}get currentBranch(){return this.branches.at(-1)}queueMorphs(t){const n={path:new ud(...this.path),morphs:t};this.currentBranch?this.currentBranch.queuedMorphs.push(n):this.queuedMorphs.push(n)}finalize(t){return this.queuedMorphs.length&&(typeof this.root=="object"&&this.root!==null&&this.config.clone&&(this.root=this.config.clone(this.root)),this.applyQueuedMorphs()),this.hasError()?t?t(this.errors):this.errors:this.root}get currentErrorCount(){return this.currentBranch?this.currentBranch.error?1:0:this.errors.count}get failFast(){return this.branches.length!==0}pushBranch(){this.branches.push({error:void 0,queuedMorphs:[]})}popBranch(){return this.branches.pop()}get external(){return this}errorFromNodeContext(t){return this.errorFromContext(t)}errorFromContext(t){const n=new on(t,this);return this.currentBranch?this.currentBranch.error=n:this.errors.add(n),n}applyQueuedMorphs(){for(;this.queuedMorphs.length;){const t=this.queuedMorphs;this.queuedMorphs=[];for(const{path:n,morphs:r}of t)this.errors.affectsPath(n)||this.applyMorphsAtPath(n,r)}}applyMorphsAtPath(t,n){const r=t.at(-1);let s;if(r!==void 0){s=this.root;for(let i=0;i<t.length-1;i++)s=s[t[i]]}for(const i of n){this.path=[...t];const o=ue(i),a=i(s===void 0?this.root:s[r],this);if(a instanceof on){this.errors.add(a);break}if(a instanceof ht){o||this.errors.merge(a),this.queuedMorphs=[];break}s===void 0?this.root=a:s[r]=a,this.applyQueuedMorphs()}}}const Xe=(e,t,n)=>{if(!n)return t();n.path.push(e);const r=t();return n.path.pop(),r};class Sd extends mt{attachments;$;onFail;includesTransform;includesContextualPredicate;isCyclic;allowsRequiresContext;rootApplyStrategy;contextFreeMorph;rootApply;referencesById;shallowReferences;flatRefs;flatMorphs;allows;get shallowMorphs(){return[]}constructor(t,n){super((s,i,o=this.onFail)=>i?(this.traverseApply(s,i),i.hasError()?i.errors:i.data):this.rootApply(s,o),{attach:t}),this.attachments=t,this.$=n,this.onFail=this.meta.onFail??this.$.resolvedConfig.onFail,this.includesTransform=this.hasKind("morph")||this.hasKind("structure")&&this.structuralMorph!==void 0||this.hasKind("sequence")&&this.inner.defaultables!==void 0,this.includesContextualPredicate=this.hasKind("predicate")&&this.inner.predicate.length!==1,this.isCyclic=this.kind==="alias",this.referencesById={[this.id]:this},this.shallowReferences=this.hasKind("structure")?[this,...this.children]:this.children.reduce((s,i)=>yx(s,i.shallowReferences),[this]);const r=this.isStructural();this.flatRefs=[],this.flatMorphs=[];for(let s=0;s<this.children.length;s++){if(this.includesTransform||=this.children[s].includesTransform,this.includesContextualPredicate||=this.children[s].includesContextualPredicate,this.isCyclic||=this.children[s].isCyclic,!r){const i=this.children[s].flatRefs;for(let o=0;o<i.length;o++){const a=i[o];if(!this.flatRefs.some(c=>kd(c,a))){this.flatRefs.push(a);for(const c of a.node.branches)(c.hasKind("morph")||c.hasKind("intersection")&&c.structure?.structuralMorph!==void 0)&&this.flatMorphs.push({path:a.path,propString:a.propString,node:c})}}}Object.assign(this.referencesById,this.children[s].referencesById)}this.flatRefs.sort((s,i)=>s.path.length>i.path.length?1:s.path.length<i.path.length?-1:s.propString>i.propString?1:s.propString<i.propString||s.node.expression<i.node.expression?-1:1),this.allowsRequiresContext=this.includesContextualPredicate||this.isCyclic,this.rootApplyStrategy=!this.allowsRequiresContext&&this.flatMorphs.length===0?this.shallowMorphs.length===0?"allows":this.shallowMorphs.every(s=>s.length===1||s.name==="$arkStructuralMorph")?this.hasKind("union")?this.branches.some(s=>s.shallowMorphs.length>1)?"contextual":"branchedOptimistic":this.shallowMorphs.length>1?"contextual":"optimistic":"contextual":"contextual",this.rootApply=this.createRootApply(),this.allows=this.allowsRequiresContext?s=>this.traverseAllows(s,new Ut(s,this.$.resolvedConfig)):s=>this.traverseAllows(s)}createRootApply(){switch(this.rootApplyStrategy){case"allows":return(n,r)=>{if(this.allows(n))return n;const s=new Ut(n,this.$.resolvedConfig);return this.traverseApply(n,s),s.finalize(r)};case"contextual":return(n,r)=>{const s=new Ut(n,this.$.resolvedConfig);return this.traverseApply(n,s),s.finalize(r)};case"optimistic":this.contextFreeMorph=this.shallowMorphs[0];const t=this.$.resolvedConfig.clone;return(n,r)=>{if(this.allows(n))return this.contextFreeMorph(t&&(typeof n=="object"&&n!==null||typeof n=="function")?t(n):n);const s=new Ut(n,this.$.resolvedConfig);return this.traverseApply(n,s),s.finalize(r)};case"branchedOptimistic":return this.createBranchedOptimisticRootApply();default:return this.rootApplyStrategy,Y(`Unexpected rootApplyStrategy ${this.rootApplyStrategy}`)}}compiledMeta=gx(this.metaJson);cacheGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}get description(){return this.cacheGetter("description",this.meta?.description??this.$.resolvedConfig[this.kind].description(this))}get references(){return Object.values(this.referencesById)}precedence=Hr(this.kind);precompilation;assert=(t,n)=>this(t,n,r=>r.throw());traverse(t,n){return this(t,n,null)}get in(){return this.cacheGetter("in",this.rawIn.isRoot()?this.$.finalize(this.rawIn):this.rawIn)}get rawIn(){return this.cacheGetter("rawIn",this.getIo("in"))}get out(){return this.cacheGetter("out",this.rawOut.isRoot()?this.$.finalize(this.rawOut):this.rawOut)}get rawOut(){return this.cacheGetter("rawOut",this.getIo("out"))}getIo(t){if(!this.includesTransform)return this;const n={};for(const[r,s]of this.innerEntries){const i=this.impl.keys[r];if(i.reduceIo)i.reduceIo(t,n,s);else if(i.child){const o=s;n[r]=le(o)?o.map(a=>t==="in"?a.rawIn:a.rawOut):t==="in"?o.rawIn:o.rawOut}else n[r]=s}return this.$.node(this.kind,n)}toJSON(){return this.json}toString(){return`Type<${this.expression}>`}equals(t){const n=ue(t)?t:this.$.parseDefinition(t);return this.innerHash===n.innerHash}ifEquals(t){return this.equals(t)?this:void 0}hasKind(t){return this.kind===t}assertHasKind(t){return this.kind!==t&&nn(`${this.kind} node was not of asserted kind ${t}`),this}hasKindIn(...t){return t.includes(this.kind)}assertHasKindIn(...t){return it(t,this.kind)||nn(`${this.kind} node was not one of asserted kinds ${t}`),this}isBasis(){return it(ax,this.kind)}isConstraint(){return it(So,this.kind)}isStructural(){return it(ls,this.kind)}isRefinement(){return it(xd,this.kind)}isRoot(){return it(us,this.kind)}isUnknown(){return this.hasKind("intersection")&&this.children.length===0}isNever(){return this.hasKind("union")&&this.children.length===0}hasUnit(t){return this.hasKind("unit")&&this.allows(t)}hasOpenIntersection(){return this.impl.intersectionIsOpen}get nestableExpression(){return this.expression}select(t){const n=vn.normalize(t);return this._select(n)}_select(t){let n=vn.applyBoundary[t.boundary??"references"](this);return t.kind&&(n=n.filter(r=>r.kind===t.kind)),t.where&&(n=n.filter(t.where)),vn.applyMethod[t.method??"filter"](n,this,t)}transform(t,n){return this._transform(t,this._createTransformContext(n))}_createTransformContext(t){return{root:this,selected:void 0,seen:{},path:[],parseOptions:{prereduced:t?.prereduced??!1},undeclaredKeyHandling:void 0,...t}}_transform(t,n){const r=n.bindScope??this.$;if(n.seen[this.id])return this.$.lazilyResolve(n.seen[this.id]);if(n.shouldTransform?.(this,n)===!1)return this;let s;n.seen[this.id]=()=>s,this.hasKind("structure")&&this.undeclared!==n.undeclaredKeyHandling&&(n={...n,undeclaredKeyHandling:this.undeclared});const i=$(this.inner,(u,h)=>{if(!this.impl.keys[u].child)return[u,h];const f=h;if(!le(f)){const m=f._transform(t,n);return m?[u,m]:[]}if(f.length===0)return[u,h];const p=f.flatMap(m=>m._transform(t,n)??[]);return p.length?[u,p]:[]});delete n.seen[this.id];const o=Object.assign(i,{meta:this.meta}),a=n.selected&&!n.selected.includes(this)?o:t(this.kind,o,n);if(a===null)return null;if(ue(a))return s=a;const c=Object.keys(a);return(c.length===0||c.length===1&&c[0]==="meta")&&!Qn(this.inner)?null:(this.kind==="required"||this.kind==="optional"||this.kind==="index")&&!("value"in a)?n.undeclaredKeyHandling?{...a,value:E.intrinsic.unknown}:null:(this.kind==="morph"&&(a.in??=E.intrinsic.unknown),s=r.node(this.kind,a,n.parseOptions))}configureReferences(t,n="references"){const r=vn.normalize(n),s=typeof t=="string"?(c,l)=>({...l,meta:{...l.meta,description:t}}):typeof t=="function"?(c,l)=>({...l,meta:t(l.meta)}):(c,l)=>({...l,meta:{...l.meta,...t}});if(r.boundary==="self")return this.$.node(this.kind,s(this.kind,{...this.inner,meta:this.meta}));const i=this._select(r),o=i&&Wn(i),a=r.boundary==="child"?(c,l)=>l.root.children.includes(c):r.boundary==="shallow"?c=>c.kind!=="structure":()=>!0;return this.$.finalize(this.transform(s,{shouldTransform:a,selected:o}))}}const vn={applyBoundary:{self:e=>[e],child:e=>[...e.children],shallow:e=>[...e.shallowReferences],references:e=>[...e.references]},applyMethod:{filter:e=>e,assertFilter:(e,t,n)=>(e.length===0&&nn(cc(t,n)),e),find:e=>e[0],assertFind:(e,t,n)=>(e.length===0&&nn(cc(t,n)),e[0])},normalize:e=>typeof e=="function"?{boundary:"references",method:"filter",where:e}:typeof e=="string"?ze(e,vn.applyBoundary)?{method:"filter",boundary:e}:{boundary:"references",method:"filter",kind:e}:{boundary:"references",method:"filter",...e}},cc=(e,t)=>`${e} had no references matching ${F(t)}.`,mx=e=>_n(e,{stringifyNonKey:t=>t.expression}),Ax=/"(\$ark\.[^"]+)"/g,gx=e=>JSON.stringify(e).replaceAll(Ax,"$1"),ct=(e,t)=>({path:e,node:t,propString:mx(e)}),kd=(e,t)=>e.propString===t.propString&&e.node.equals(t.node),lc=(e,t)=>It(e,t,{isEqual:kd}),yx=(e,t)=>It(e,t,{isEqual:(n,r)=>n.equals(r)});class I extends Array{static init(t,n,r,s){return new I({kind:t,l:n,r,path:s?.path??[],optional:s?.optional??!1})}add(t,n,r,s){return this.push({kind:t,l:n,r,path:s?.path??[],optional:s?.optional??!1}),this}get summary(){return this.describeReasons()}describeReasons(){if(this.length===1){const{path:t,l:n,r}=this[0],s=_n(t);return Cd(`Intersection${s&&` at ${s}`} of ${uc(n,r)}`)}return`The following intersections result in unsatisfiable types:
 ${this.map(({path:t,l:n,r})=>`${t}: ${uc(n,r)}`).join(`
 `)}`}throw(){return N(this.describeReasons())}invert(){const t=this.map(n=>({...n,l:n.r,r:n.l}));return t instanceof I?t:new I(...t)}withPrefixKey(t,n){return this.map(r=>({...r,path:[t,...r.path],optional:r.optional||n==="optional"}))}toNeverIfDisjoint(){return E.intrinsic.never}}const uc=(e,t)=>`${Ni(e)} and ${Ni(t)}`,Ni=e=>ue(e)?e.expression:le(e)?e.map(Ni).join(" | ")||"never":String(e),Cd=e=>`${e} results in an unsatisfiable type`,Ft={},Ze=(e,t,n)=>ie(e,t,{$:n,invert:!1,pipe:!1}),Ri=(e,t,n)=>ie(e,t,{$:n,invert:!1,pipe:!0}),ie=((e,t,n)=>{const r=n.pipe?"|>":"&",s=`${e.hash}${r}${t.hash}`;if(Ft[s]!==void 0)return Ft[s];if(!n.pipe){const a=`${t.hash}${r}${e.hash}`;if(Ft[a]!==void 0){const c=Ft[a],l=c instanceof I?c.invert():c;return Ft[s]=l,l}}const i=!n.pipe||!e.includesTransform&&!t.includesTransform;if(i&&e.equals(t))return e;let o=i?Ei(e,t,n):e.hasKindIn(...us)?xx(e,t,n):Ei(e,t,n);return ue(o)&&(e.equals(o)?o=e:t.equals(o)&&(o=t)),Ft[s]=o,o}),Ei=(e,t,n)=>{const r=e.precedence<t.precedence?e.kind:t.kind,s=e.impl.intersections[t.kind]??t.impl.intersections[e.kind];if(s===void 0)return null;if(r===e.kind)return s(e,t,n);{let i=s(t,e,{...n,invert:!n.invert});return i instanceof I&&(i=i.invert()),i}},xx=(e,t,n)=>e.includesTransform||t.includesTransform?n.invert?dc(t,e,n):dc(e,t,n):Ei(e,t,n),dc=(e,t,n)=>e.distribute(r=>bx(r,t,n),r=>{const s=r.filter(ue);if(s.length===0)return I.init("union",e.branches,t.branches);if(s.length<e.branches.length||!e.branches.every((o,a)=>o.rawIn.equals(s[a].rawIn)))return n.$.parseSchema(s);if(s.length===1)return s[0];const i={branches:s};return n.$.parseSchema(i)}),bx=(e,t,n)=>{if(e.hasKind("morph")){const s=[...e.morphs];if(e.lastMorphIfNode){const i=ie(e.lastMorphIfNode,t,n);if(i instanceof I)return i;s[s.length-1]=i}else s.push(t);return n.$.node("morph",{morphs:s,in:e.inner.in})}if(t.hasKind("morph")){const s=ie(e,t.rawIn,n);return s instanceof I?s:n.$.node("morph",{morphs:[t],in:s})}return n.$.node("morph",{morphs:[t],in:e})};class ln extends Sd{constructor(t,n){super(t,n),Object.defineProperty(this,_e,{value:"constraint",enumerable:!1})}impliedSiblings;intersect(t){return Ze(this,t,this.$)}}class hs extends ln{traverseApply=(t,n)=>{this.traverseAllows(t,n)||n.errorFromNodeContext(this.errorContext)};compile(t){t.traversalKind==="Allows"?t.return(this.compiledCondition):t.if(this.compiledNegation,()=>t.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return ds(this.errorContext)}}const me=e=>(t,n)=>{if(le(t)){if(t.length===0)return;const s=t.map(i=>n.$.node(e,i));return e==="predicate"?s:s.sort((i,o)=>i.hash<o.hash?-1:1)}const r=n.$.node(e,t);return r.hasOpenIntersection()?[r]:r},Wr=e=>{const t=e.r.shift();if(!t){let r=e.l.length===0&&e.kind==="structure"?E.intrinsic.unknown.internal:e.ctx.$.node(e.kind,Object.assign(e.baseInner,vx(e.l)),{prereduced:!0});for(const s of e.roots){if(r instanceof I)return r;r=ie(s,r,e.ctx)}return r}let n=!1;for(let r=0;r<e.l.length;r++){const s=ie(e.l[r],t,e.ctx);if(s!==null){if(s instanceof I)return s;if(s.isRoot())return e.roots.push(s),e.l.splice(r),Wr(e);if(!n)e.l[r]=s,n=!0;else if(!e.l.includes(s))return Y(`Unexpectedly encountered multiple distinct intersection results for refinement ${t}`)}}if(n||e.l.push(t),e.kind==="intersection"&&t.impliedSiblings)for(const r of t.impliedSiblings)It(e.r,r);return Wr(e)},Qr=e=>Object.entries(e).flatMap(([n,r])=>n in bd?r:[]).sort((n,r)=>n.precedence<r.precedence?-1:n.precedence>r.precedence?1:n.kind==="predicate"&&r.kind==="predicate"?0:n.hash<r.hash?-1:1),vx=e=>{const t={};for(const n of e)if(n.hasOpenIntersection())t[n.kind]=V(t[n.kind],n);else{if(t[n.kind])return Y(`Unexpected intersection of closed refinements of kind ${n.kind}`);t[n.kind]=n}return t},wx=(...e)=>N(Sx(...e)),Sx=(e,t,n)=>{const r=n.hasKind("morph")?"a morph":n.isUnknown()?"unknown":n.exclude(t).defaultShortDescription;return`${Ty(e)} operand must be ${t.description} (was ${r})`},kx=(e,t,n)=>new Gr(e,t,n,n,null);class Pd extends mt{}class Gr extends mt{[_e]="generic";paramDefs;bodyDef;$;arg$;baseInstantiation;hkt;description;constructor(t,n,r,s,i){super((...o)=>{const a=$(this.names,(c,l)=>{const u=this.arg$.parse(o[c]);return u.extends(this.constraints[c])||N(Cx(l,this.constraints[c].expression,u.expression)),[l,u]});if(this.defIsLazy()){const c=this.bodyDef(a);return this.$.parse(c)}return this.$.parse(n,{args:a})}),this.paramDefs=t,this.bodyDef=n,this.$=r,this.arg$=s,this.hkt=i,this.description=i?new i().description??`a generic type for ${i.constructor.name}`:"a generic type",this.baseInstantiation=this(...this.constraints)}defIsLazy(){return this.bodyDef instanceof Pd}cacheGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}get json(){return this.cacheGetter("json",{params:this.params.map(t=>t[1].isUnknown()?t[0]:[t[0],t[1].json]),body:Yy(this.bodyDef)})}get params(){return this.cacheGetter("params",this.paramDefs.map(t=>typeof t=="string"?[t,E.intrinsic.unknown]:[t[0],this.$.parse(t[1])]))}get names(){return this.cacheGetter("names",this.params.map(t=>t[0]))}get constraints(){return this.cacheGetter("constraints",this.params.map(t=>t[1]))}get internal(){return this}get referencesById(){return this.baseInstantiation.internal.referencesById}get references(){return this.baseInstantiation.internal.references}}const Cx=(e,t,n)=>`${e} must be assignable to ${t} (was ${n})`,Px=J({kind:"predicate",hasAssociatedError:!0,collapsibleKey:"predicate",keys:{predicate:{}},normalize:e=>typeof e=="function"?{predicate:e}:e,defaults:{description:e=>`valid according to ${e.predicate.name||"an anonymous predicate"}`},intersectionIsOpen:!0,intersections:{predicate:()=>null}});class Nx extends ln{serializedPredicate=fe(this.predicate);compiledCondition=`${this.serializedPredicate}(data, ctx)`;compiledNegation=`!${this.compiledCondition}`;impliedBasis=null;expression=this.serializedPredicate;traverseAllows=this.predicate;errorContext={code:"predicate",description:this.description,meta:this.meta};compiledErrorContext=ds(this.errorContext);traverseApply=(t,n)=>{!this.predicate(t,n.external)&&!n.hasError()&&n.errorFromNodeContext(this.errorContext)};compile(t){if(t.traversalKind==="Allows"){t.return(this.compiledCondition);return}t.if(`${this.compiledNegation} && !ctx.hasError()`,()=>t.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}reduceJsonSchema(t,n){return n.fallback.predicate({code:"predicate",base:t,predicate:this.predicate})}}const Nd={implementation:Px,Node:Nx},Rx=J({kind:"divisor",collapsibleKey:"rule",keys:{rule:{parse:e=>Number.isInteger(e)?e:N(Ix(e))}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>e.rule===1?"an integer":e.rule===2?"even":`a multiple of ${e.rule}`},intersections:{divisor:(e,t,n)=>n.$.node("divisor",{rule:Math.abs(e.rule*t.rule/jx(e.rule,t.rule))})},obviatesBasisDescription:!0});class Ex extends hs{traverseAllows=t=>t%this.rule===0;compiledCondition=`data % ${this.rule} === 0`;compiledNegation=`data % ${this.rule} !== 0`;impliedBasis=E.intrinsic.number.internal;expression=`% ${this.rule}`;reduceJsonSchema(t){return t.type="integer",this.rule===1||(t.multipleOf=this.rule),t}}const Rd={implementation:Rx,Node:Ex},Ix=e=>`divisor must be an integer (was ${e})`,jx=(e,t)=>{let n,r=e,s=t;for(;s!==0;)n=s,s=r%s,r=n;return r};class un extends hs{boundOperandKind=Dx[this.kind];compiledActual=this.boundOperandKind==="value"?"data":this.boundOperandKind==="length"?"data.length":"data.valueOf()";comparator=Lx(this.kind,this.exclusive);numericLimit=this.rule.valueOf();expression=`${this.comparator} ${this.rule}`;compiledCondition=`${this.compiledActual} ${this.comparator} ${this.numericLimit}`;compiledNegation=`${this.compiledActual} ${Mx[this.comparator]} ${this.numericLimit}`;stringLimit=this.boundOperandKind==="date"?Ox(this.numericLimit):`${this.numericLimit}`;limitKind=this.comparator[0]==="<"?"upper":"lower";isStricterThan(t){return(this.limitKind==="upper"?this.numericLimit<t.numericLimit:this.numericLimit>t.numericLimit)||this.numericLimit===t.numericLimit&&this.exclusive===!0&&!t.exclusive}overlapsRange(t){return!(this.isStricterThan(t)||this.numericLimit===t.numericLimit&&(this.exclusive||t.exclusive))}overlapIsUnit(t){return this.numericLimit===t.numericLimit&&!this.exclusive&&!t.exclusive}}const Mx={"<":">=","<=":">",">":"<=",">=":"<"},Tx={min:"max",minLength:"maxLength",after:"before"},Ed={parse:e=>e||void 0},Id=e=>t=>{if(typeof t=="number")return{rule:t};const{exclusive:n,...r}=t;return n?{...r,rule:e==="minLength"?r.rule+1:r.rule-1}:r},jd=e=>t=>{if(typeof t=="number"||typeof t=="string"||t instanceof Date)return{rule:t};const{exclusive:n,...r}=t;if(!n)return r;const s=typeof r.rule=="number"?r.rule:typeof r.rule=="string"?new Date(r.rule).valueOf():r.rule.valueOf();return n?{...r,rule:e==="after"?s+1:s-1}:r},Md=e=>typeof e=="string"||typeof e=="number"?new Date(e):e,Bx=(e,t)=>`${e} bound must be a positive integer (was ${t})`,Co=e=>t=>((!Number.isInteger(t)||t<0)&&N(Bx(e,t)),t),Dx={min:"value",max:"value",minLength:"length",maxLength:"length",after:"date",before:"date"},Lx=(e,t)=>`${ze(e,Tx)?">":"<"}${t?"":"="}`,Ox=e=>typeof e=="string"?e:new Date(e).toLocaleString(),Fx=e=>`Bounded expression ${e} must be exactly one of number, string, Array, or Date`,Vx=J({kind:"after",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Md,serialize:e=>e.toISOString()}},normalize:jd("after"),defaults:{description:e=>`${e.collapsibleLimitString} or later`,actual:Jn},intersections:{after:(e,t)=>e.isStricterThan(t)?e:t}});class $x extends un{impliedBasis=E.intrinsic.Date.internal;collapsibleLimitString=Jn(this.rule);traverseAllows=t=>t>=this.rule;reduceJsonSchema(t,n){return n.fallback.date({code:"date",base:t,after:this.rule})}}const Td={implementation:Vx,Node:$x},Ux=J({kind:"before",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Md,serialize:e=>e.toISOString()}},normalize:jd("before"),defaults:{description:e=>`${e.collapsibleLimitString} or earlier`,actual:Jn},intersections:{before:(e,t)=>e.isStricterThan(t)?e:t,after:(e,t,n)=>e.overlapsRange(t)?e.overlapIsUnit(t)?n.$.node("unit",{unit:e.rule}):null:I.init("range",e,t)}});class Kx extends un{collapsibleLimitString=Jn(this.rule);traverseAllows=t=>t<=this.rule;impliedBasis=E.intrinsic.Date.internal;reduceJsonSchema(t,n){return n.fallback.date({code:"date",base:t,before:this.rule})}}const Bd={implementation:Ux,Node:Kx},zx=J({kind:"exactLength",collapsibleKey:"rule",keys:{rule:{parse:Co("exactLength")}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>`exactly length ${e.rule}`,actual:e=>`${e.length}`},intersections:{exactLength:(e,t,n)=>I.init("unit",n.$.node("unit",{unit:e.rule}),n.$.node("unit",{unit:t.rule}),{path:["length"]}),minLength:(e,t)=>e.rule>=t.rule?e:I.init("range",e,t),maxLength:(e,t)=>e.rule<=t.rule?e:I.init("range",e,t)}});class qx extends hs{traverseAllows=t=>t.length===this.rule;compiledCondition=`data.length === ${this.rule}`;compiledNegation=`data.length !== ${this.rule}`;impliedBasis=E.intrinsic.lengthBoundable.internal;expression=`== ${this.rule}`;reduceJsonSchema(t){switch(t.type){case"string":return t.minLength=this.rule,t.maxLength=this.rule,t;case"array":return t.minItems=this.rule,t.maxItems=this.rule,t;default:return te.throwInternalOperandError("exactLength",t)}}}const Dd={implementation:zx,Node:qx},Hx=J({kind:"max",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:Ed},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.rule===0?e.exclusive?"negative":"non-positive":`${e.exclusive?"less than":"at most"} ${e.rule}`},intersections:{max:(e,t)=>e.isStricterThan(t)?e:t,min:(e,t,n)=>e.overlapsRange(t)?e.overlapIsUnit(t)?n.$.node("unit",{unit:e.rule}):null:I.init("range",e,t)},obviatesBasisDescription:!0});class Wx extends un{impliedBasis=E.intrinsic.number.internal;traverseAllows=this.exclusive?t=>t<this.rule:t=>t<=this.rule;reduceJsonSchema(t){return this.exclusive?t.exclusiveMaximum=this.rule:t.maximum=this.rule,t}}const Ld={implementation:Hx,Node:Wx},Qx=J({kind:"maxLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Co("maxLength")}},reduce:(e,t)=>e.rule===0?t.node("exactLength",e):void 0,normalize:Id("maxLength"),defaults:{description:e=>`at most length ${e.rule}`,actual:e=>`${e.length}`},intersections:{maxLength:(e,t)=>e.isStricterThan(t)?e:t,minLength:(e,t,n)=>e.overlapsRange(t)?e.overlapIsUnit(t)?n.$.node("exactLength",{rule:e.rule}):null:I.init("range",e,t)}});class Gx extends un{impliedBasis=E.intrinsic.lengthBoundable.internal;traverseAllows=t=>t.length<=this.rule;reduceJsonSchema(t){switch(t.type){case"string":return t.maxLength=this.rule,t;case"array":return t.maxItems=this.rule,t;default:return te.throwInternalOperandError("maxLength",t)}}}const Od={implementation:Qx,Node:Gx},Jx=J({kind:"min",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:Ed},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.rule===0?e.exclusive?"positive":"non-negative":`${e.exclusive?"more than":"at least"} ${e.rule}`},intersections:{min:(e,t)=>e.isStricterThan(t)?e:t},obviatesBasisDescription:!0});class _x extends un{impliedBasis=E.intrinsic.number.internal;traverseAllows=this.exclusive?t=>t>this.rule:t=>t>=this.rule;reduceJsonSchema(t){return this.exclusive?t.exclusiveMinimum=this.rule:t.minimum=this.rule,t}}const Fd={implementation:Jx,Node:_x},Xx=J({kind:"minLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Co("minLength")}},reduce:e=>e.rule===0?E.intrinsic.unknown:void 0,normalize:Id("minLength"),defaults:{description:e=>e.rule===1?"non-empty":`at least length ${e.rule}`,actual:e=>e.length===0?"":`${e.length}`},intersections:{minLength:(e,t)=>e.isStricterThan(t)?e:t}});class Zx extends un{impliedBasis=E.intrinsic.lengthBoundable.internal;traverseAllows=t=>t.length>=this.rule;reduceJsonSchema(t){switch(t.type){case"string":return t.minLength=this.rule,t;case"array":return t.minItems=this.rule,t;default:return te.throwInternalOperandError("minLength",t)}}}const Vd={implementation:Xx,Node:Zx},Yx={min:Fd.implementation,max:Ld.implementation,minLength:Vd.implementation,maxLength:Od.implementation,exactLength:Dd.implementation,after:Td.implementation,before:Bd.implementation},eb={min:Fd.Node,max:Ld.Node,minLength:Vd.Node,maxLength:Od.Node,exactLength:Dd.Node,after:Td.Node,before:Bd.Node},tb=J({kind:"pattern",collapsibleKey:"rule",keys:{rule:{},flags:{}},normalize:e=>typeof e=="string"?{rule:e}:e instanceof RegExp?e.flags?{rule:e.source,flags:e.flags}:{rule:e.source}:e,obviatesBasisDescription:!0,obviatesBasisExpression:!0,hasAssociatedError:!0,intersectionIsOpen:!0,defaults:{description:e=>`matched by ${e.rule}`},intersections:{pattern:()=>null}});class nb extends hs{instance=new RegExp(this.rule,this.flags);expression=`${this.instance}`;traverseAllows=this.instance.test.bind(this.instance);compiledCondition=`${this.expression}.test(data)`;compiledNegation=`!${this.compiledCondition}`;impliedBasis=E.intrinsic.string.internal;reduceJsonSchema(t,n){return t.pattern?n.fallback.patternIntersection({code:"patternIntersection",base:t,pattern:this.rule}):(t.pattern=this.rule,t)}}const $d={implementation:tb,Node:nb},Er=(e,t)=>{const n=rb(e);return t&&!t.includes(n)?N(`Root of kind ${n} should be one of ${t}`):n},rb=e=>{if(M(e,"root"))return e.kind;if(typeof e=="string")return e[0]==="$"?"alias":e in Je?"domain":"proto";if(typeof e=="function")return"proto";if(typeof e!="object"||e===null)return N(hc(e));if("morphs"in e)return"morph";if("branches"in e||le(e))return"union";if("unit"in e)return"unit";if("reference"in e)return"alias";const t=Object.keys(e);return t.length===0||t.some(n=>n in bd)?"intersection":"proto"in e?"proto":"domain"in e?"domain":N(hc(e))},hc=e=>`${F(e)} is not a valid type schema`,fc={},sb=e=>le(e)?e.map(t=>t.collapsibleJson):e.collapsibleJson,Ce={};E.nodesByRegisteredId=Ce;const Ud=e=>(fc[e]??=0,`${e}${++fc[e]}`),Kd=e=>{const t=fs[e.kind],n=t.applyConfig?.(e.def,e.$.resolvedConfig)??e.def,r={},{meta:s,...i}=n,o=s===void 0?{}:typeof s=="string"?{description:s}:s,a=Xu(i).sort(([l],[u])=>Rr(l)?Rr(u)?Hr(l)-Hr(u):1:Rr(u)||l<u?-1:1).filter(([l,u])=>{if(l.startsWith("meta.")){const h=l.slice(5);return o[h]=u,!1}return!0});for(const l of a){const u=l[0],h=t.keys[u];if(!h)return N(`Key ${u} is not valid on ${e.kind} schema`);const f=h.parse?h.parse(l[1],e):l[1];f!==De&&(f!==void 0||h.preserveUndefined)&&(r[u]=f)}if(t.reduce&&!e.prereduced){const l=t.reduce(r,e.$);if(l)return l instanceof I?l.throw():ob(l,o)}return Po({id:e.id,kind:e.kind,inner:r,meta:o,$:e.$})},Po=({id:e,kind:t,inner:n,meta:r,$:s,ignoreCache:i})=>{const o=fs[t],a=Xu(n),c=[];let l={};for(const[g,b]of a){const v=o.keys[g],k=v.serialize??(v.child?sb:Bt);if(l[g]=k(b),v.child===!0){const P=b;le(P)?c.push(...P):c.push(P)}else typeof v.child=="function"&&c.push(...v.child(b))}o.finalizeInnerJson&&(l=o.finalizeInnerJson(l));let u={...l},h={};Qn(r)||(h=$(r,(g,b)=>[g,g==="examples"?b:Bt(b)]),u.meta=yr(h,"description",!0)),l=yr(l,o.collapsibleKey,!1);const f=JSON.stringify({kind:t,...l});u=yr(u,o.collapsibleKey,!1);const p=yr(u,o.collapsibleKey,!0),m=JSON.stringify({kind:t,...u});if(s.nodesByHash[m]&&!i)return s.nodesByHash[m];const y={id:e,kind:t,impl:o,inner:n,innerEntries:a,innerJson:l,innerHash:f,meta:r,metaJson:h,json:u,hash:m,collapsibleJson:p,children:c};if(t!=="intersection")for(const g in n)g!=="in"&&g!=="out"&&(y[g]=n[g]);const A=new hv[t](y,s);return s.nodesByHash[m]=A},ib=(e,t)=>e.id===t?e:(ue(Ce[t])&&Y(`Unexpected attempt to overwrite node id ${t}`),Po({id:t,kind:e.kind,inner:e.inner,meta:e.meta,$:e.$,ignoreCache:!0})),ob=(e,t,n)=>Po({id:Ud(t.alias??e.kind),kind:e.kind,inner:e.inner,meta:t,$:e.$}),yr=(e,t,n)=>{const r=Object.keys(e);if(r.length===1&&r[0]===t){const s=e[t];if(n||Lt(s,"object")&&(Object.keys(s).length===1||Array.isArray(s)))return s}return e},Ii=(e,t,n)=>{if(e.key!==t.key)return null;const r=e.key;let s=ie(e.value,t.value,n);const i=e.required||t.required?"required":"optional";if(s instanceof I)if(i==="optional")s=E.intrinsic.never.internal;else return s.withPrefixKey(e.key,e.required&&t.required?"required":"optional");if(i==="required")return n.$.node("required",{key:r,value:s});const o=e.hasDefault()?t.hasDefault()?e.default===t.default?e.default:N(qd(e.default,t.default)):e.default:t.hasDefault()?t.default:De;return n.$.node("optional",{key:r,value:s,default:o})};class zd extends ln{required=this.kind==="required";optional=this.kind==="optional";impliedBasis=E.intrinsic.object.internal;serializedKey=Xn(this.key);compiledKey=typeof this.key=="string"?this.key:this.serializedKey;flatRefs=V(this.value.flatRefs.map(t=>ct([this.key,...t.path],t.node)),ct([this.key],this.value));_transform(t,n){n.path.push(this.key);const r=super._transform(t,n);return n.path.pop(),r}hasDefault(){return"default"in this.inner}traverseAllows=(t,n)=>this.key in t?Xe(this.key,()=>this.value.traverseAllows(t[this.key],n),n):this.optional;traverseApply=(t,n)=>{this.key in t?Xe(this.key,()=>this.value.traverseApply(t[this.key],n),n):this.hasKind("required")&&n.errorFromNodeContext(this.errorContext)};compile(t){t.if(`${this.serializedKey} in data`,()=>t.traverseKey(this.serializedKey,`data${t.prop(this.key)}`,this.value)),this.hasKind("required")&&t.else(()=>t.traversalKind==="Apply"?t.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`):t.return(!1)),t.traversalKind==="Allows"&&t.return(!0)}}const qd=(e,t)=>`Invalid intersection of default values ${F(e)} & ${F(t)}`,ab=J({kind:"optional",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)},default:{preserveUndefined:!0}},normalize:e=>e,reduce:(e,t)=>{if(t.resolvedConfig.exactOptionalPropertyTypes===!1&&!e.value.allows(void 0))return t.node("optional",{...e,value:e.value.or(B.undefined)},{prereduced:!0})},defaults:{description:e=>`${e.compiledKey}?: ${e.value.description}`},intersections:{optional:Ii}});class cb extends zd{constructor(...t){super(...t),"default"in this.inner&&Ro(this.value,this.inner.default,this.key)}get rawIn(){const t=super.rawIn;return this.hasDefault()?this.$.node("optional",Yu(t.inner,{default:!0}),{prereduced:!0}):t}get outProp(){if(!this.hasDefault())return this;const{default:t,...n}=this.inner;return this.cacheGetter("outProp",this.$.node("required",n,{prereduced:!0}))}expression=this.hasDefault()?`${this.compiledKey}: ${this.value.expression} = ${F(this.inner.default)}`:`${this.compiledKey}?: ${this.value.expression}`;defaultValueMorph=ub(this);defaultValueMorphRef=this.defaultValueMorph&&fe(this.defaultValueMorph)}const No={implementation:ab,Node:cb},lb={},ub=e=>{if(!e.hasDefault())return;const t=`{${e.compiledKey}: ${e.value.id} = ${Bt(e.default)}}`;return lb[t]??=Hd(e.key,e.value,e.default)},Hd=(e,t,n)=>{if(typeof n=="function")return t.includesTransform?(s,i)=>(Xe(e,()=>t(s[e]=n(),i),i),s):s=>(s[e]=n(),s);const r=t.includesTransform?t.assert(n):n;return Lt(r,"object")?(s,i)=>(Xe(e,()=>t(s[e]=n,i),i),s):s=>(s[e]=r,s)},Ro=(e,t,n)=>{const r=as(t);Lt(t,"object")&&!r&&N(db(n));const s=e.in(r?t():t);if(s instanceof ht){n===null&&N(`Default ${s.summary}`);const i=s.transform(o=>o.transform(a=>({...a,prefixPath:[n]})));N(`Default for ${i.summary}`)}return t},db=e=>`Non-primitive default ${e===null?"":typeof e=="number"?`for value at [${e}] `:`for ${Xn(e)} `}must be specified as a function like () => ({my: 'object'})`;class Zn extends Sd{constructor(t,n){super(t,n),Object.defineProperty(this,_e,{value:"root",enumerable:!1})}get rawIn(){return super.rawIn}get rawOut(){return super.rawOut}get internal(){return this}get"~standard"(){return{vendor:"arktype",version:1,validate:t=>{const n=this(t);return n instanceof ht?n:{value:n}},toJSONSchema:t=>t.target&&t.target!=="draft-2020-12"?N(`JSONSchema target '${t.target}' is not supported (must be "draft-2020-12")`):t.io==="input"?this.rawIn.toJsonSchema():this.rawOut.toJsonSchema()}}as(){return this}brand(t){return t===""?N(hb):this}readonly(){return this}branches=this.hasKind("union")?this.inner.branches:[this];distribute(t,n){const r=this.branches.map(t);return n?.(r)??r}get shortDescription(){return this.meta.description??this.defaultShortDescription}toJsonSchema(t={}){const n=wd(this.$.resolvedConfig.toJsonSchema,t);n.useRefs||=this.isCyclic;const r=typeof n.dialect=="string"?{$schema:n.dialect}:{};return Object.assign(r,this.toJsonSchemaRecurse(n)),n.useRefs&&(r.$defs=$(this.references,(s,i)=>i.isRoot()&&!i.alwaysExpandJsonSchema?[i.id,i.toResolvedJsonSchema(n)]:[])),r}toJsonSchemaRecurse(t){return t.useRefs&&!this.alwaysExpandJsonSchema?{$ref:`#/$defs/${this.id}`}:this.toResolvedJsonSchema(t)}get alwaysExpandJsonSchema(){return this.isBasis()||this.kind==="alias"||this.hasKind("union")&&this.isBoolean}toResolvedJsonSchema(t){const n=this.innerToJsonSchema(t);return Object.assign(n,this.metaJson)}intersect(t){const n=this.$.parseDefinition(t),r=this.rawIntersect(n);return r instanceof I?r:this.$.finalize(r)}rawIntersect(t){return Ze(this,t,this.$)}toNeverIfDisjoint(){return this}and(t){const n=this.intersect(t);return n instanceof I?n.throw():n}rawAnd(t){const n=this.rawIntersect(t);return n instanceof I?n.throw():n}or(t){const n=this.$.parseDefinition(t);return this.$.finalize(this.rawOr(n))}rawOr(t){const n=[...this.branches,...t.branches];return this.$.node("union",n)}map(t){return this.$.schema(this.applyStructuralOperation("map",[t]))}pick(...t){return this.$.schema(this.applyStructuralOperation("pick",t))}omit(...t){return this.$.schema(this.applyStructuralOperation("omit",t))}required(){return this.$.schema(this.applyStructuralOperation("required",[]))}partial(){return this.$.schema(this.applyStructuralOperation("partial",[]))}_keyof;keyof(){if(this._keyof)return this._keyof;const t=this.applyStructuralOperation("keyof",[]).reduce((n,r)=>n.intersect(r).toNeverIfDisjoint(),E.intrinsic.unknown.internal);return t.branches.length===0&&N(Cd(`keyof ${this.expression}`)),this._keyof=this.$.finalize(t)}get props(){return this.branches.length!==1?N(fb(this.expression)):[...this.applyStructuralOperation("props",[])[0]]}merge(t){const n=this.$.parseDefinition(t);return this.$.schema(n.distribute(r=>this.applyStructuralOperation("merge",[pc(r)??N(mc("merge",r.expression))])))}applyStructuralOperation(t,n){return this.distribute(r=>{if(r.equals(E.intrinsic.object)&&t!=="merge")return r;const s=pc(r);if(s||N(mc(t,r.expression)),t==="keyof")return s.keyof();if(t==="get")return s.get(...n);if(t==="props")return s.props;const i=t==="required"?"require":t==="partial"?"optionalize":t;return this.$.node("intersection",{domain:"object",structure:s[i](...n)})})}get(...t){return t[0]===void 0?this:this.$.schema(this.applyStructuralOperation("get",t))}extract(t){const n=this.$.parseDefinition(t);return this.$.schema(this.branches.filter(r=>r.extends(n)))}exclude(t){const n=this.$.parseDefinition(t);return this.$.schema(this.branches.filter(r=>!r.extends(n)))}array(){return this.$.schema(this.isUnknown()?{proto:Array}:{proto:Array,sequence:this},{prereduced:!0})}overlaps(t){return!(this.intersect(t)instanceof I)}extends(t){const n=this.intersect(t);return!(n instanceof I)&&this.equals(n)}ifExtends(t){return this.extends(t)?this:void 0}subsumes(t){return this.$.parseDefinition(t).extends(this)}configure(t,n="shallow"){return this.configureReferences(t,n)}describe(t,n="shallow"){return this.configure({description:t},n)}optional(){return[this,"?"]}default(t){return Ro(this,t,null),[this,"=",t]}from(t){return this.assert(t)}_pipe(...t){const n=t.reduce((r,s)=>r.rawPipeOnce(s),this);return this.$.finalize(n)}tryPipe(...t){const n=t.reduce((r,s)=>r.rawPipeOnce(M(s,"root")?s:((i,o)=>{try{return s(i,o)}catch(a){return o.error({code:"predicate",predicate:s,actual:`aborted due to error:
    ${a}
`})}})),this);return this.$.finalize(n)}pipe=Object.assign(this._pipe.bind(this),{try:this.tryPipe.bind(this)});to(t){return this.$.finalize(this.toNode(this.$.parseDefinition(t)))}toNode(t){const n=Ri(this,t,this.$);return n instanceof I?n.throw():n}rawPipeOnce(t){return M(t,"root")?this.toNode(t):this.distribute(n=>n.hasKind("morph")?this.$.node("morph",{in:n.inner.in,morphs:[...n.morphs,t]}):this.$.node("morph",{in:n,morphs:[t]}),this.$.parseSchema)}narrow(t){return this.constrainOut("predicate",t)}constrain(t,n){return this._constrain("root",t,n)}constrainIn(t,n){return this._constrain("in",t,n)}constrainOut(t,n){return this._constrain("out",t,n)}_constrain(t,n,r){const s=this.$.node(n,r);if(s.isRoot())return s.isUnknown()?this:Y(`Unexpected constraint node ${s}`);const i=t==="root"?this:t==="in"?this.rawIn:this.rawOut;if(i.hasKind("morph")||s.impliedBasis&&!i.extends(s.impliedBasis))return wx(n,s.impliedBasis,this);const o=this.$.node("intersection",{[s.kind]:s}),a=t==="out"?Ri(this,o,this.$):Ze(this,o,this.$);return a instanceof I&&a.throw(),this.$.finalize(a)}onUndeclaredKey(t){const n=typeof t=="string"?t:t.rule,r=typeof t=="string"?!1:t.deep;return this.$.finalize(this.transform((s,i)=>s==="structure"?n==="ignore"?Yu(i,{undeclared:1}):{...i,undeclared:n}:i,r?void 0:{shouldTransform:s=>!it(ls,s.kind)}))}hasEqualMorphs(t){return!this.includesTransform&&!t.includesTransform?!0:!(!tn(this.shallowMorphs,t.shallowMorphs)||!tn(this.flatMorphs,t.flatMorphs,{isEqual:(n,r)=>n.propString===r.propString&&(n.node.hasKind("morph")&&r.node.hasKind("morph")?n.node.hasEqualMorphs(r.node):n.node.hasKind("intersection")&&r.node.hasKind("intersection")?n.node.structure?.structuralMorphRef===r.node.structure?.structuralMorphRef:!1)}))}onDeepUndeclaredKey(t){return this.onUndeclaredKey({rule:t,deep:!0})}filter(t){return this.constrainIn("predicate",t)}divisibleBy(t){return this.constrain("divisor",t)}matching(t){return this.constrain("pattern",t)}atLeast(t){return this.constrain("min",t)}atMost(t){return this.constrain("max",t)}moreThan(t){return this.constrain("min",Vt(t))}lessThan(t){return this.constrain("max",Vt(t))}atLeastLength(t){return this.constrain("minLength",t)}atMostLength(t){return this.constrain("maxLength",t)}moreThanLength(t){return this.constrain("minLength",Vt(t))}lessThanLength(t){return this.constrain("maxLength",Vt(t))}exactlyLength(t){return this.constrain("exactLength",t)}atOrAfter(t){return this.constrain("after",t)}atOrBefore(t){return this.constrain("before",t)}laterThan(t){return this.constrain("after",Vt(t))}earlierThan(t){return this.constrain("before",Vt(t))}}const hb="Expected a non-empty brand name after #",Vt=e=>typeof e=="object"&&!(e instanceof Date)?{...e,exclusive:!0}:{rule:e,exclusive:!0},xr=(e,t)=>M(t,"root")?M(e,"root")?e.extends(t):t.allows(e):M(e,"root")?e.hasUnit(t):t===e,pc=e=>e.hasKind("morph")?null:e.hasKind("intersection")?e.inner.structure??(e.basis?.domain==="object"?e.$.bindReference(E.intrinsic.emptyStructure):null):e.isBasis()&&e.domain==="object"?e.$.bindReference(E.intrinsic.emptyStructure):null,fb=e=>`Props cannot be extracted from a union. Use .distribute to extract props from each branch instead. Received:
${e}`,mc=(e,t)=>`${e} operand must be an object (was ${t})`,Yn=(e,t)=>$(ko(e),(n,r)=>[r,t]),pb=e=>typeof e=="string"?{reference:e}:e,Ac=e=>e instanceof I?E.intrinsic.never.internal:e,mb=J({kind:"alias",hasAssociatedError:!1,collapsibleKey:"reference",keys:{reference:{serialize:e=>e.startsWith("$")?e:`$ark.${e}`},resolve:{}},normalize:pb,defaults:{description:e=>e.reference},intersections:{alias:(e,t,n)=>n.$.lazilyResolve(()=>Ac(ie(e.resolution,t.resolution,n)),`${e.reference}${n.pipe?"=>":"&"}${t.reference}`),...Yn("alias",(e,t,n)=>t.isUnknown()?e:t.isNever()?t:t.isBasis()&&!t.overlaps(E.intrinsic.object)?I.init("assignability",E.intrinsic.object,t):n.$.lazilyResolve(()=>Ac(ie(e.resolution,t,n)),`${e.reference}${n.pipe?"=>":"&"}${t.id}`))}});class Ab extends Zn{expression=this.reference;structure=void 0;get resolution(){const t=this._resolve();return Ce[this.id]=t}_resolve(){if(this.resolve)return this.resolve();if(this.reference[0]==="$")return this.$.resolveRoot(this.reference.slice(1));const t=this.reference;let n=Ce[t];const r=[];for(;M(n,"context");){if(r.includes(n.id))return N(gb(n.id,r));r.push(n.id),n=Ce[n.id]}return M(n,"root")?n:Y(`Unexpected resolution for reference ${this.reference}
Seen: [${r.join("->")}] 
Resolution: ${F(n)}`)}get resolutionId(){if(this.reference.includes("&")||this.reference.includes("=>"))return this.resolution.id;if(this.reference[0]!=="$")return this.reference;const t=this.reference.slice(1),n=this.$.resolutions[t];return typeof n=="string"?n:M(n,"root")?n.id:Y(`Unexpected resolution for reference ${this.reference}: ${F(n)}`)}get defaultShortDescription(){return Je.object}innerToJsonSchema(t){return this.resolution.toJsonSchemaRecurse(t)}traverseAllows=(t,n)=>{const r=n.seen[this.reference];return r?.includes(t)?!0:(n.seen[this.reference]=V(r,t),this.resolution.traverseAllows(t,n))};traverseApply=(t,n)=>{const r=n.seen[this.reference];r?.includes(t)||(n.seen[this.reference]=V(r,t),this.resolution.traverseApply(t,n))};compile(t){const n=this.resolutionId;t.if(`ctx.seen.${n} && ctx.seen.${n}.includes(data)`,()=>t.return(!0)),t.if(`!ctx.seen.${n}`,()=>t.line(`ctx.seen.${n} = []`)),t.line(`ctx.seen.${n}.push(data)`),t.return(t.invoke(n))}}const gb=(e,t)=>`Alias '${e}' has a shallow resolution cycle: ${[...t,e].join("->")}`,Eo={implementation:mb,Node:Ab};class Io extends Zn{traverseApply=(t,n)=>{this.traverseAllows(t,n)||n.errorFromNodeContext(this.errorContext)};get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return ds(this.errorContext)}compile(t){t.traversalKind==="Allows"?t.return(this.compiledCondition):t.if(this.compiledNegation,()=>t.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}}const yb=J({kind:"domain",hasAssociatedError:!0,collapsibleKey:"domain",keys:{domain:{},numberAllowsNaN:{}},normalize:e=>typeof e=="string"?{domain:e}:yo(e,"numberAllowsNaN")&&e.domain!=="number"?N(jo.writeBadAllowNanMessage(e.domain)):e,applyConfig:(e,t)=>e.numberAllowsNaN===void 0&&e.domain==="number"&&t.numberAllowsNaN?{...e,numberAllowsNaN:!0}:e,defaults:{description:e=>Je[e.domain],actual:e=>Number.isNaN(e)?"NaN":Je[Te(e)]},intersections:{domain:(e,t)=>e.domain==="number"&&t.domain==="number"?e.numberAllowsNaN?t:e:I.init("domain",e,t)}});class xb extends Io{requiresNaNCheck=this.domain==="number"&&!this.numberAllowsNaN;traverseAllows=this.requiresNaNCheck?t=>typeof t=="number"&&!Number.isNaN(t):t=>Te(t)===this.domain;compiledCondition=this.domain==="object"?'((typeof data === "object" && data !== null) || typeof data === "function")':`typeof data === "${this.domain}"${this.requiresNaNCheck?" && !Number.isNaN(data)":""}`;compiledNegation=this.domain==="object"?'((typeof data !== "object" || data === null) && typeof data !== "function")':`typeof data !== "${this.domain}"${this.requiresNaNCheck?" || Number.isNaN(data)":""}`;expression=this.numberAllowsNaN?"number | NaN":this.domain;get nestableExpression(){return this.numberAllowsNaN?`(${this.expression})`:this.expression}get defaultShortDescription(){return Je[this.domain]}innerToJsonSchema(t){return this.domain==="bigint"||this.domain==="symbol"?t.fallback.domain({code:"domain",base:{},domain:this.domain}):{type:this.domain}}}const jo={implementation:yb,Node:xb,writeBadAllowNanMessage:e=>`numberAllowsNaN may only be specified with domain "number" (was ${e})`},bb=J({kind:"intersection",hasAssociatedError:!0,normalize:e=>{if(ue(e))return e;const{structure:t,...n}=e,r=!!t,s=t??{},i=$(n,(o,a)=>ze(o,lx)?(r&&N(`Flattened structure key ${o} cannot be specified alongside a root 'structure' key.`),s[o]=a,[]):[o,a]);return(M(s,"constraint")||!Qn(s))&&(i.structure=s),i},finalizeInnerJson:({structure:e,...t})=>Lt(e,"object")?{...e,...t}:t,keys:{domain:{child:!0,parse:(e,t)=>t.$.node("domain",e)},proto:{child:!0,parse:(e,t)=>t.$.node("proto",e)},structure:{child:!0,parse:(e,t)=>t.$.node("structure",e),serialize:e=>{if(!e.sequence?.minLength)return e.collapsibleJson;const{sequence:t,...n}=e.collapsibleJson,{minVariadicLength:r,...s}=t,i=s.variadic&&Object.keys(s).length===1?s.variadic:s;return{...n,sequence:i}}},divisor:{child:!0,parse:me("divisor")},max:{child:!0,parse:me("max")},min:{child:!0,parse:me("min")},maxLength:{child:!0,parse:me("maxLength")},minLength:{child:!0,parse:me("minLength")},exactLength:{child:!0,parse:me("exactLength")},before:{child:!0,parse:me("before")},after:{child:!0,parse:me("after")},pattern:{child:!0,parse:me("pattern")},predicate:{child:!0,parse:me("predicate")}},reduce:(e,t)=>gc({},e,{$:t,invert:!1,pipe:!1}),defaults:{description:e=>{if(e.children.length===0)return"unknown";if(e.structure)return e.structure.description;const t=[];if(e.basis&&!e.prestructurals.some(n=>n.impl.obviatesBasisDescription)&&t.push(e.basis.description),e.prestructurals.length){const n=e.prestructurals.toSorted((r,s)=>r.kind==="min"&&s.kind==="max"?-1:0).map(r=>r.description);t.push(...n)}return e.inner.predicate&&t.push(...e.inner.predicate.map(n=>n.description)),t.join(" and ")},expected:e=>`   ${e.errors.map(t=>t.expected).join(`
   `)}`,problem:e=>`(${e.actual}) must be...
${e.expected}`},intersections:{intersection:(e,t,n)=>gc(e.inner,t.inner,n),...Yn("intersection",(e,t,n)=>{if(e.children.length===0)return t;const{domain:r,proto:s,...i}=e.inner,o=s??r,a=o?ie(o,t,n):t;return a instanceof I?a:e?.basis?.equals(a)?e:e.$.node("intersection",{...i,[a.kind]:a},{prereduced:!0})})}});class vb extends Zn{basis=this.inner.domain??this.inner.proto??null;prestructurals=[];refinements=this.children.filter(t=>t.isRefinement()?(it(yd,t.kind)&&this.prestructurals.push(t),!0):!1);structure=this.inner.structure;expression=wb(this);get shallowMorphs(){return this.inner.structure?.structuralMorph?[this.inner.structure.structuralMorph]:[]}get defaultShortDescription(){return this.basis?.defaultShortDescription??"present"}innerToJsonSchema(t){return this.children.reduce((n,r)=>r.isBasis()?r.toJsonSchemaRecurse(t):r.reduceJsonSchema(n,t),{})}traverseAllows=(t,n)=>this.children.every(r=>r.traverseAllows(t,n));traverseApply=(t,n)=>{const r=n.currentErrorCount;if(!(this.basis&&(this.basis.traverseApply(t,n),n.currentErrorCount>r))){if(this.prestructurals.length){for(let s=0;s<this.prestructurals.length-1;s++)if(this.prestructurals[s].traverseApply(t,n),n.failFast&&n.currentErrorCount>r)return;if(this.prestructurals.at(-1).traverseApply(t,n),n.currentErrorCount>r)return}if(!(this.structure&&(this.structure.traverseApply(t,n),n.currentErrorCount>r))&&this.inner.predicate){for(let s=0;s<this.inner.predicate.length-1;s++)if(this.inner.predicate[s].traverseApply(t,n),n.failFast&&n.currentErrorCount>r)return;this.inner.predicate.at(-1).traverseApply(t,n)}}};compile(t){if(t.traversalKind==="Allows"){for(const n of this.children)t.check(n);t.return(!0);return}if(t.initializeErrorCount(),this.basis&&(t.check(this.basis),this.children.length>1&&t.returnIfFail()),this.prestructurals.length){for(let n=0;n<this.prestructurals.length-1;n++)t.check(this.prestructurals[n]),t.returnIfFailFast();t.check(this.prestructurals.at(-1)),(this.structure||this.inner.predicate)&&t.returnIfFail()}if(this.structure&&(t.check(this.structure),this.inner.predicate&&t.returnIfFail()),this.inner.predicate){for(let n=0;n<this.inner.predicate.length-1;n++)t.check(this.inner.predicate[n]),t.returnIfFail();t.check(this.inner.predicate.at(-1))}}}const Wd={implementation:bb,Node:vb},wb=e=>{if(e.structure?.expression)return e.structure.expression;const t=e.basis&&!e.prestructurals.some(s=>s.impl.obviatesBasisExpression)?e.basis.nestableExpression:"",n=e.prestructurals.map(s=>s.expression).join(" & "),r=`${t}${t?" ":""}${n}`;return r==="Array == 0"?"[]":r||"unknown"},gc=(e,t,n)=>{const r={},s=e.proto??e.domain,i=t.proto??t.domain,o=s?i?ie(s,i,n):s:i;return o instanceof I?o:(o&&(r[o.kind]=o),Wr({kind:"intersection",baseInner:r,l:Qr(e),r:Qr(t),roots:[],ctx:n}))},Sb=J({kind:"morph",hasAssociatedError:!1,keys:{in:{child:!0,parse:(e,t)=>t.$.parseSchema(e)},morphs:{parse:Wn,serialize:e=>e.map(t=>M(t,"root")?t.json:fe(t))},declaredIn:{child:!1,serialize:e=>e.json},declaredOut:{child:!1,serialize:e=>e.json}},normalize:e=>e,defaults:{description:e=>`a morph from ${e.rawIn.description} to ${e.rawOut?.description??"unknown"}`},intersections:{morph:(e,t,n)=>{if(!e.hasEqualMorphs(t))return N(Cb(e.expression,t.expression));const r=ie(e.rawIn,t.rawIn,n);if(r instanceof I)return r;const s={morphs:e.morphs};if(e.declaredIn||t.declaredIn){const i=ie(e.rawIn,t.rawIn,n);if(i instanceof I)return i.throw();s.declaredIn=i}if(e.declaredOut||t.declaredOut){const i=ie(e.rawOut,t.rawOut,n);if(i instanceof I)return i.throw();s.declaredOut=i}return r.distribute(i=>n.$.node("morph",{...s,in:i}),n.$.parseSchema)},...Yn("morph",(e,t,n)=>{const r=e.inner.in?ie(e.inner.in,t,n):t;return r instanceof I?r:r.equals(e.inner.in)?e:n.$.node("morph",{...e.inner,in:r})})}});class kb extends Zn{serializedMorphs=this.morphs.map(fe);compiledMorphs=`[${this.serializedMorphs}]`;lastMorph=this.inner.morphs.at(-1);lastMorphIfNode=M(this.lastMorph,"root")?this.lastMorph:void 0;introspectableIn=this.inner.in;introspectableOut=this.lastMorphIfNode?Object.assign(this.referencesById,this.lastMorphIfNode.referencesById)&&this.lastMorphIfNode.rawOut:void 0;get shallowMorphs(){return Array.isArray(this.inner.in?.shallowMorphs)?[...this.inner.in.shallowMorphs,...this.morphs]:this.morphs}get rawIn(){return this.declaredIn??this.inner.in?.rawIn??E.intrinsic.unknown.internal}get rawOut(){return this.declaredOut??this.introspectableOut??E.intrinsic.unknown.internal}declareIn(t){return this.$.node("morph",{...this.inner,declaredIn:t})}declareOut(t){return this.$.node("morph",{...this.inner,declaredOut:t})}expression=`(In: ${this.rawIn.expression}) => ${this.lastMorphIfNode?"To":"Out"}<${this.rawOut.expression}>`;get defaultShortDescription(){return this.rawIn.meta.description??this.rawIn.defaultShortDescription}innerToJsonSchema(t){return t.fallback.morph({code:"morph",base:this.rawIn.toJsonSchemaRecurse(t),out:this.introspectableOut?.toJsonSchemaRecurse(t)??null})}compile(t){if(t.traversalKind==="Allows"){if(!this.introspectableIn)return;t.return(t.invoke(this.introspectableIn));return}this.introspectableIn&&t.line(t.invoke(this.introspectableIn)),t.line(`ctx.queueMorphs(${this.compiledMorphs})`)}traverseAllows=(t,n)=>!this.introspectableIn||this.introspectableIn.traverseAllows(t,n);traverseApply=(t,n)=>{this.introspectableIn&&this.introspectableIn.traverseApply(t,n),n.queueMorphs(this.morphs)};hasEqualMorphs(t){return tn(this.morphs,t.morphs,{isEqual:(n,r)=>n===r||M(n,"root")&&M(r,"root")&&n.equals(r)})}}const Qd={implementation:Sb,Node:kb},Cb=(e,t)=>`The intersection of distinct morphs at a single path is indeterminate:
Left: ${e}
Right: ${t}`,Pb=J({kind:"proto",hasAssociatedError:!0,collapsibleKey:"proto",keys:{proto:{serialize:e=>bo(e)??Bt(e)},dateAllowsInvalid:{}},normalize:e=>{const t=typeof e=="string"?{proto:rn[e]}:typeof e=="function"?ue(e)?e:{proto:e}:typeof e.proto=="string"?{...e,proto:rn[e.proto]}:e;return typeof t.proto!="function"&&N(Jr.writeInvalidSchemaMessage(t.proto)),yo(t,"dateAllowsInvalid")&&t.proto!==Date&&N(Jr.writeBadInvalidDateMessage(t.proto)),t},applyConfig:(e,t)=>e.dateAllowsInvalid===void 0&&e.proto===Date&&t.dateAllowsInvalid?{...e,dateAllowsInvalid:!0}:e,defaults:{description:e=>e.builtinName?ky[e.builtinName]:`an instance of ${e.proto.name}`,actual:e=>e instanceof Date&&e.toString()==="Invalid Date"?"an invalid Date":vi(e)},intersections:{proto:(e,t)=>e.proto===Date&&t.proto===Date?e.dateAllowsInvalid?t:e:sc(e.proto,t.proto)?e:sc(t.proto,e.proto)?t:I.init("proto",e,t),domain:(e,t)=>t.domain==="object"?e:I.init("domain",E.intrinsic.object.internal,t)}});class Nb extends Io{builtinName=bo(this.proto);serializedConstructor=this.json.proto;requiresInvalidDateCheck=this.proto===Date&&!this.dateAllowsInvalid;traverseAllows=this.requiresInvalidDateCheck?t=>t instanceof Date&&t.toString()!=="Invalid Date":t=>t instanceof this.proto;compiledCondition=`data instanceof ${this.serializedConstructor}${this.requiresInvalidDateCheck?' && data.toString() !== "Invalid Date"':""}`;compiledNegation=`!(${this.compiledCondition})`;innerToJsonSchema(t){switch(this.builtinName){case"Array":return{type:"array"};case"Date":return t.fallback.date?.({code:"date",base:{}})??t.fallback.proto({code:"proto",base:{},proto:this.proto});default:return t.fallback.proto({code:"proto",base:{},proto:this.proto})}}expression=this.dateAllowsInvalid?"Date | InvalidDate":this.proto.name;get nestableExpression(){return this.dateAllowsInvalid?`(${this.expression})`:this.expression}domain="object";get defaultShortDescription(){return this.description}}const Jr={implementation:Pb,Node:Nb,writeBadInvalidDateMessage:e=>`dateAllowsInvalid may only be specified with constructor Date (was ${e.name})`,writeInvalidSchemaMessage:e=>`instanceOf operand must be a function (was ${Te(e)})`},Rb=J({kind:"union",hasAssociatedError:!0,collapsibleKey:"branches",keys:{ordered:{},branches:{child:!0,parse:(e,t)=>{const n=[];for(const r of e){const s=M(r,"root")?r.branches:t.$.parseSchema(r).branches;for(const i of s)if(i.hasKind("morph")){const o=n.findIndex(a=>a.hasKind("morph")&&a.hasEqualMorphs(i));if(o===-1)n.push(i);else{const a=n[o];n[o]=t.$.node("morph",{...a.inner,in:a.rawIn.rawOr(i.rawIn)})}}else n.push(i)}return t.def.ordered||n.sort((r,s)=>r.hash<s.hash?-1:1),n}}},normalize:e=>le(e)?{branches:e}:e,reduce:(e,t)=>{const n=Vb(e);if(n.length===1)return n[0];if(n.length!==e.branches.length)return t.node("union",{...e,branches:n},{prereduced:!0})},defaults:{description:e=>e.distribute(t=>t.description,Jt),expected:e=>{const t=ly(e.errors,"propString"),n=Object.entries(t).map(([r,s])=>{const i=[];for(const c of s)It(i,c.expected);const o=Jt(i),a=s.every(c=>c.actual===s[0].actual)?s[0].actual:F(s[0].data);return`${r&&`${r} `}must be ${o}${a&&` (was ${a})`}`});return Jt(n)},problem:e=>e.expected,message:e=>e.problem[0]==="["?`value at ${e.problem}`:e.problem},intersections:{union:(e,t,n)=>{if(e.isNever!==t.isNever)return I.init("presence",e,t);let r;return e.ordered?(t.ordered&&N(Ub(e.expression,t.expression)),r=Fs(t.branches,e.branches,n),r instanceof I&&r.invert()):r=Fs(e.branches,t.branches,n),r instanceof I?r:n.$.parseSchema(e.ordered||t.ordered?{branches:r,ordered:!0}:{branches:r})},...Yn("union",(e,t,n)=>{const r=Fs(e.branches,[t],n);return r instanceof I?r:r.length===1?r[0]:n.$.parseSchema(e.ordered?{branches:r,ordered:!0}:{branches:r})})}});class Eb extends Zn{isBoolean=this.branches.length===2&&this.branches[0].hasUnit(!1)&&this.branches[1].hasUnit(!0);get branchGroups(){const t=[];let n=-1;for(const r of this.branches){if(r.hasKind("unit")&&r.domain==="boolean"){n===-1?(n=t.length,t.push(r)):t[n]=E.intrinsic.boolean;continue}t.push(r)}return t}unitBranches=this.branches.filter(t=>t.rawIn.hasKind("unit"));discriminant=this.discriminate();discriminantJson=this.discriminant?Lb(this.discriminant):null;expression=this.distribute(t=>t.nestableExpression,Fb);createBranchedOptimisticRootApply(){return(t,n)=>{const r=this.traverseOptimistic(t);if(r!==De)return r;const s=new Ut(t,this.$.resolvedConfig);return this.traverseApply(t,s),s.finalize(n)}}get shallowMorphs(){return this.branches.reduce((t,n)=>It(t,n.shallowMorphs),[])}get defaultShortDescription(){return this.distribute(t=>t.defaultShortDescription,Jt)}innerToJsonSchema(t){if(this.branchGroups.length===1&&this.branchGroups[0].equals(E.intrinsic.boolean))return{type:"boolean"};const n=this.branchGroups.map(r=>r.toJsonSchemaRecurse(t));return n.every(r=>Object.keys(r).length===1&&yo(r,"const"))?{enum:n.map(r=>r.const)}:{anyOf:n}}traverseAllows=(t,n)=>this.branches.some(r=>r.traverseAllows(t,n));traverseApply=(t,n)=>{const r=[];for(let s=0;s<this.branches.length;s++){if(n.pushBranch(),this.branches[s].traverseApply(t,n),!n.hasError())return this.branches[s].includesTransform?n.queuedMorphs.push(...n.popBranch().queuedMorphs):n.popBranch();r.push(n.popBranch().error)}n.errorFromNodeContext({code:"union",errors:r,meta:this.meta})};traverseOptimistic=t=>{for(let n=0;n<this.branches.length;n++){const r=this.branches[n];if(r.traverseAllows(t))return r.contextFreeMorph?r.contextFreeMorph(t):t}return De};compile(t){if(!this.discriminant||this.unitBranches.length===this.branches.length&&this.branches.length===2)return this.compileIndiscriminable(t);let n=this.discriminant.optionallyChainedPropString;this.discriminant.kind==="domain"&&(n=`typeof ${n} === "object" ? ${n} === null ? "null" : "object" : typeof ${n} === "function" ? "object" : typeof ${n}`);const r=this.discriminant.cases,s=Object.keys(r),{optimistic:i}=t;if(t.optimistic=!1,t.block(`switch(${n})`,()=>{for(const u in r){const h=r[u],f=u==="default"?u:`case ${u}`;let p;h===!0?p=i?"data":"true":i?h.rootApplyStrategy==="branchedOptimistic"?p=t.invoke(h,{kind:"Optimistic"}):h.contextFreeMorph?p=`${t.invoke(h)} ? ${fe(h.contextFreeMorph)}(data) : "${De}"`:p=`${t.invoke(h)} ? data : "${De}"`:p=t.invoke(h),t.line(`${f}: return ${p}`)}return t}),t.traversalKind==="Allows"){t.return(i?`"${De}"`:!1);return}const o=Jt(this.discriminant.kind==="domain"?s.map(u=>{const h=u.slice(1,-1);return h==="function"?Je.object:Je[h]}):s),a=this.discriminant.path.map(u=>typeof u=="symbol"?fe(u):JSON.stringify(u)),c=JSON.stringify(o),l=this.discriminant.kind==="domain"?`${Bb}[${n}]`:`${Db}(${n})`;t.line(`ctx.errorFromNodeContext({
	code: "predicate",
	expected: ${c},
	actual: ${l},
	relativePath: [${a}],
	meta: ${this.compiledMeta}
})`)}compileIndiscriminable(t){if(t.traversalKind==="Apply"){t.const("errors","[]");for(const n of this.branches)t.line("ctx.pushBranch()").line(t.invoke(n)).if("!ctx.hasError()",()=>t.return(n.includesTransform?"ctx.queuedMorphs.push(...ctx.popBranch().queuedMorphs)":"ctx.popBranch()")).line("errors.push(ctx.popBranch().error)");t.line(`ctx.errorFromNodeContext({ code: "union", errors, meta: ${this.compiledMeta} })`)}else{const{optimistic:n}=t;t.optimistic=!1;for(const r of this.branches)t.if(`${t.invoke(r)}`,()=>t.return(n?r.contextFreeMorph?`${fe(r.contextFreeMorph)}(data)`:"data":!0));t.return(n?`"${De}"`:!1)}}get nestableExpression(){return this.isBoolean?"boolean":`(${this.expression})`}discriminate(){if(this.branches.length<2||this.isCyclic)return null;if(this.unitBranches.length===this.branches.length){const i=$(this.unitBranches,(o,a)=>[`${a.rawIn.serializedValue}`,a.hasKind("morph")?a:!0]);return{kind:"unit",path:[],optionallyChainedPropString:"data",cases:i}}const t=[];for(let i=0;i<this.branches.length-1;i++){const o=this.branches[i];for(let a=i+1;a<this.branches.length;a++){const c=this.branches[a],l=Ze(o.rawIn,c.rawIn,o.$);if(l instanceof I)for(const u of l){if(!u.kind||u.optional)continue;let h,f;if(u.kind==="domain"){const m=u.l,y=u.r;h=`"${typeof m=="string"?m:m.domain}"`,f=`"${typeof y=="string"?y:y.domain}"`}else if(u.kind==="unit")h=u.l.serializedValue,f=u.r.serializedValue;else continue;const p=t.find(m=>tn(m.path,u.path)&&m.kind===u.kind);p?(p.cases[h]?p.cases[h].branchIndices=It(p.cases[h].branchIndices,i):p.cases[h]??={branchIndices:[i],condition:u.l},p.cases[f]?p.cases[f].branchIndices=It(p.cases[f].branchIndices,a):p.cases[f]??={branchIndices:[a],condition:u.r}):t.push({kind:u.kind,cases:{[h]:{branchIndices:[i],condition:u.l},[f]:{branchIndices:[a],condition:u.r}},path:u.path})}}}const n=this.ordered?Mb(t,this.branches):t;if(!n.length)return null;const r=Ib(n,this),s={};for(const i in r.best.cases){const o=jb(r,i);if(o===null){s[i]=!0;continue}if(o.length===this.branches.length)return null;this.ordered&&o.sort((l,u)=>l.originalIndex-u.originalIndex);const a=o.map(l=>l.branch),c=a.length===1?a[0]:this.$.node("union",this.ordered?{branches:a,ordered:!0}:a);Object.assign(this.referencesById,c.referencesById),s[i]=c}if(r.defaultEntries.length){const i=r.defaultEntries.map(o=>o.branch);s.default=this.$.node("union",this.ordered?{branches:i,ordered:!0}:i,{prereduced:!0}),Object.assign(this.referencesById,s.default.referencesById)}return Object.assign(r.location,{cases:s})}}const Ib=(e,t)=>{const r=e.sort((o,a)=>o.path.length===a.path.length?Object.keys(a.cases).length-Object.keys(o.cases).length:o.path.length-a.path.length)[0],s={kind:r.kind,path:r.path,optionallyChainedPropString:Gd(r.path)},i=t.branches.map((o,a)=>({originalIndex:a,branch:o}));return{best:r,location:s,defaultEntries:i,node:t}},jb=(e,t)=>{const n=e.best.cases[t],r=Tb(n.condition,e.location.path,e.node.$);let s=[];const i=[];for(let o=0;o<e.defaultEntries.length;o++){const a=e.defaultEntries[o];if(n.branchIndices.includes(a.originalIndex)){const c=yc(e.node.branches[a.originalIndex],e.location);c===null?s=null:s?.push({originalIndex:a.originalIndex,branch:c})}else if(a.branch.hasKind("alias")&&r.hasKind("domain")&&r.domain==="object")s?.push(a);else{if(a.branch.rawIn.overlaps(r)){const c=yc(a.branch,e.location);s?.push({originalIndex:a.originalIndex,branch:c})}i.push(a)}}return e.defaultEntries=i,s},Mb=(e,t)=>e.filter(r=>{const s=Object.values(r.cases).map(i=>i.branchIndices);for(let i=0;i<s.length-1;i++){const o=s[i];for(let a=i+1;a<s.length;a++){const c=s[a];for(const l of o)for(const u of c)if(l>u&&t[l].overlaps(t[u]))return!1}}return!0}),Tb=(e,t,n)=>{let r=e==="undefined"?n.node("unit",{unit:void 0}):e==="null"?n.node("unit",{unit:null}):e==="boolean"?n.units([!0,!1]):e;for(let s=t.length-1;s>=0;s--){const i=t[s];r=n.node("intersection",typeof i=="number"?{proto:"Array",sequence:[...ay(i).map(o=>({})),r]}:{domain:"object",required:[{key:i,value:r}]})}return r},Gd=e=>e.reduce((t,n)=>t+md(n,!0),"data"),Bb=fe(uy),Db=fe(F),Jd={implementation:Rb,Node:Eb},Lb=e=>({kind:e.kind,path:e.path.map(t=>typeof t=="string"?t:Xn(t)),cases:$(e.cases,(t,n)=>[t,n===!0?n:n.hasKind("union")&&n.discriminantJson?n.discriminantJson:n.json])}),Ob={delimiter:" | ",finalDelimiter:" | "},Fb=e=>Jt(e,Ob),Jt=(e,t)=>{const n=t?.delimiter??", ",r=t?.finalDelimiter??" or ";if(e.length===0)return"never";if(e.length===1)return e[0];if(e.length===2&&e[0]==="false"&&e[1]==="true"||e[0]==="true"&&e[1]==="false")return"boolean";const s={},i=e.filter(a=>s[a]?!1:s[a]=!0),o=i.pop();return`${i.join(n)}${i.length?r:""}${o}`},Fs=(e,t,n)=>{const r=t.map(()=>[]);for(let i=0;i<e.length;i++){let o={};for(let a=0;a<t.length;a++){if(r[a]===null)continue;if(e[i].equals(t[a])){r[a]=null,o={};break}const c=ie(e[i],t[a],n);if(!(c instanceof I)){if(c.equals(e[i])){r[a].push(e[i]),o={};break}c.equals(t[a])?r[a]=null:o[a]=c}}for(const a in o)r[a][i]=o[a]}const s=r.flatMap((i,o)=>i?.flatMap(a=>a.branches)??t[o]);return s.length===0?I.init("union",e,t):s},Vb=({branches:e,ordered:t})=>{if(e.length<2)return e;const n=e.map(()=>!0);for(let r=0;r<e.length;r++)for(let s=r+1;s<e.length&&n[r]&&n[s];s++){if(e[r].equals(e[s])){n[s]=!1;continue}const i=Ze(e[r].rawIn,e[s].rawIn,e[0].$);i instanceof I||(t||$b(e[r],e[s]),i.equals(e[r].rawIn)?n[r]=!!t:i.equals(e[s].rawIn)&&(n[s]=!1))}return e.filter((r,s)=>n[s])},$b=(e,t)=>{!e.includesTransform&&!t.includesTransform||(tn(e.shallowMorphs,t.shallowMorphs)||N(xc(e.expression,t.expression)),tn(e.flatMorphs,t.flatMorphs,{isEqual:(n,r)=>n.propString===r.propString&&(n.node.hasKind("morph")&&r.node.hasKind("morph")?n.node.hasEqualMorphs(r.node):n.node.hasKind("intersection")&&r.node.hasKind("intersection")?n.node.structure?.structuralMorphRef===r.node.structure?.structuralMorphRef:!1)})||N(xc(e.expression,t.expression)))},yc=(e,t)=>e.transform((n,r)=>n==="domain"||n==="unit"?null:r,{shouldTransform:(n,r)=>{const s=Gd(r.path);return t.optionallyChainedPropString.startsWith(s)?n.hasKind("domain")&&n.domain==="object"||(n.hasKind("domain")||t.kind==="unit")&&s===t.optionallyChainedPropString?!0:n.children.length!==0&&n.kind!=="index":!1}}),xc=(e,t)=>`An unordered union of a type including a morph and a type with overlapping input is indeterminate:
Left: ${e}
Right: ${t}`,Ub=(e,t)=>`The intersection of two ordered unions is indeterminate:
Left: ${e}
Right: ${t}`,Kb=J({kind:"unit",hasAssociatedError:!0,keys:{unit:{preserveUndefined:!0,serialize:e=>e instanceof Date?e.toISOString():Bt(e)}},normalize:e=>e,defaults:{description:e=>F(e.unit),problem:({expected:e,actual:t})=>`${e===t?`must be reference equal to ${e} (serialized to the same value)`:`must be ${e} (was ${t})`}`},intersections:{unit:(e,t)=>I.init("unit",e,t),...Yn("unit",(e,t)=>{if(t.allows(e.unit))return e;const n=t.hasKind("intersection")?t.basis:t;if(n){const r=n.hasKind("domain")?n:E.intrinsic.object;if(e.domain!==r.domain){const s=e.domain==="undefined"||e.domain==="null"||e.domain==="boolean"?e.domain:E.intrinsic[e.domain];return I.init("domain",s,r)}}return I.init("assignability",e,t.hasKind("intersection")?t.children.find(r=>!r.allows(e.unit)):t)})}});class zb extends Io{compiledValue=this.json.unit;serializedValue=typeof this.unit=="string"||this.unit instanceof Date?JSON.stringify(this.compiledValue):`${this.compiledValue}`;compiledCondition=bc(this.unit,this.serializedValue);compiledNegation=bc(this.unit,this.serializedValue,"negated");expression=F(this.unit);domain=Te(this.unit);get defaultShortDescription(){return this.domain==="object"?Je.object:this.description}innerToJsonSchema(t){return this.unit===null?{type:"null"}:E.intrinsic.jsonPrimitive.allows(this.unit)?{const:this.unit}:t.fallback.unit({code:"unit",base:{},unit:this.unit})}traverseAllows=this.unit instanceof Date?t=>t instanceof Date&&t.toISOString()===this.compiledValue:Number.isNaN(this.unit)?t=>Number.isNaN(t):t=>t===this.unit}const _d={implementation:Kb,Node:zb},bc=(e,t,n)=>{if(e instanceof Date){const r=`data instanceof Date && data.toISOString() === ${t}`;return n?`!(${r})`:r}return Number.isNaN(e)?`${n?"!":""}Number.isNaN(data)`:`data ${n?"!":"="}== ${t}`},qb=J({kind:"index",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{signature:{child:!0,parse:(e,t)=>{const n=t.$.parseSchema(e);if(!n.extends(E.intrinsic.key))return N(Qb(n.expression));const r=n.branches.filter(s=>s.hasKind("unit"));return r.length?N(Wb(r.map(s=>F(s.unit)))):n}},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)}},normalize:e=>e,defaults:{description:e=>`[${e.signature.expression}]: ${e.value.description}`},intersections:{index:(e,t,n)=>{if(e.signature.equals(t.signature)){const r=ie(e.value,t.value,n),s=r instanceof I?E.intrinsic.never.internal:r;return n.$.node("index",{signature:e.signature,value:s})}return e.signature.extends(t.signature)&&e.value.subsumes(t.value)?t:t.signature.extends(e.signature)&&t.value.subsumes(e.value)?e:null}}});class Hb extends ln{impliedBasis=E.intrinsic.object.internal;expression=`[${this.signature.expression}]: ${this.value.expression}`;flatRefs=V(this.value.flatRefs.map(t=>ct([this.signature,...t.path],t.node)),ct([this.signature],this.value));traverseAllows=(t,n)=>Kr(t).every(r=>this.signature.traverseAllows(r[0],n)?Xe(r[0],()=>this.value.traverseAllows(r[1],n),n):!0);traverseApply=(t,n)=>{for(const r of Kr(t))this.signature.traverseAllows(r[0],n)&&Xe(r[0],()=>this.value.traverseApply(r[1],n),n)};_transform(t,n){n.path.push(this.signature);const r=super._transform(t,n);return n.path.pop(),r}compile(){}}const Xd={implementation:qb,Node:Hb},Wb=e=>`Index keys ${e.join(", ")} should be specified as named props.`,Qb=e=>`Indexed key definition '${e}' must be a string or symbol`,Gb=J({kind:"required",hasAssociatedError:!0,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.parseSchema(e)}},normalize:e=>e,defaults:{description:e=>`${e.compiledKey}: ${e.value.description}`,expected:e=>e.missingValueDescription,actual:()=>"missing"},intersections:{required:Ii,optional:Ii}});class Jb extends zd{expression=`${this.compiledKey}: ${this.value.expression}`;errorContext=Object.freeze({code:"required",missingValueDescription:this.value.defaultShortDescription,relativePath:[this.key],meta:this.meta});compiledErrorContext=ds(this.errorContext)}const Zd={implementation:Gb,Node:Jb},_b=J({kind:"sequence",hasAssociatedError:!1,collapsibleKey:"variadic",keys:{prefix:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(n=>t.$.parseSchema(n))}},optionals:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(n=>t.$.parseSchema(n))}},defaultables:{child:e=>e.map(t=>t[0]),parse:(e,t)=>{if(e.length!==0)return e.map(n=>{const r=t.$.parseSchema(n[0]);return Ro(r,n[1],null),[r,n[1]]})},serialize:e=>e.map(t=>[t[0].collapsibleJson,Bt(t[1])]),reduceIo:(e,t,n)=>{if(e==="in"){t.optionals=n.map(r=>r[0].rawIn);return}t.prefix=n.map(r=>r[0].rawOut)}},variadic:{child:!0,parse:(e,t)=>t.$.parseSchema(e,t)},minVariadicLength:{parse:e=>e===0?void 0:e},postfix:{child:!0,parse:(e,t)=>{if(e.length!==0)return e.map(n=>t.$.parseSchema(n))}}},normalize:e=>{if(typeof e=="string")return{variadic:e};if("variadic"in e||"prefix"in e||"defaultables"in e||"optionals"in e||"postfix"in e||"minVariadicLength"in e){if(e.postfix?.length){if(!e.variadic)return N(tv);if(e.optionals?.length||e.defaultables?.length)return N(eh)}return e.minVariadicLength&&!e.variadic?N("minVariadicLength may not be specified without a variadic element"):e}return{variadic:e}},reduce:(e,t)=>{let n=e.minVariadicLength??0;const r=e.prefix?.slice()??[],s=e.defaultables?.slice()??[],i=e.optionals?.slice()??[],o=e.postfix?.slice()??[];if(e.variadic){for(;i.at(-1)?.equals(e.variadic);)i.pop();if(i.length===0&&s.length===0)for(;r.at(-1)?.equals(e.variadic);)r.pop(),n++;for(;o[0]?.equals(e.variadic);)o.shift(),n++}else i.length===0&&s.length===0&&r.push(...o.splice(0));if(n!==e.minVariadicLength||e.prefix&&e.prefix.length!==r.length)return t.node("sequence",{...e,prefix:r,defaultables:s,optionals:i,postfix:o,minVariadicLength:n},{prereduced:!0})},defaults:{description:e=>e.isVariadicOnly?`${e.variadic.nestableExpression}[]`:`[${e.tuple.map(n=>n.kind==="defaultables"?`${n.node.nestableExpression} = ${F(n.default)}`:n.kind==="optionals"?`${n.node.nestableExpression}?`:n.kind==="variadic"?`...${n.node.nestableExpression}[]`:n.node.expression).join(", ")}]`},intersections:{sequence:(e,t,n)=>{const r=wn({l:e.tuple,r:t.tuple,disjoint:new I,result:[],fixedVariants:[],ctx:n}),s=r.disjoint.length===0?[r,...r.fixedVariants]:r.fixedVariants;return s.length===0?r.disjoint:s.length===1?n.$.node("sequence",vc(s[0].result)):n.$.node("union",s.map(i=>({proto:Array,sequence:vc(i.result)})))}}});class Xb extends ln{impliedBasis=E.intrinsic.Array.internal;tuple=ev(this.inner);prefixLength=this.prefix?.length??0;defaultablesLength=this.defaultables?.length??0;optionalsLength=this.optionals?.length??0;postfixLength=this.postfix?.length??0;defaultablesAndOptionals=[];prevariadic=this.tuple.filter(t=>t.kind==="defaultables"||t.kind==="optionals"?(this.defaultablesAndOptionals.push(t.node),!0):t.kind==="prefix");variadicOrPostfix=St(this.variadic&&[this.variadic],this.postfix);flatRefs=this.addFlatRefs();addFlatRefs(){return lc(this.flatRefs,this.prevariadic.flatMap((t,n)=>V(t.node.flatRefs.map(r=>ct([`${n}`,...r.path],r.node)),ct([`${n}`],t.node)))),lc(this.flatRefs,this.variadicOrPostfix.flatMap(t=>V(t.flatRefs.map(n=>ct([E.intrinsic.nonNegativeIntegerString.internal,...n.path],n.node)),ct([E.intrinsic.nonNegativeIntegerString.internal],t)))),this.flatRefs}isVariadicOnly=this.prevariadic.length+this.postfixLength===0;minVariadicLength=this.inner.minVariadicLength??0;minLength=this.prefixLength+this.minVariadicLength+this.postfixLength;minLengthNode=this.minLength===0?null:this.$.node("minLength",this.minLength);maxLength=this.variadic?null:this.tuple.length;maxLengthNode=this.maxLength===null?null:this.$.node("maxLength",this.maxLength);impliedSiblings=this.minLengthNode?this.maxLengthNode?[this.minLengthNode,this.maxLengthNode]:[this.minLengthNode]:this.maxLengthNode?[this.maxLengthNode]:[];defaultValueMorphs=Yb(this);defaultValueMorphsReference=this.defaultValueMorphs.length?fe(this.defaultValueMorphs):void 0;elementAtIndex(t,n){if(n<this.prevariadic.length)return this.tuple[n];const r=t.length-this.postfixLength;return n>=r?{kind:"postfix",node:this.postfix[n-r]}:{kind:"variadic",node:this.variadic??Y(`Unexpected attempt to access index ${n} on ${this}`)}}traverseAllows=(t,n)=>{for(let r=0;r<t.length;r++)if(!this.elementAtIndex(t,r).node.traverseAllows(t[r],n))return!1;return!0};traverseApply=(t,n)=>{let r=0;for(;r<t.length;r++)Xe(r,()=>this.elementAtIndex(t,r).node.traverseApply(t[r],n),n)};get element(){return this.cacheGetter("element",this.$.node("union",this.children))}compile(t){if(this.prefix)for(const[n,r]of this.prefix.entries())t.traverseKey(`${n}`,`data[${n}]`,r);for(const[n,r]of this.defaultablesAndOptionals.entries()){const s=`${n+this.prefixLength}`;t.if(`${s} >= data.length`,()=>t.traversalKind==="Allows"?t.return(!0):t.return()),t.traverseKey(s,`data[${s}]`,r)}if(this.variadic&&(this.postfix&&t.const("firstPostfixIndex",`data.length${this.postfix?`- ${this.postfix.length}`:""}`),t.for(`i < ${this.postfix?"firstPostfixIndex":"data.length"}`,()=>t.traverseKey("i","data[i]",this.variadic),this.prevariadic.length),this.postfix))for(const[n,r]of this.postfix.entries()){const s=`firstPostfixIndex + ${n}`;t.traverseKey(s,`data[${s}]`,r)}t.traversalKind==="Allows"&&t.return(!0)}_transform(t,n){n.path.push(E.intrinsic.nonNegativeIntegerString.internal);const r=super._transform(t,n);return n.path.pop(),r}expression=this.description;reduceJsonSchema(t,n){if(this.prevariadic.length&&(t.prefixItems=this.prevariadic.map(r=>{const s=r.node.toJsonSchemaRecurse(n);if(r.kind==="defaultables"){const i=typeof r.default=="function"?r.default():r.default;s.default=E.intrinsic.jsonData.allows(i)?i:n.fallback.defaultValue({code:"defaultValue",base:s,value:i})}return s})),this.minLength&&(t.minItems=this.minLength),this.variadic){const r=Object.assign(t,{items:this.variadic.toJsonSchemaRecurse(n)});if(this.maxLength&&(r.maxItems=this.maxLength),this.postfix){const s=this.postfix.map(i=>i.toJsonSchemaRecurse(n));t=n.fallback.arrayPostfix({code:"arrayPostfix",base:r,elements:s})}}else t.items=!1,delete t.maxItems;return t}}const Zb={},Yb=e=>{if(!e.defaultables)return[];const t=[];let n="[";const r=e.prefixLength+e.defaultablesLength-1;for(let s=e.prefixLength;s<=r;s++){const[i,o]=e.defaultables[s-e.prefixLength];t.push(Hd(s,i,o)),n+=`${s}: ${i.id} = ${Bt(o)}, `}return n+="]",Zb[n]??=t},Yd={implementation:_b,Node:Xb},ev=e=>{const t=[];if(e.prefix)for(const n of e.prefix)t.push({kind:"prefix",node:n});if(e.defaultables)for(const[n,r]of e.defaultables)t.push({kind:"defaultables",node:n,default:r});if(e.optionals)for(const n of e.optionals)t.push({kind:"optionals",node:n});if(e.variadic&&t.push({kind:"variadic",node:e.variadic}),e.postfix)for(const n of e.postfix)t.push({kind:"postfix",node:n});return t},vc=e=>e.reduce((t,n)=>(n.kind==="variadic"?t.variadic=n.node:n.kind==="defaultables"?t.defaultables=V(t.defaultables,[[n.node,n.default]]):t[n.kind]=V(t[n.kind],n.node),t),{}),eh="A postfix required element cannot follow an optional or defaultable element",tv="A postfix element requires a variadic element",wn=e=>{const[t,...n]=e.l,[r,...s]=e.r;if(!t||!r)return e;const i=n.at(-1)?.kind==="postfix",o=s.at(-1)?.kind==="postfix",a=t.kind==="prefix"||r.kind==="prefix"?"prefix":t.kind==="postfix"||r.kind==="postfix"?"postfix":t.kind==="variadic"&&r.kind==="variadic"?"variadic":i||o?"prefix":t.kind==="defaultables"||r.kind==="defaultables"?"defaultables":"optionals";if(t.kind==="prefix"&&r.kind==="variadic"&&o){const h=wn({...e,fixedVariants:[],r:s.map(f=>({...f,kind:"prefix"}))});h.disjoint.length===0&&e.fixedVariants.push(h)}else if(r.kind==="prefix"&&t.kind==="variadic"&&i){const h=wn({...e,fixedVariants:[],l:n.map(f=>({...f,kind:"prefix"}))});h.disjoint.length===0&&e.fixedVariants.push(h)}const c=ie(t.node,r.node,e.ctx);if(c instanceof I)if(a==="prefix"||a==="postfix")e.disjoint.push(...c.withPrefixKey(a==="prefix"?e.result.length:`-${n.length+1}`,wc(t)&&wc(r)?"required":"optional")),e.result=[...e.result,{kind:a,node:E.intrinsic.never.internal}];else return a==="optionals"||a==="defaultables"?e:wn({...e,fixedVariants:[],l:n.map(h=>({...h,kind:"prefix"})),r:n.map(h=>({...h,kind:"prefix"}))});else a==="defaultables"?(t.kind==="defaultables"&&r.kind==="defaultables"&&t.default!==r.default&&N(qd(t.default,r.default)),e.result=[...e.result,{kind:a,node:c,default:t.kind==="defaultables"?t.default:r.kind==="defaultables"?r.default:Y(`Unexpected defaultable intersection from ${t.kind} and ${r.kind} elements.`)}]):e.result=[...e.result,{kind:a,node:c}];const l=e.l.length,u=e.r.length;return(t.kind!=="variadic"||l>=u&&(r.kind==="variadic"||u===1))&&(e.l=n),(r.kind!=="variadic"||u>=l&&(t.kind==="variadic"||l===1))&&(e.r=s),wn(e)},wc=e=>e.kind==="prefix"||e.kind==="postfix",th=e=>t=>{if(t.props.length||t.index){const n=t.index?.map(s=>s[e])??[];for(const s of t.props)n.push(s[e]);t.undeclared&&n.push(`+ (undeclared): ${t.undeclared}`);const r=`{ ${n.join(", ")} }`;return t.sequence?`${r} & ${t.sequence.description}`:r}return t.sequence?.description??"{}"},nv=th("description"),rv=th("expression"),Sc=(e,t,n)=>{const r=e.required?"required":"optional";if(!t.signature.allows(e.key))return null;const s=Ze(e.value,t.value,n);return s instanceof I?r==="optional"?n.node("optional",{key:e.key,value:E.intrinsic.never.internal}):s.withPrefixKey(e.key,e.kind):null},sv=J({kind:"structure",hasAssociatedError:!1,normalize:e=>e,applyConfig:(e,t)=>!e.undeclared&&t.onUndeclaredKey!=="ignore"?{...e,undeclared:t.onUndeclaredKey}:e,keys:{required:{child:!0,parse:me("required"),reduceIo:(e,t,n)=>{t.required=V(t.required,n.map(r=>e==="in"?r.rawIn:r.rawOut))}},optional:{child:!0,parse:me("optional"),reduceIo:(e,t,n)=>{if(e==="in"){t.optional=n.map(r=>r.rawIn);return}for(const r of n)t[r.outProp.kind]=V(t[r.outProp.kind],r.outProp.rawOut)}},index:{child:!0,parse:me("index")},sequence:{child:!0,parse:me("sequence")},undeclared:{parse:e=>e==="ignore"?void 0:e,reduceIo:(e,t,n)=>{if(n==="reject"){t.undeclared="reject";return}e==="in"?delete t.undeclared:t.undeclared="reject"}}},defaults:{description:nv},intersections:{structure:(e,t,n)=>{const r={...e.inner},s={...t.inner},i=new I;if(e.undeclared){const c=e.keyof();for(const l of t.requiredKeys)c.allows(l)||i.add("presence",E.intrinsic.never.internal,t.propsByKey[l].value,{path:[l]});s.optional&&(s.optional=s.optional.filter(l=>c.allows(l.key))),s.index&&(s.index=s.index.flatMap(l=>{if(l.signature.extends(c))return l;const u=Ze(c,l.signature,n.$);if(u instanceof I)return[];const h=ji(u,l.value,n.$);return h.required&&(s.required=St(s.required,h.required)),h.optional&&(s.optional=St(s.optional,h.optional)),h.index??[]}))}if(t.undeclared){const c=t.keyof();for(const l of e.requiredKeys)c.allows(l)||i.add("presence",e.propsByKey[l].value,E.intrinsic.never.internal,{path:[l]});r.optional&&(r.optional=r.optional.filter(l=>c.allows(l.key))),r.index&&(r.index=r.index.flatMap(l=>{if(l.signature.extends(c))return l;const u=Ze(c,l.signature,n.$);if(u instanceof I)return[];const h=ji(u,l.value,n.$);return h.required&&(r.required=St(r.required,h.required)),h.optional&&(r.optional=St(r.optional,h.optional)),h.index??[]}))}const o={};(e.undeclared||t.undeclared)&&(o.undeclared=e.undeclared==="reject"||t.undeclared==="reject"?"reject":"delete");const a=Wr({kind:"structure",baseInner:o,l:Qr(r),r:Qr(s),roots:[],ctx:n});return a instanceof I&&i.push(...a),i.length?i:a}},reduce:(e,t)=>{if(e.index){if(!(e.required||e.optional))return;let n=!1;const r=e.required??[],s=e.optional??[],i=[...s];for(const o of e.index){for(const a of r){const c=Sc(a,o,t);if(c instanceof I)return c}for(const[a,c]of s.entries()){const l=Sc(c,o,t);if(l instanceof I)return l;l!==null&&(i[a]=l,n=!0)}}if(n)return t.node("structure",{...e,optional:i},{prereduced:!0})}}});class iv extends ln{impliedBasis=E.intrinsic.object.internal;impliedSiblings=this.children.flatMap(t=>t.impliedSiblings??[]);props=St(this.required,this.optional);propsByKey=$(this.props,(t,n)=>[n.key,n]);propsByKeyReference=fe(this.propsByKey);expression=rv(this);requiredKeys=this.required?.map(t=>t.key)??[];optionalKeys=this.optional?.map(t=>t.key)??[];literalKeys=[...this.requiredKeys,...this.optionalKeys];_keyof;keyof(){if(this._keyof)return this._keyof;let t=this.$.units(this.literalKeys).branches;if(this.index)for(const{signature:n}of this.index)t=t.concat(n.branches);return this._keyof=this.$.node("union",t)}map(t){return this.$.node("structure",this.props.flatMap(t).reduce((n,r)=>{const s=this.propsByKey[r.key];if(ue(r))return r.kind!=="required"&&r.kind!=="optional"?N(`Map result must have kind "required" or "optional" (was ${r.kind})`):(n[r.kind]=V(n[r.kind],r),n);const i=r.kind??s?.kind??"required",o=$(r,(a,c)=>a in No.implementation.keys?[a,c]:[]);return n[i]=V(n[i],this.$.node(i,o)),n},{}))}assertHasKeys(t){const n=t.filter(r=>!xr(r,this.keyof()));if(n.length)return N(kc(this.expression,n))}get(t,...n){let r,s=!1;const i=lv(t);if((typeof i=="string"||typeof i=="symbol")&&this.propsByKey[i]&&(r=this.propsByKey[i].value,s=this.propsByKey[i].required),this.index)for(const a of this.index)xr(i,a.signature)&&(r=r?.and(a.value)??a.value);if(this.sequence&&xr(i,E.intrinsic.nonNegativeIntegerString))if(M(i,"root"))this.sequence.variadic&&(r=r?.and(this.sequence.element)??this.sequence.element);else{const a=Number.parseInt(i);if(a<this.sequence.prevariadic.length){const c=this.sequence.prevariadic[a].node;r=r?.and(c)??c,s||=a<this.sequence.prefixLength}else if(this.sequence.variadic){const c=this.$.node("union",this.sequence.variadicOrPostfix);r=r?.and(c)??c}}if(!r)return this.sequence?.variadic&&M(i,"root")&&i.extends(E.intrinsic.number)?N(uv(i.expression,this.sequence.expression)):N(kc(this.expression,[i]));const o=r.get(...n);return s?o:o.or(E.intrinsic.undefined)}pick(...t){return this.assertHasKeys(t),this.$.node("structure",this.filterKeys("pick",t))}omit(...t){return this.assertHasKeys(t),this.$.node("structure",this.filterKeys("omit",t))}optionalize(){const{required:t,...n}=this.inner;return this.$.node("structure",{...n,optional:this.props.map(r=>r.hasKind("required")?this.$.node("optional",r.inner):r)})}require(){const{optional:t,...n}=this.inner;return this.$.node("structure",{...n,required:this.props.map(r=>r.hasKind("optional")?{key:r.key,value:r.value}:r)})}merge(t){const n=this.filterKeys("omit",[t.keyof()]);return t.required&&(n.required=V(n.required,t.required)),t.optional&&(n.optional=V(n.optional,t.optional)),t.index&&(n.index=V(n.index,t.index)),t.sequence&&(n.sequence=t.sequence),t.undeclared?n.undeclared=t.undeclared:delete n.undeclared,this.$.node("structure",n)}filterKeys(t,n){const r=gd(this.inner),s=i=>{const o=n.some(a=>xr(i,a));return t==="pick"?o:!o};return r.required&&(r.required=r.required.filter(i=>s(i.key))),r.optional&&(r.optional=r.optional.filter(i=>s(i.key))),r.index&&(r.index=r.index.filter(i=>s(i.signature))),r}traverseAllows=(t,n)=>this._traverse("Allows",t,n);traverseApply=(t,n)=>this._traverse("Apply",t,n);_traverse=(t,n,r)=>{const s=r?.currentErrorCount??0;for(let i=0;i<this.props.length;i++)if(t==="Allows"){if(!this.props[i].traverseAllows(n,r))return!1}else if(this.props[i].traverseApply(n,r),r.failFast&&r.currentErrorCount>s)return!1;if(this.sequence){if(t==="Allows"){if(!this.sequence.traverseAllows(n,r))return!1}else if(this.sequence.traverseApply(n,r),r.failFast&&r.currentErrorCount>s)return!1}if(this.index||this.undeclared==="reject"){const i=Object.keys(n);i.push(...Object.getOwnPropertySymbols(n));for(let o=0;o<i.length;o++){const a=i[o];if(this.index){for(const c of this.index)if(c.signature.traverseAllows(a,r)){if(t==="Allows"){if(!Xe(a,()=>c.value.traverseAllows(n[a],r),r))return!1}else if(Xe(a,()=>c.value.traverseApply(n[a],r),r),r.failFast&&r.currentErrorCount>s)return!1}}if(this.undeclared==="reject"&&!this.declaresKey(a)&&(t==="Allows"||(r.errorFromNodeContext({code:"predicate",expected:"removed",actual:"",relativePath:[a],meta:this.meta}),r.failFast)))return!1}}return this.structuralMorph&&r&&!r.hasError()&&r.queueMorphs([this.structuralMorph]),!0};get defaultable(){return this.cacheGetter("defaultable",this.optional?.filter(t=>t.hasDefault())??[])}declaresKey=t=>t in this.propsByKey||this.index?.some(n=>n.signature.allows(t))||this.sequence!==void 0&&E.intrinsic.nonNegativeIntegerString.allows(t);_compileDeclaresKey(t){const n=[];if(this.props.length&&n.push(`k in ${this.propsByKeyReference}`),this.index)for(const r of this.index)n.push(t.invoke(r.signature,{kind:"Allows",arg:"k"}));return this.sequence&&n.push("$ark.intrinsic.nonNegativeIntegerString.allows(k)"),n.join(" || ")||"false"}get structuralMorph(){return this.cacheGetter("structuralMorph",av(this))}structuralMorphRef=this.structuralMorph&&fe(this.structuralMorph);compile(t){t.traversalKind==="Apply"&&t.initializeErrorCount();for(const n of this.props)t.check(n),t.traversalKind==="Apply"&&t.returnIfFailFast();if(this.sequence&&(t.check(this.sequence),t.traversalKind==="Apply"&&t.returnIfFailFast()),(this.index||this.undeclared==="reject")&&(t.const("keys","Object.keys(data)"),t.line("keys.push(...Object.getOwnPropertySymbols(data))"),t.for("i < keys.length",()=>this.compileExhaustiveEntry(t))),t.traversalKind==="Allows")return t.return(!0);this.structuralMorphRef&&t.if("ctx && !ctx.hasError()",()=>(t.line("ctx.queueMorphs(["),cv(t,this),t.line("])")))}compileExhaustiveEntry(t){if(t.const("k","keys[i]"),this.index)for(const n of this.index)t.if(`${t.invoke(n.signature,{arg:"k",kind:"Allows"})}`,()=>t.traverseKey("k","data[k]",n.value));return this.undeclared==="reject"&&t.if(`!(${this._compileDeclaresKey(t)})`,()=>t.traversalKind==="Allows"?t.return(!1):t.line(`ctx.errorFromNodeContext({ code: "predicate", expected: "removed", actual: "", relativePath: [k], meta: ${this.compiledMeta} })`).if("ctx.failFast",()=>t.return())),t}reduceJsonSchema(t,n){switch(t.type){case"object":return this.reduceObjectJsonSchema(t,n);case"array":const r=this.sequence?.reduceJsonSchema(t,n)??t;return this.props.length||this.index?n.fallback.arrayObject({code:"arrayObject",base:r,object:this.reduceObjectJsonSchema({type:"object"},n)}):r;default:return te.throwInternalOperandError("structure",t)}}reduceObjectJsonSchema(t,n){if(this.props.length){t.properties={};for(const r of this.props){const s=r.value.toJsonSchemaRecurse(n);if(typeof r.key=="symbol"){n.fallback.symbolKey({code:"symbolKey",base:t,key:r.key,value:s,optional:r.optional});continue}if(r.hasDefault()){const i=typeof r.default=="function"?r.default():r.default;s.default=E.intrinsic.jsonData.allows(i)?i:n.fallback.defaultValue({code:"defaultValue",base:s,value:i})}t.properties[r.key]=s}this.requiredKeys.length&&t.properties&&(t.required=this.requiredKeys.filter(r=>typeof r=="string"&&r in t.properties))}if(this.index)for(const r of this.index){const s=r.value.toJsonSchemaRecurse(n);if(r.signature.equals(E.intrinsic.string)){t.additionalProperties=s;continue}for(const i of r.signature.branches){if(!i.extends(E.intrinsic.string)){t=n.fallback.symbolKey({code:"symbolKey",base:t,key:null,value:s,optional:!1});continue}let o={type:"string"};if(i.hasKind("morph")&&(o=n.fallback.morph({code:"morph",base:i.rawIn.toJsonSchemaRecurse(n),out:i.rawOut.toJsonSchemaRecurse(n)})),!i.hasKind("intersection"))return Y(`Unexpected index branch kind ${i.kind}.`);const{pattern:a}=i.inner;if(a){const c=Object.assign(o,{pattern:a[0].rule});for(let l=1;l<a.length;l++)o=n.fallback.patternIntersection({code:"patternIntersection",base:c,pattern:a[l].rule});t.patternProperties??={},t.patternProperties[c.pattern]=s}}}return this.undeclared&&!t.additionalProperties&&(t.additionalProperties=!1),t}}const Vs={},ov=e=>{let t="";for(let n=0;n<e.defaultable.length;n++)t+=e.defaultable[n].defaultValueMorphRef;if(e.sequence?.defaultValueMorphsReference&&(t+=e.sequence?.defaultValueMorphsReference),e.undeclared==="delete"){if(t+="delete !(",e.required)for(const n of e.required)t+=n.compiledKey+" | ";if(e.optional)for(const n of e.optional)t+=n.compiledKey+" | ";if(e.index)for(const n of e.index)t+=n.signature.id+" | ";if(e.sequence)if(e.sequence.maxLength===null)t+=B.nonNegativeIntegerString.id;else for(let n=0;n<e.sequence.tuple.length;n++)t+=n+" | ";t+=")"}return t},av=e=>{const t=ov(e);if(!t)return;if(Vs[t])return Vs[t];const n=(r,s)=>{for(let i=0;i<e.defaultable.length;i++)e.defaultable[i].key in r||e.defaultable[i].defaultValueMorph(r,s);if(e.sequence?.defaultables)for(let i=r.length-e.sequence.prefixLength;i<e.sequence.defaultables.length;i++)e.sequence.defaultValueMorphs[i](r,s);if(e.undeclared==="delete")for(const i in r)e.declaresKey(i)||delete r[i];return r};return Vs[t]=n},cv=(e,t)=>{const r=`(data${t.defaultable.some(s=>s.defaultValueMorph.length===2)||t.sequence?.defaultValueMorphs.some(s=>s.length===2)?", ctx":""})`;return e.block(`${r} => `,s=>{for(let i=0;i<t.defaultable.length;i++){const{serializedKey:o,defaultValueMorphRef:a}=t.defaultable[i];s.if(`!(${o} in data)`,c=>c.line(`${a}${r}`))}return t.sequence?.defaultables&&s.for(`i < ${t.sequence.defaultables.length}`,i=>i.set("data[i]",5),`data.length - ${t.sequence.prefixLength}`),t.undeclared==="delete"&&s.forIn("data",i=>i.if(`!(${t._compileDeclaresKey(i)})`,o=>o.line("delete data[k]"))),s.return("data")})},nh={implementation:sv,Node:iv},lv=e=>(M(e,"root")&&e.hasKind("unit")&&(e=e.unit),typeof e=="number"&&(e=`${e}`),e),uv=(e,t)=>`${e} is not allowed as an array index on ${t}. Use the 'nonNegativeIntegerString' keyword instead.`,ji=(e,t,n)=>{const[r,s]=oy(e.branches,o=>o.hasKind("unit"));if(!r.length)return{index:n.node("index",{signature:e,value:t})};const i={};for(const o of r){const a=n.node("required",{key:o.unit,value:t});i[a.kind]=V(i[a.kind],a)}return s.length&&(i.index=n.node("index",{signature:s,value:t})),i},dv=e=>M(e,"root")?e.expression:F(e),kc=(e,t)=>`Key${t.length===1?"":"s"} ${t.map(dv).join(", ")} ${t.length===1?"does":"do"} not exist on ${e}`,fs={...Yx,alias:Eo.implementation,domain:jo.implementation,unit:_d.implementation,proto:Jr.implementation,union:Jd.implementation,morph:Qd.implementation,intersection:Wd.implementation,divisor:Rd.implementation,pattern:$d.implementation,predicate:Nd.implementation,required:Zd.implementation,optional:No.implementation,index:Xd.implementation,sequence:Yd.implementation,structure:nh.implementation};E.defaultConfig=yy(Object.assign($(fs,(e,t)=>[e,t.defaults]),{jitless:Ry(),clone:Cy,onUndeclaredKey:"ignore",exactOptionalPropertyTypes:!0,numberAllowsNaN:!1,dateAllowsInvalid:!1,onFail:null,keywords:{},toJsonSchema:te.defaultConfig}));E.resolvedConfig=Pi(E.defaultConfig,E.config);const hv={...eb,alias:Eo.Node,domain:jo.Node,unit:_d.Node,proto:Jr.Node,union:Jd.Node,morph:Qd.Node,intersection:Wd.Node,divisor:Rd.Node,pattern:$d.Node,predicate:Nd.Node,required:Zd.Node,optional:No.Node,index:Xd.Node,sequence:Yd.Node,structure:nh.Node};class Mi extends py{get[_e](){return"module"}}const rh=(e,t)=>new Mi($(e,(n,r)=>[n,M(r,"module")?rh(r,t):t.bindReference(r)])),fv=e=>le(e)?e:"branches"in e&&le(e.branches)?e.branches:void 0,pv=(e,t)=>N(`Node of kind ${t} is not valid as a ${e} definition`),Cc=e=>`#${e} duplicates public alias ${e}`,$s={};E.ambient??={};let Pc;const sh="function $",mv=e=>ih(e,oh(e)),ih=(e,t)=>{const n=t.write(sh,4),r=t.compile()();for(const s of e)s.precompilation||(s.traverseAllows=r[`${s.id}Allows`].bind(r),s.isRoot()&&!s.allowsRequiresContext&&(s.allows=s.traverseAllows),s.traverseApply=r[`${s.id}Apply`].bind(r),r[`${s.id}Optimistic`]&&(s.traverseOptimistic=r[`${s.id}Optimistic`].bind(r)),s.precompilation=n)},oh=e=>new pd().return(e.reduce((t,n)=>{const r=new Os({kind:"Allows"}).indent();n.compile(r);const s=r.write(`${n.id}Allows`),i=new Os({kind:"Apply"}).indent();n.compile(i);const o=i.write(`${n.id}Apply`),a=`${t}${s},
${o},
`;if(!n.hasKind("union"))return a;const c=new Os({kind:"Allows",optimistic:!0}).indent();n.compile(c);const l=c.write(`${n.id}Optimistic`);return`${a}${l},
`},`{
`)+"}");class ah{config;resolvedConfig;name;get[_e](){return"scope"}referencesById={};references=[];resolutions={};exportedNames=[];aliases={};resolved=!1;nodesByHash={};intrinsic;constructor(t,n){this.config=Pi(E.config,n),this.resolvedConfig=Pi(E.resolvedConfig,n),this.name=this.resolvedConfig.name??`anonymousScope${Object.keys($s).length}`,this.name in $s&&N(`A Scope already named ${this.name} already exists`),$s[this.name]=this;const r=Object.entries(t).map(s=>this.preparseOwnAliasEntry(...s));for(const[s,i]of r){let o=s;if(s[0]==="#"?(o=s.slice(1),o in this.aliases&&N(Cc(o)),this.aliases[o]=i):(o in this.aliases&&N(Cc(s)),this.aliases[o]=i,this.exportedNames.push(o)),!M(i,"module")&&!M(i,"generic")&&!as(i)){const a=this.preparseOwnDefinitionFormat(i,{alias:o});this.resolutions[o]=M(a,"root")?this.bindReference(a):this.createParseContext(a).id}}Pc??=this.node("union",{branches:["string","number","object","bigint","symbol",{unit:!0},{unit:!1},{unit:void 0},{unit:null}]},{prereduced:!0}),this.nodesByHash[Pc.hash]=this.node("intersection",{},{prereduced:!0}),this.intrinsic=E.intrinsic?$(E.intrinsic,(s,i)=>s.startsWith("json")?[]:[s,this.bindReference(i)]):{}}cacheGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}get internal(){return this}_json;get json(){return this._json||this.export(),this._json}defineSchema(t){return t}generic=(...t)=>{const n=this;return(r,s)=>new Gr(t,s?new Pd(r):r,n,n,s??null)};units=(t,n)=>{const r=[];for(const i of t)r.includes(i)||r.push(i);const s=r.map(i=>this.node("unit",{unit:i},n));return this.node("union",s,{...n,prereduced:!0})};lazyResolutions=[];lazilyResolve(t,n){const r=this.node("alias",{reference:n??"synthetic",resolve:t},{prereduced:!0});return this.resolved||this.lazyResolutions.push(r),r}schema=(t,n)=>this.finalize(this.parseSchema(t,n));parseSchema=(t,n)=>this.node(Er(t),t,n);preparseNode(t,n,r){let s=typeof t=="string"?t:Er(n,t);if(ue(n)&&n.kind===s)return n;if(s==="alias"&&!r?.prereduced){const{reference:a}=Eo.implementation.normalize(n,this);if(a.startsWith("$")){const c=this.resolveRoot(a.slice(1));n=c,s=c.kind}}else if(s==="union"&&Lt(n,"object")){const a=fv(n);a?.length===1&&(n=a[0],s=Er(n))}if(ue(n)&&n.kind===s)return n;const o=fs[s].normalize?.(n,this)??n;return ue(o)?o.kind===s?o:pv(s,o.kind):{...r,$:this,kind:s,def:o,prefix:r.alias??s}}bindReference(t){let n;return ue(t)?n=t.$===this?t:new t.constructor(t.attachments,this):n=t.$===this?t:new Gr(t.params,t.bodyDef,t.$,this,t.hkt),this.resolved||Object.assign(this.referencesById,n.referencesById),n}resolveRoot(t){return this.maybeResolveRoot(t)??N(dh(t))}maybeResolveRoot(t){const n=this.maybeResolve(t);if(!M(n,"generic"))return n}maybeResolveSubalias(t){return Ti(this.aliases,t)??Ti(this.ambient,t)}get ambient(){return E.ambient}maybeResolve(t){const n=this.resolutions[t];if(n){if(typeof n!="string")return this.bindReference(n);const s=Ce[n];if(M(s,"root"))return this.resolutions[t]=s;if(M(s,"context")){if(s.phase==="resolving")return this.node("alias",{reference:`$${t}`},{prereduced:!0});if(s.phase==="resolved")return Y(`Unexpected resolved context for was uncached by its scope: ${F(s)}`);s.phase="resolving";const i=this.bindReference(this.parseOwnDefinitionFormat(s.def,s));return s.phase="resolved",Ce[i.id]=i,Ce[s.id]=i,this.resolutions[t]=i}return Y(`Unexpected nodesById entry for ${n}: ${F(s)}`)}let r=this.aliases[t]??this.ambient?.[t];return r?(r=this.normalizeRootScopeValue(r),M(r,"generic")?this.resolutions[t]=this.bindReference(r):M(r,"module")?(r.root||N(hh(t)),this.resolutions[t]=this.bindReference(r.root)):this.resolutions[t]=this.parse(r,{alias:t})):this.maybeResolveSubalias(t)}createParseContext(t){const n=t.id??Ud(t.prefix);return Ce[n]=Object.assign(t,{[_e]:"context",$:this,id:n,phase:"unresolved"})}traversal(t){return new Ut(t,this.resolvedConfig)}import(...t){return new Mi($(this.export(...t),(n,r)=>[`#${n}`,r]))}precompilation;_exportedResolutions;_exports;export(...t){if(!this._exports){this._exports={};for(const r of this.exportedNames){const s=this.aliases[r];this._exports[r]=M(s,"module")?rh(s,this):Nc(this.maybeResolve(r))}for(const r of this.lazyResolutions)r.resolution;if(this._exportedResolutions=uh(this,this._exports),this._json=lh(this._exportedResolutions),Object.assign(this.resolutions,this._exportedResolutions),this.references=Object.values(this.referencesById),!this.resolvedConfig.jitless){const r=oh(this.references);this.precompilation=r.write(sh,4),ih(this.references,r)}this.resolved=!0}const n=t.length?t:this.exportedNames;return new Mi($(n,(r,s)=>[s,this._exports[s]]))}resolve(t){return this.export()[t]}node=(t,n,r={})=>{const s=this.preparseNode(t,n,r);if(ue(s))return this.bindReference(s);const i=this.createParseContext(s),o=Kd(i),a=this.bindReference(o);return Ce[i.id]=a};parse=(t,n={})=>this.finalize(this.parseDefinition(t,n));parseDefinition(t,n={}){if(M(t,"root"))return this.bindReference(t);const r=this.preparseOwnDefinitionFormat(t,n);if(M(r,"root"))return this.bindReference(r);const s=this.createParseContext(r);Ce[s.id]=s;let i=this.bindReference(this.parseOwnDefinitionFormat(t,s));return i.isCyclic&&(i=ib(i,s.id)),Ce[s.id]=i,i}finalize(t){return Nc(t),!t.precompilation&&!this.resolvedConfig.jitless&&mv(t.references),t}}class ch extends ah{parseOwnDefinitionFormat(t,n){return Kd(n)}preparseOwnDefinitionFormat(t,n){return this.preparseNode(Er(t),t,n)}preparseOwnAliasEntry(t,n){return[t,n]}normalizeRootScopeValue(t){return t}}const Nc=e=>{const t=e.references.filter(n=>n.hasKind("alias"));for(const n of t){Object.assign(n.referencesById,n.resolution.referencesById);for(const r of e.references)n.id in r.referencesById&&Object.assign(r.referencesById,n.referencesById)}return e},lh=e=>$(e,(t,n)=>[t,M(n,"root")||M(n,"generic")?n.json:M(n,"module")?lh(n):Y(`Unexpected resolution ${F(n)}`)]),Ti=(e,t)=>{const n=t.indexOf(".");if(n===-1)return;const r=t.slice(0,n),s=e[r];if(s===void 0)return;if(!M(s,"module"))return N(Av(r));const i=t.slice(n+1),o=s[i];if(o===void 0)return Ti(s,i);if(M(o,"root")||M(o,"generic"))return o;if(M(o,"module"))return o.root??N(hh(t));Y(`Unexpected resolution for alias '${t}': ${F(o)}`)},Mo=(e,t)=>new ch(e,t),er=new ch({}),uh=(e,t)=>{const n={};for(const r in t){const s=t[r];if(M(s,"module")){const i=uh(e,s),o=$(i,(a,c)=>[`${r}.${a}`,c]);Object.assign(n,o)}else M(s,"root")||M(s,"generic")?n[r]=s:Y(`Unexpected scope resolution ${F(s)}`)}return n},dh=e=>`'${e}' is unresolvable`,Av=e=>`'${e}' must reference a module to be accessed using dot syntax`,hh=e=>`Reference to submodule '${e}' must specify an alias`;er.export();const K=er.schema,To=er.node;er.defineSchema;const tt=er.generic,fh="^(?:0|[1-9]\\d*)$",gv=new RegExp(fh);fe(gv);const ph=Mo({bigint:"bigint",boolean:[{unit:!1},{unit:!0}],false:{unit:!1},never:[],null:{unit:null},number:"number",object:"object",string:"string",symbol:"symbol",true:{unit:!0},unknown:{},undefined:{unit:void 0},Array,Date},{prereducedAliases:!0}).export();E.intrinsic={...ph};const mh=Mo({integer:{domain:"number",divisor:1},lengthBoundable:["string",Array],key:["string","symbol"],nonNegativeIntegerString:{domain:"string",pattern:fh}},{prereducedAliases:!0}).export();Object.assign(E.intrinsic,mh);const yv=Mo({jsonPrimitive:["string","number",{unit:!0},{unit:!1},{unit:null}],jsonObject:{domain:"object",index:{signature:"string",value:"$jsonData"}},jsonData:["$jsonPrimitive","$jsonObject"]},{prereducedAliases:!0}).export(),B={...ph,...mh,...yv,emptyStructure:To("structure",{},{prereduced:!0})};E.intrinsic={...B};const xv=e=>typeof e=="string"&&e[0]==="d"&&(e[1]==="'"||e[1]==='"')&&e.at(-1)===e[1],Rc=e=>e.toString()!=="Invalid Date",bv=e=>e.slice(2,-1),Ah=e=>`'${e}' could not be parsed by the Date constructor`,vv=(e,t)=>wv(e,t),wv=(e,t)=>{const n=new Date(e);if(Rc(n))return n;const r=Wy(e);if(r!==void 0){const s=new Date(r);if(Rc(s))return s}return t?N(t===!0?Ah(e):t):void 0},Ec=(e,t)=>{const n=e.scanner.shiftUntilEscapable(Cv[yh[t]]);if(e.scanner.lookahead==="")return e.error(Nv(n,t));if(e.scanner.shift(),t==="/"){try{new RegExp(n)}catch(r){N(String(r))}e.root=e.ctx.$.node("intersection",{domain:"string",pattern:n},{prereduced:!0})}else if(ze(t,gh))e.root=e.ctx.$.node("unit",{unit:n});else{const r=vv(n,Ah(n));e.root=e.ctx.$.node("unit",{meta:n,unit:r})}},gh={"'":1,'"':1},Sv={"/":1,"'":1,'"':1},kv={"d'":"'",'d"':'"',"'":"'",'"':'"'},yh={...kv,"/":"/"},Cv={"'":e=>e.lookahead==="'",'"':e=>e.lookahead==='"',"/":e=>e.lookahead==="/"},Pv={'"':"double-quote","'":"single-quote","/":"forward slash"},Nv=(e,t)=>`${t}${e} requires a closing ${Pv[yh[t]]}`,Rv=e=>`Private type references should not include '#'. Use '${e}' instead.`,xh="Optional definitions like 'string?' are only valid as properties in an object or tuple",bh="Defaultable definitions like 'number = 0' are only valid as properties in an object or tuple",dn={"<":1,">":1,"=":1,"|":1,"&":1,")":1,"[":1,"%":1,",":1,":":1,"?":1,"#":1,...cs},Ev=(e,t)=>e===">"?t[0]==="="?t[1]==="=":t.trimStart()===""||ze(t.trimStart()[0],dn):e==="="?t[0]!=="=":e===","||e==="?",Iv=(e,t,n)=>vh(e,t,n,[]),vh=(e,t,n,r)=>{const s=n.parseUntilFinalizer();return r.push(s.root),s.finalizer===">"?r.length!==t.params.length?n.error(wh(e,t.names,r.map(i=>i.expression))):r:s.finalizer===","?vh(e,t,n,r):s.error(hd(">"))},wh=(e,t,n)=>`${e}<${t.join(", ")}> requires exactly ${t.length} args (got ${n.length}${n.length===0?"":`: ${n.join(", ")}`})`,Ic=e=>{const t=e.scanner.shiftUntilLookahead(dn);t==="keyof"?e.addPrefix("keyof"):e.root=Mv(e,t)},jv=(e,t,n)=>{if(n.scanner.shiftUntilNonWhitespace(),n.scanner.shift()!=="<")return n.error(wh(e,t.names,[]));const s=Iv(e,t,n);return t(...s)},Mv=(e,t)=>Tv(e,t)??Bv(e,t)??e.error(t===""?e.scanner.lookahead==="#"?Rv(e.shiftedByOne().scanner.shiftUntilLookahead(dn)):Sh(e):dh(t)),Tv=(e,t)=>{if(e.ctx.args?.[t]){const r=e.ctx.args[t];return typeof r!="string"?r:e.ctx.$.node("alias",{reference:r},{prereduced:!0})}const n=e.ctx.$.maybeResolve(t);if(M(n,"root"))return n;if(n!==void 0)return M(n,"generic")?jv(t,n,e):N(`Unexpected resolution ${F(n)}`)},Bv=(e,t)=>{const n=Qy(t);if(n!==void 0)return e.ctx.$.node("unit",{unit:n});const r=Jy(t);if(r!==void 0)return e.ctx.$.node("unit",{unit:r})},Sh=e=>{const t=e.previousOperator();return t?kh(t,e.scanner.unscanned):Dv(e.scanner.unscanned)},kh=(e,t="")=>`Token '${e}' requires a right operand${t?` before '${t}'`:""}`,Dv=e=>`Expected an expression${e?` before '${e}'`:""}`,Ch=e=>e.scanner.lookahead===""?e.error(Sh(e)):e.scanner.lookahead==="("?e.shiftedByOne().reduceGroupOpen():e.scanner.lookaheadIsIn(Sv)?Ec(e,e.scanner.shift()):e.scanner.lookaheadIsIn(cs)?Ch(e.shiftedByOne()):e.scanner.lookahead==="d"&&e.scanner.nextLookahead in gh?Ec(e,`${e.scanner.shift()}${e.scanner.shift()}`):Ic(e),Lv={">":!0,">=":!0},Ov={"<":!0,"<=":!0},_r={"<":">",">":"<","<=":">=",">=":"<=","==":"=="},Fv=(e,t)=>`Left bounds are only valid when paired with right bounds (try ...${t}${e})`,Ph=e=>`Left-bounded expressions must specify their limits using < or <= (was ${e})`,Vv=(e,t,n,r)=>`An expression may have at most one left bound (parsed ${e}${_r[t]}, ${n}${_r[r]})`,$v=(e,t)=>{const n=Kv(e,t);if(e.root.hasKind("unit")){if(typeof e.root.unit=="number"){e.reduceLeftBound(e.root.unit,n),e.unsetRoot();return}if(e.root.unit instanceof Date){const r=`d'${e.root.description??e.root.unit.toISOString()}'`;e.unsetRoot(),e.reduceLeftBound(r,n);return}}return qv(e,n)},Uv={"<":1,">":1,"=":1},Kv=(e,t)=>e.scanner.lookaheadIs("=")?`${t}${e.scanner.shift()}`:t,jc=(e,t,n,r)=>n.extends(E.intrinsic.number)?typeof t!="number"?N(Bi(e,t,r)):e==="=="?["min","max"]:e[0]===">"?["min"]:["max"]:n.extends(E.intrinsic.lengthBoundable)?typeof t!="number"?N(Bi(e,t,r)):e==="=="?["exactLength"]:e[0]===">"?["minLength"]:["maxLength"]:n.extends(E.intrinsic.Date)?e==="=="?["after","before"]:e[0]===">"?["after"]:["before"]:N(Fx(n.expression)),zv=e=>({rule:xv(e.limit)?bv(e.limit):e.limit,exclusive:e.comparator.length===1}),qv=(e,t)=>{const n=e.unsetRoot(),r=e.scanner.location;e.parseOperand();const s=e.unsetRoot(),i=e.scanner.sliceChars(r,e.scanner.location);if(e.root=n,!s.hasKind("unit")||typeof s.unit!="number"&&!(s.unit instanceof Date))return e.error(Bi(t,i,"right"));const o=s.unit,a=t.length===1,c=jc(t,typeof o=="number"?o:i,n,"right");for(const u of c)e.constrainRoot(u,t==="=="?{rule:o}:{rule:o,exclusive:a});if(!e.branches.leftBound)return;if(!ze(t,Ov))return e.error(Ph(t));const l=jc(e.branches.leftBound.comparator,e.branches.leftBound.limit,n,"left");e.constrainRoot(l[0],zv(e.branches.leftBound)),e.branches.leftBound=null},Bi=(e,t,n)=>`Comparator ${n==="left"?_r[e]:e} must be ${n==="left"?"preceded":"followed"} by a corresponding literal (was ${t})`,Hv=e=>{e.scanner.shiftUntilNonWhitespace();const t=e.scanner.shiftUntilLookahead(dn);e.root=e.root.brand(t)},Wv=e=>{e.scanner.shiftUntilNonWhitespace();const t=e.scanner.shiftUntilLookahead(dn),n=Gy(t,{errorOnFail:Mc(t)});n===0&&e.error(Mc(0)),e.root=e.root.constrain("divisor",n)},Mc=e=>`% operator must be followed by a non-zero integer literal (was ${e})`,Nh=e=>{const t=e.scanner.shift();return t===""?e.finalize(""):t==="["?e.scanner.shift()==="]"?e.setRoot(e.root.array()):e.error(Qv):t==="|"?e.scanner.lookahead===">"?e.shiftedByOne().pushRootToBranch("|>"):e.pushRootToBranch(t):t==="&"?e.pushRootToBranch(t):t===")"?e.finalizeGroup():Ev(t,e.scanner.unscanned)?e.finalize(t):ze(t,Uv)?$v(e,t):t==="%"?Wv(e):t==="#"?Hv(e):t in cs?Nh(e):e.error(Bo(t))},Bo=(e,t="")=>`'${e}' is not allowed here${t&&` (should be ${t})`}`,Qv="Missing expected ']'",Gv=e=>{const t=e.unsetRoot();e.parseOperand();const n=e.unsetRoot();if(!n.hasKind("unit"))return e.error(Jv(n.expression));const r=n.unit instanceof Date?()=>new Date(n.unit):n.unit;return[t,"=",r]},Jv=e=>`Default value '${e}' must be a literal value`,Tc=(e,t)=>{const n=t.$.maybeResolveRoot(e);if(n)return n;if(e.endsWith("[]")){const i=t.$.maybeResolveRoot(e.slice(0,-2));if(i)return i.array()}const r=new ps(new dd(e),t),s=_v(r);return r.finalizer===">"&&N(Bo(">")),s},_v=e=>{e.parseOperand();let t=Do(e).root;return t?(e.finalizer==="="?t=Gv(e):e.finalizer==="?"&&(t=[t,"?"]),e.scanner.shiftUntilNonWhitespace(),e.scanner.lookahead&&N(Bo(e.scanner.lookahead)),t):Y(`Root was unexpectedly unset after parsing string '${e.scanner.scanned}'`)},Do=e=>{for(;e.finalizer===void 0;)Xv(e);return e},Xv=e=>e.hasRoot()?e.parseOperator():e.parseOperand();class ps{root;branches={prefixes:[],leftBound:null,intersection:null,union:null,pipe:null};finalizer;groups=[];scanner;ctx;constructor(t,n){this.scanner=t,this.ctx=n}error(t){return N(t)}hasRoot(){return this.root!==void 0}setRoot(t){this.root=t}unsetRoot(){const t=this.root;return this.root=void 0,t}constrainRoot(...t){this.root=this.root.constrain(t[0],t[1])}finalize(t){if(this.groups.length)return this.error(hd(")"));this.finalizeBranches(),this.finalizer=t}reduceLeftBound(t,n){const r=_r[n];if(!ze(r,Lv))return this.error(Ph(n));if(this.branches.leftBound)return this.error(Vv(this.branches.leftBound.limit,this.branches.leftBound.comparator,t,r));this.branches.leftBound={comparator:r,limit:t}}finalizeBranches(){if(this.assertRangeUnset(),this.branches.pipe){this.pushRootToBranch("|>"),this.root=this.branches.pipe;return}if(this.branches.union){this.pushRootToBranch("|"),this.root=this.branches.union;return}if(this.branches.intersection){this.pushRootToBranch("&"),this.root=this.branches.intersection;return}this.applyPrefixes()}finalizeGroup(){this.finalizeBranches();const t=this.groups.pop();if(!t)return this.error(rx(")",this.scanner.unscanned));this.branches=t}addPrefix(t){this.branches.prefixes.push(t)}applyPrefixes(){for(;this.branches.prefixes.length;){const t=this.branches.prefixes.pop();this.root=t==="keyof"?this.root.keyof():Y(`Unexpected prefix '${t}'`)}}pushRootToBranch(t){this.assertRangeUnset(),this.applyPrefixes();const n=this.root;this.root=void 0,this.branches.intersection=this.branches.intersection?.rawAnd(n)??n,t!=="&"&&(this.branches.union=this.branches.union?.rawOr(this.branches.intersection)??this.branches.intersection,this.branches.intersection=null,t!=="|"&&(this.branches.pipe=this.branches.pipe?.rawPipeOnce(this.branches.union)??this.branches.union,this.branches.union=null))}parseUntilFinalizer(){return Do(new ps(this.scanner,this.ctx))}parseOperator(){return Nh(this)}parseOperand(){return Ch(this)}assertRangeUnset(){if(this.branches.leftBound)return this.error(Fv(this.branches.leftBound.limit,this.branches.leftBound.comparator))}reduceGroupOpen(){this.groups.push(this.branches),this.branches={prefixes:[],leftBound:null,union:null,intersection:null,pipe:null}}previousOperator(){return this.branches.leftBound?.comparator??this.branches.prefixes.at(-1)??(this.branches.intersection?"&":this.branches.union?"|":this.branches.pipe?"|>":void 0)}shiftedByOne(){return this.scanner.shift(),this}}const Zv="An empty string is not a valid generic parameter name",Di=(e,t,n)=>{e.shiftUntilNonWhitespace();const r=e.shiftUntilLookahead(dn);return r===""?e.lookahead===""&&t.length?t:N(Zv):(e.shiftUntilNonWhitespace(),Yv(e,r,t,n))},Bc="extends ",Yv=(e,t,n,r)=>{if(e.shiftUntilNonWhitespace(),e.unscanned.startsWith(Bc))e.jumpForward(Bc.length);else return e.lookahead===","&&e.shift(),n.push(t),Di(e,n,r);const s=Do(new ps(e,r));return n.push([t,s.root]),Di(e,n,r)};class e0 extends mt{constructor(t){const n={$:t,raw:t.fn};super((...r)=>{const s=r.indexOf(":"),i=s===-1?r.length-1:s-1,o=r.slice(0,i+1),a=t.parse(o).assertHasKind("intersection");let c=t.intrinsic.unknown;if(s!==-1){if(s!==r.length-2)return N(n0);c=t.parse(r[s+1])}return l=>new t0(l,a,c)},{attach:n})}}class t0 extends mt{raw;params;returns;expression;constructor(t,n,r){const s=`typed ${t.name}`,i={[s]:(...a)=>{const c=n.assert(a),l=t(...c);return r.assert(l)}}[s];super(i),this.raw=t,this.params=n,this.returns=r;let o=n.expression;o[0]==="["&&o.at(-1)==="]"?o=o.slice(1,-1):o.endsWith("[]")&&(o=`...${o}`),this.expression=`(${o}) => ${r?.expression??"unknown"}`}}const n0=`":" must be followed by exactly one return type e.g:
fn("string", ":", "number")(s => s.length)`;class r0 extends mt{$;constructor(t){super((...n)=>new br(t)(...n),{bind:t}),this.$=t}in(t){return new br(this.$,t===void 0?void 0:this.$.parse(t))}at(t,n){return new br(this.$).at(t,n)}case(t,n){return new br(this.$).case(t,n)}}class br extends mt{$;in;key;branches=[];constructor(t,n){super(r=>this.caseEntries(Object.entries(r).map(([s,i])=>s==="default"?[s,i]:[this.$.parse(s),i]))),this.$=t,this.in=n}at(t,n){return this.key&&N(i0),this.branches.length&&N(s0),this.key=t,n?this.match(n):this}case(t,n){return this.caseEntry(this.$.parse(t),n)}caseEntry(t,n){const s=(this.key?this.$.parse({[this.key]:t}):t).pipe(n);return this.branches.push(s),this}match(t){return this(t)}strings(t){return this.caseEntries(Object.entries(t).map(([n,r])=>n==="default"?[n,r]:[this.$.node("unit",{unit:n}),r]))}caseEntries(t){for(let n=0;n<t.length;n++){const[r,s]=t[n];if(r==="default")return n!==t.length-1&&N("default may only be specified as the last key of a switch definition"),this.default(s);if(typeof s!="function")return N(`Value for case "${r}" must be a function (was ${Te(s)})`);this.caseEntry(r,s)}return this}default(t){typeof t=="function"&&this.case(B.unknown,t);const n={branches:this.branches,ordered:!0};(t==="never"||t==="assert")&&(n.meta={onFail:Dc});const r=this.$.node("union",n);if(!this.in)return this.$.finalize(r);let s=this.in.pipe(r);return(t==="never"||t==="assert")&&(s=s.configureReferences({onFail:Dc},"self")),this.$.finalize(s)}}const Dc=e=>e.throw(),s0="A key matcher must be specified before the first case i.e. match.at('foo') or match.in<object>().at('bar')",i0="At most one key matcher may be specified per expression",Rh=(e,t)=>{if(le(e)){if(e[1]==="=")return[t.$.parseOwnDefinitionFormat(e[0],t),"=",e[2]];if(e[1]==="?")return[t.$.parseOwnDefinitionFormat(e[0],t),"?"]}return Dh(e,t)},o0="Only required keys may make their values optional, e.g. { [mySymbol]: ['number', '?'] }",a0="Only required keys may specify default values, e.g. { value: 'number = 0' }",c0=(e,t)=>{let n;const r={},s=Kr(e);for(const[o,a]of s){const c=d0(o);if(c.kind==="spread"){if(!Qn(r))return N(u0);const p=t.$.parseOwnDefinitionFormat(a,t);if(p.equals(B.object))continue;if(!p.hasKind("intersection")||!p.basis?.equals(B.object))return N(h0(p.expression));n=p.structure;continue}if(c.kind==="undeclared"){a!=="reject"&&a!=="delete"&&a!=="ignore"&&N(l0(a)),r.undeclared=a;continue}const l=Rh(a,t),u=c;if(c.kind==="required"){le(l)?Us(r,"optional",l[1]==="="?{key:c.normalized,value:l[0],default:l[2]}:{key:c.normalized,value:l[0]},t):Us(r,"required",{key:c.normalized,value:l},t);continue}if(le(l)&&(l[1]==="?"&&N(o0),l[1]==="="&&N(a0)),c.kind==="optional"){Us(r,"optional",{key:c.normalized,value:l},t);continue}const h=t.$.parseOwnDefinitionFormat(u.normalized,t),f=ji(h,l,t.$);f.index&&(r.index=V(r.index,f.index)),f.required&&(r.required=V(r.required,f.required))}const i=t.$.node("structure",r);return t.$.parseSchema({domain:"object",structure:n?.merge(i)??i})},Us=(e,t,n,r)=>{e[t]=V(e[t],r.$.node(t,n))},l0=e=>`Value of '+' key must be 'reject', 'delete', or 'ignore' (was ${F(e)})`,u0="Spread operator may only be used as the first key in an object",d0=e=>typeof e=="symbol"?{kind:"required",normalized:e}:e.at(-1)==="?"?e.at(-2)===Rn?{kind:"required",normalized:`${e.slice(0,-2)}?`}:{kind:"optional",normalized:e.slice(0,-1)}:e[0]==="["&&e.at(-1)==="]"?{kind:"index",normalized:e.slice(1,-1)}:e[0]===Rn&&e[1]==="["&&e.at(-1)==="]"?{kind:"required",normalized:e.slice(1)}:e==="..."?{kind:"spread"}:e==="+"?{kind:"undeclared"}:{kind:"required",normalized:e==="\\..."?"...":e==="\\+"?"+":e},h0=e=>`Spread operand must resolve to an object literal type (was ${e})`,f0=(e,t)=>S0(e)?Mh[e[0]](e,t):v0(e)?jh[e[1]](e,t):null,p0=(e,t)=>t.$.parseOwnDefinitionFormat(e[1],t).keyof(),Ks=(e,t)=>{if(e[2]===void 0)return N(kh(e[1],""));const n=t.$.parseOwnDefinitionFormat(e[0],t),r=t.$.parseOwnDefinitionFormat(e[2],t);if(e[1]==="|")return t.$.node("union",{branches:[n,r]});const s=e[1]==="&"?Ze(n,r,t.$):Ri(n,r,t.$);return s instanceof I?s.throw():s},m0=(e,t)=>t.$.parseOwnDefinitionFormat(e[0],t).array(),A0=(e,t)=>typeof e[2]!="function"?N(Eh("=>",e[2])):t.$.parseOwnDefinitionFormat(e[0],t).pipe(e[2]),Eh=(e,t)=>`${e===":"?"Narrow":"Morph"} expression requires a function following '${e}' (was ${typeof t})`,g0=(e,t)=>typeof e[2]!="function"?N(Eh(":",e[2])):t.$.parseOwnDefinitionFormat(e[0],t).constrain("predicate",e[2]),y0=(e,t)=>t.$.parseOwnDefinitionFormat(e[0],t).configure(e[2],e[3]),Ih=e=>e,x0=Ih({"[]":m0,"?":()=>N(xh)}),b0=Ih({"|":Ks,"&":Ks,":":g0,"=>":A0,"|>":Ks,"@":y0,"=":()=>N(bh)}),jh={...x0,...b0},v0=e=>jh[e[1]]!==void 0,w0=e=>e,Mh=w0({keyof:p0,instanceof:(e,t)=>{if(typeof e[1]!="function")return N(Lc(vi(e[1])));const n=e.slice(1).map(r=>typeof r=="function"?t.$.node("proto",{proto:r}):N(Lc(vi(r))));return n.length===1?n[0]:t.$.node("union",{branches:n})},"===":(e,t)=>t.$.units(e.slice(1))}),S0=e=>Mh[e[0]]!==void 0,Lc=e=>`Expected a constructor following 'instanceof' operator (was ${e})`,k0=(e,t)=>{let n=[{}],r=0;for(;r<e.length;){let s=!1;e[r]==="..."&&r<e.length-1&&(s=!0,r++);const i=Rh(e[r],t),[o,a,c]=le(i)?i:[i];if(r++,s){if(!o.extends(E.intrinsic.Array))return N(N0(o.expression));n=n.flatMap(l=>o.distribute(u=>P0(gd(l),u)))}else n=n.map(l=>a==="?"?Th(l,o):a==="="?C0(l,o,c):Li(l,o))}return t.$.parseSchema(n.map(s=>Qn(s)?{proto:Array,exactLength:0}:{proto:Array,sequence:s}))},Li=(e,t)=>e.defaultables||e.optionals?N(e.variadic?eh:R0):(e.variadic?e.postfix=V(e.postfix,t):e.prefix=V(e.prefix,t),e),Th=(e,t)=>e.variadic?N(Bh):(e.optionals=V(e.optionals,t),e),C0=(e,t,n)=>e.variadic?N(Bh):e.optionals?N(E0):(e.defaultables=V(e.defaultables,[[t,n]]),e),Oc=(e,t)=>(e.postfix&&N(Fc),e.variadic?e.variadic.equals(t)||N(Fc):e.variadic=t.internal,e),P0=(e,t)=>{const n=t.select({method:"find",kind:"sequence"});if(!n)return Oc(e,E.intrinsic.unknown);if(n.prefix)for(const r of n.prefix)Li(e,r);if(n.optionals)for(const r of n.optionals)Th(e,r);if(n.variadic&&Oc(e,n.variadic),n.postfix)for(const r of n.postfix)Li(e,r);return e},N0=e=>`Spread element must be an array (was ${e})`,Fc="A tuple may have at most one variadic element",R0="A required element may not follow an optional element",Bh="An optional element may not follow a variadic element",E0="A defaultable element may not follow an optional element without a default",I0={},Dh=(e,t)=>{if(typeof e=="string"){if(t.args&&Object.keys(t.args).some(r=>e.includes(r)))return Tc(e,t);const n=I0[t.$.name]??={};return n[e]??=Tc(e,t)}return Lt(e,"object")?j0(e,t):N(Oi(Te(e)))},j0=(e,t)=>{const n=xo(e);switch(n){case void 0:return M(e,"root")?e:c0(e,t);case"Array":return M0(e,t);case"RegExp":return t.$.node("intersection",{domain:"string",pattern:e},{prereduced:!0});case"Function":{const r=as(e)?e():e;return M(r,"root")?r:N(Oi("Function"))}default:return N(Oi(n??F(e)))}},M0=(e,t)=>f0(e,t)??k0(e,t),Oi=e=>`Type definitions must be strings or objects (was ${e})`;class T0 extends mt{constructor(t){const n=Object.assign({errors:ht,hkt:qe,$:t,raw:t.parse,module:t.constructor.module,scope:t.constructor.scope,declare:t.declare,define:t.define,match:t.match,generic:t.generic,schema:t.schema,keywords:t.ambient,unit:t.unit,enumerated:t.enumerated,instanceOf:t.instanceOf,valueOf:t.valueOf,or:t.or,and:t.and,merge:t.merge,pipe:t.pipe,fn:t.fn},t.ambientAttachments);super((...r)=>{if(r.length===1)return t.parse(r[0]);if(r.length===2&&typeof r[0]=="string"&&r[0][0]==="<"&&r[0].at(-1)===">"){const s=r[0].slice(1,-1),i=t.parseGenericParams(s,{});return new Gr(i,r[1],t,t,null)}return t.parse(r)},{attach:n})}}const On=E;class ms extends ah{get ambientAttachments(){if(On.typeAttachments)return this.cacheGetter("ambientAttachments",$(On.typeAttachments,(t,n)=>[t,this.bindReference(n)]))}preparseOwnAliasEntry(t,n){const r=t.indexOf("<");if(r===-1){if(M(n,"module")||M(n,"generic"))return[t,n];const o=this.name==="ark"?t:t==="root"?this.name:`${this.name}.${t}`,a=this.resolvedConfig.keywords?.[o];return a&&(n=[n,"@",a]),[t,n]}t.at(-1)!==">"&&N("'>' must be the last character of a generic declaration in a scope");const s=t.slice(0,r),i=t.slice(r+1,-1);return[s,()=>{const o=this.parseGenericParams(i,{alias:s});return kx(o,n,this)}]}parseGenericParams(t,n){return Di(new dd(t),[],this.createParseContext({...n,def:t,prefix:"generic"}))}normalizeRootScopeValue(t){return as(t)&&!M(t,"generic")?t():t}preparseOwnDefinitionFormat(t,n){return{...n,def:t,prefix:n.alias??"type"}}parseOwnDefinitionFormat(t,n){!(n.alias&&n.alias in this.aliases)&&!n.args&&(n.args={this:n.id});const s=Dh(t,n);if(le(s)){if(s[1]==="=")return N(bh);if(s[1]==="?")return N(xh)}return s}unit=t=>this.units([t]);valueOf=t=>this.units(xy(t));enumerated=(...t)=>this.units(t);instanceOf=t=>this.node("proto",{proto:t},{prereduced:!0});or=(...t)=>this.schema(t.map(n=>this.parse(n)));and=(...t)=>t.reduce((n,r)=>n.and(this.parse(r)),this.intrinsic.unknown);merge=(...t)=>t.reduce((n,r)=>n.merge(this.parse(r)),this.intrinsic.object);pipe=(...t)=>this.intrinsic.unknown.pipe(...t);fn=new e0(this);match=new r0(this);declare=()=>({type:this.type});define(t){return t}type=new T0(this);static scope=((t,n={})=>new ms(t,n));static module=((t,n={})=>this.scope(t,n).export())}const B0=Object.assign(ms.scope,{define:e=>e}),L=ms;class D0 extends qe{description='merge an object\'s properties onto another like `Merge(User, { isAdmin: "true" })`'}const L0=tt(["base",B.object],["props",B.object])(e=>e.base.merge(e.props),D0),O0=L.module({Key:B.key,Merge:L0});class F0 extends qe{}const V0=tt("element")(e=>{const t=e.element.exclude(B.Array),n=t.array();return t.rawOr(n).pipe(Wn).distribute(r=>r.assertHasKind("morph").declareOut(n),K)},F0),$0=L.module({root:B.Array,readonly:"root",index:B.nonNegativeIntegerString,liftFrom:V0},{name:"Array"}),Fi=K(["string",Gn.FileConstructor]),U0=Fi.rawOr(Fi.array()),Vc=K({meta:"an object representing parsed form data",domain:"object",index:{signature:"string",value:U0}}),K0=L.module({root:["instanceof",FormData],value:Fi,parsed:Vc,parse:K({in:FormData,morphs:e=>{const t={};for(const[n,r]of e)if(n in t){const s=t[n];typeof s=="string"||s instanceof Gn.FileConstructor?t[n]=[s,r]:s.push(r)}else t[n]=r;return t},declaredOut:Vc})},{name:"FormData"}),z0=L.module({Int8:["instanceof",Int8Array],Uint8:["instanceof",Uint8Array],Uint8Clamped:["instanceof",Uint8ClampedArray],Int16:["instanceof",Int16Array],Uint16:["instanceof",Uint16Array],Int32:["instanceof",Int32Array],Uint32:["instanceof",Uint32Array],Float32:["instanceof",Float32Array],Float64:["instanceof",Float64Array],BigInt64:["instanceof",BigInt64Array],BigUint64:["instanceof",BigUint64Array]},{name:"TypedArray"}),q0={Boolean:1,Number:1,String:1},H0=L.module({...$({...ed,...nd},(e,t)=>e in q0?[]:[e,["instanceof",t]]),Array:$0,TypedArray:z0,FormData:K0}),W0=K({domain:{domain:"number",meta:"a number representing a Unix timestamp"},divisor:{rule:1,meta:"an integer representing a Unix timestamp"},min:{rule:-864e13,meta:"a Unix timestamp after -8640000000000000"},max:{rule:864e13,meta:"a Unix timestamp before 8640000000000000"},meta:"an integer representing a safe Unix timestamp"}),Q0=K({domain:"number",divisor:1}),Lh=L.module({root:B.number,integer:Q0,epoch:W0,safe:K({domain:{domain:"number",numberAllowsNaN:!1},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER}),NaN:["===",Number.NaN],Infinity:["===",Number.POSITIVE_INFINITY],NegativeInfinity:["===",Number.NEGATIVE_INFINITY]},{name:"number"}),z=(e,t,n)=>{const r={domain:"string",pattern:{rule:e.source,flags:e.flags,meta:t}};return n&&(r.meta={format:n}),To("intersection",r)},$c=z(zr,"a well-formed integer string"),Oh=L.module({root:$c,parse:K({in:$c,morphs:(e,t)=>{const n=Number.parseInt(e);return Number.isSafeInteger(n)?n:t.error("an integer in the range Number.MIN_SAFE_INTEGER to Number.MAX_SAFE_INTEGER")},declaredOut:B.integer})},{name:"string.integer"}),G0=z(/^[\dA-Fa-f]+$/,"hex characters only"),J0=L.module({root:z(/^(?:[\d+/A-Za-z]{4})*(?:[\d+/A-Za-z]{2}==|[\d+/A-Za-z]{3}=)?$/,"base64-encoded"),url:z(/^(?:[\w-]{4})*(?:[\w-]{2}(?:==|%3D%3D)?|[\w-]{3}(?:=|%3D)?)?$/,"base64url-encoded")},{name:"string.base64"}),Uc=z(/^[A-Z].*$/,"capitalized"),_0=L.module({root:K({in:"string",morphs:e=>e.charAt(0).toUpperCase()+e.slice(1),declaredOut:Uc}),preformatted:Uc},{name:"string.capitalize"}),X0=e=>{const t=e.replaceAll(/[ -]+/g,"");let n=0,r,s,i=!1;for(let o=t.length-1;o>=0;o--)r=t.substring(o,o+1),s=Number.parseInt(r,10),i?(s*=2,n+=s>=10?s%10+1:s):n+=s,i=!i;return!!(n%10===0&&t)},Z0=/^(?:4\d{12}(?:\d{3,6})?|5[1-5]\d{14}|(222[1-9]|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}|6(?:011|5\d\d)\d{12,15}|3[47]\d{13}|3(?:0[0-5]|[68]\d)\d{11}|(?:2131|1800|35\d{3})\d{11}|6[27]\d{14}|^(81\d{14,17}))$/,Y0=K({domain:"string",pattern:{meta:"a credit card number",rule:Z0.source},predicate:{meta:"a credit card number",predicate:X0}}),ew=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))(T((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([,.]\d+(?!:))?)?(\17[0-5]\d([,.]\d+)?)?([Zz]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,tw=e=>!Number.isNaN(new Date(e).valueOf()),Kc=K({domain:"string",predicate:{meta:"a parsable date",predicate:tw}}).assertHasKind("intersection"),zc=Oh.root.internal.narrow((e,t)=>{const n=Number.parseInt(e),r=Lh.epoch(n);return r instanceof ht?(t.errors.merge(r),!1):!0}).configure({description:"an integer string representing a safe Unix timestamp"},"self").assertHasKind("intersection"),nw=L.module({root:zc,parse:K({in:zc,morphs:e=>new Date(e),declaredOut:B.Date})},{name:"string.date.epoch"}),qc=z(ew,"an ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ) date").internal.assertHasKind("intersection"),rw=L.module({root:qc,parse:K({in:qc,morphs:e=>new Date(e),declaredOut:B.Date})},{name:"string.date.iso"}),sw=L.module({root:Kc,parse:K({declaredIn:Kc,in:"string",morphs:(e,t)=>{const n=new Date(e);return Number.isNaN(n.valueOf())?t.error("a parsable date"):n},declaredOut:B.Date}),iso:rw,epoch:nw},{name:"string.date"}),iw=z(/^[\w%+.-]+@[\d.A-Za-z-]+\.[A-Za-z]{2,}$/,"an email address","email"),Hc="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",rt=`(${Hc}[.]){3}${Hc}`,ow=new RegExp(`^${rt}$`),X="(?:[0-9a-fA-F]{1,4})",aw=new RegExp(`^((?:${X}:){7}(?:${X}|:)|(?:${X}:){6}(?:${rt}|:${X}|:)|(?:${X}:){5}(?::${rt}|(:${X}){1,2}|:)|(?:${X}:){4}(?:(:${X}){0,1}:${rt}|(:${X}){1,3}|:)|(?:${X}:){3}(?:(:${X}){0,2}:${rt}|(:${X}){1,4}|:)|(?:${X}:){2}(?:(:${X}){0,3}:${rt}|(:${X}){1,5}|:)|(?:${X}:){1}(?:(:${X}){0,4}:${rt}|(:${X}){1,6}|:)|(?::((?::${X}){0,5}:${rt}|(?::${X}){1,7}|:)))(%[0-9a-zA-Z.]{1,})?$`),cw=L.module({root:["v4 | v6","@","an IP address"],v4:z(ow,"an IPv4 address","ipv4"),v6:z(aw,"an IPv6 address","ipv6")},{name:"string.ip"}),_t="a JSON string",Fh=e=>{if(!(e instanceof SyntaxError))throw e;return`must be ${_t} (${e})`},lw=K({meta:_t,domain:"string",predicate:{meta:_t,predicate:(e,t)=>{try{return JSON.parse(e),!0}catch(n){return t.reject({code:"predicate",expected:_t,problem:Fh(n)})}}}}),uw=(e,t)=>{if(e.length===0)return t.error({code:"predicate",expected:_t,actual:"empty"});try{return JSON.parse(e)}catch(n){return t.error({code:"predicate",expected:_t,problem:Fh(n)})}},dw=L.module({root:lw,parse:K({meta:"safe JSON string parser",in:"string",morphs:uw,declaredOut:B.jsonObject})},{name:"string.json"}),Wc=z(/^[a-z]*$/,"only lowercase letters"),hw=L.module({root:K({in:"string",morphs:e=>e.toLowerCase(),declaredOut:Wc}),preformatted:Wc},{name:"string.lower"}),Vh=["NFC","NFD","NFKC","NFKD"],tr=$(Vh,(e,t)=>[t,K({domain:"string",predicate:n=>n.normalize(t)===n,meta:`${t}-normalized unicode`})]),As=$(Vh,(e,t)=>[t,K({in:"string",morphs:n=>n.normalize(t),declaredOut:tr[t]})]),fw=L.module({root:As.NFC,preformatted:tr.NFC},{name:"string.normalize.NFC"}),pw=L.module({root:As.NFD,preformatted:tr.NFD},{name:"string.normalize.NFD"}),mw=L.module({root:As.NFKC,preformatted:tr.NFKC},{name:"string.normalize.NFKC"}),Aw=L.module({root:As.NFKD,preformatted:tr.NFKD},{name:"string.normalize.NFKD"}),gw=L.module({root:"NFC",NFC:fw,NFD:pw,NFKC:mw,NFKD:Aw},{name:"string.normalize"}),Qc=z(wi,"a well-formed numeric string"),yw=L.module({root:Qc,parse:K({in:Qc,morphs:e=>Number.parseFloat(e),declaredOut:B.number})},{name:"string.numeric"}),Gc="a regex pattern",xw=K({domain:"string",predicate:{meta:Gc,predicate:(e,t)=>{try{return new RegExp(e),!0}catch(n){return t.reject({code:"predicate",expected:Gc,problem:String(n)})}}},meta:{format:"regex"}}),bw=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*)(?:\.(?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*))*))?(?:\+([\dA-Za-z-]+(?:\.[\dA-Za-z-]+)*))?$/,vw=z(bw,"a semantic version (see https://semver.org/)"),Jc=z(/^\S.*\S$|^\S?$/,"trimmed"),ww=L.module({root:K({in:"string",morphs:e=>e.trim(),declaredOut:Jc}),preformatted:Jc},{name:"string.trim"}),_c=z(/^[A-Z]*$/,"only uppercase letters"),Sw=L.module({root:K({in:"string",morphs:e=>e.toUpperCase(),declaredOut:_c}),preformatted:_c},{name:"string.upper"}),kw=e=>URL.canParse(e),Xc=K({domain:"string",predicate:{meta:"a URL string",predicate:kw},meta:{format:"uri"}}),Cw=L.module({root:Xc,parse:K({declaredIn:Xc,in:"string",morphs:(e,t)=>{try{return new URL(e)}catch{return t.error("a URL string")}},declaredOut:K(URL)})},{name:"string.url"}),Pw=L.module({root:["versioned | nil | max","@",{description:"a UUID",format:"uuid"}],"#nil":"'00000000-0000-0000-0000-000000000000'","#max":"'ffffffff-ffff-ffff-ffff-ffffffffffff'","#versioned":/[\da-f]{8}-[\da-f]{4}-[1-8][\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}/i,v1:z(/^[\da-f]{8}-[\da-f]{4}-1[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv1"),v2:z(/^[\da-f]{8}-[\da-f]{4}-2[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv2"),v3:z(/^[\da-f]{8}-[\da-f]{4}-3[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv3"),v4:z(/^[\da-f]{8}-[\da-f]{4}-4[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv4"),v5:z(/^[\da-f]{8}-[\da-f]{4}-5[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv5"),v6:z(/^[\da-f]{8}-[\da-f]{4}-6[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv6"),v7:z(/^[\da-f]{8}-[\da-f]{4}-7[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv7"),v8:z(/^[\da-f]{8}-[\da-f]{4}-8[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv8")},{name:"string.uuid"}),Nw=L.module({root:B.string,alpha:z(/^[A-Za-z]*$/,"only letters"),alphanumeric:z(/^[\dA-Za-z]*$/,"only letters and digits 0-9"),hex:G0,base64:J0,capitalize:_0,creditCard:Y0,date:sw,digits:z(/^\d*$/,"only digits 0-9"),email:iw,integer:Oh,ip:cw,json:dw,lower:hw,normalize:gw,numeric:yw,regex:xw,semver:vw,trim:ww,upper:Sw,url:Cw,uuid:Pw},{name:"string"}),Rw=L.module({bigint:B.bigint,boolean:B.boolean,false:B.false,never:B.never,null:B.null,number:B.number,object:B.object,string:B.string,symbol:B.symbol,true:B.true,unknown:B.unknown,undefined:B.undefined}),Ew=L.module({root:B.unknown,any:B.unknown},{name:"unknown"}),Iw=L.module({root:B.jsonObject,stringify:To("morph",{in:B.jsonObject,morphs:e=>JSON.stringify(e),declaredOut:B.string})},{name:"object.json"}),jw=L.module({root:B.object,json:Iw},{name:"object"});class Mw extends qe{description='instantiate an object from an index signature and corresponding value type like `Record("string", "number")`'}const Tw=tt(["K",B.key],"V")(e=>({domain:"object",index:{signature:e.K,value:e.V}}),Mw);class Bw extends qe{description='pick a set of properties from an object like `Pick(User, "name | age")`'}const Dw=tt(["T",B.object],["K",B.key])(e=>e.T.pick(e.K),Bw);class Lw extends qe{description='omit a set of properties from an object like `Omit(User, "age")`'}const Ow=tt(["T",B.object],["K",B.key])(e=>e.T.omit(e.K),Lw);class Fw extends qe{description="make all named properties of an object optional like `Partial(User)`"}const Vw=tt(["T",B.object])(e=>e.T.partial(),Fw);class $w extends qe{description="make all named properties of an object required like `Required(User)`"}const Uw=tt(["T",B.object])(e=>e.T.required(),$w);class Kw extends qe{description='exclude branches of a union like `Exclude("boolean", "true")`'}const zw=tt("T","U")(e=>e.T.exclude(e.U),Kw);class qw extends qe{description='extract branches of a union like `Extract("0 | false | 1", "number")`'}const Hw=tt("T","U")(e=>e.T.extract(e.U),qw),Ww=L.module({Exclude:zw,Extract:Hw,Omit:Ow,Partial:Vw,Pick:Dw,Record:Tw,Required:Uw}),At=B0({...Rw,...Ww,...H0,...O0,string:Nw,number:Lh,object:jw,unknown:Ew},{prereducedAliases:!0,name:"ark"}),ne=At.export();Object.assign(On.ambient,ne);On.typeAttachments={string:ne.string.root,number:ne.number.root,bigint:ne.bigint,boolean:ne.boolean,symbol:ne.symbol,undefined:ne.undefined,null:ne.null,object:ne.object.root,unknown:ne.unknown.root,false:ne.false,true:ne.true,never:ne.never,arrayIndex:ne.Array.index,Key:ne.Key,Record:ne.Record,Array:ne.Array.root,Date:ne.Date};const Qw=Object.assign(At.type,On.typeAttachments);At.match;At.fn;At.generic;At.schema;At.define;At.declare;const Lo=x.createContext({});function Oo(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const Fo=typeof window<"u",$h=Fo?x.useLayoutEffect:x.useEffect,gs=x.createContext(null);function Vo(e,t){e.indexOf(t)===-1&&e.push(t)}function $o(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ye=(e,t,n)=>n>t?t:n<e?e:n;let Uo=()=>{};const et={},Uh=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Kh(e){return typeof e=="object"&&e!==null}const zh=e=>/^0[^.\s]+$/u.test(e);function Ko(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ne=e=>e,Gw=(e,t)=>n=>t(e(n)),nr=(...e)=>e.reduce(Gw),Fn=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class zo{constructor(){this.subscriptions=[]}add(t){return Vo(this.subscriptions,t),()=>$o(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fe=e=>e*1e3,Pe=e=>e/1e3;function qh(e,t){return t?e*(1e3/t):0}const Hh=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Jw=1e-7,_w=12;function Xw(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=Hh(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>Jw&&++a<_w);return o}function rr(e,t,n,r){if(e===t&&n===r)return Ne;const s=i=>Xw(i,0,1,e,n);return i=>i===0||i===1?i:Hh(s(i),t,r)}const Wh=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Qh=e=>t=>1-e(1-t),Gh=rr(.33,1.53,.69,.99),qo=Qh(Gh),Jh=Wh(qo),_h=e=>(e*=2)<1?.5*qo(e):.5*(2-Math.pow(2,-10*(e-1))),Ho=e=>1-Math.sin(Math.acos(e)),Xh=Qh(Ho),Zh=Wh(Ho),Zw=rr(.42,0,1,1),Yw=rr(0,0,.58,1),Yh=rr(.42,0,.58,1),e1=e=>Array.isArray(e)&&typeof e[0]!="number",ef=e=>Array.isArray(e)&&typeof e[0]=="number",t1={linear:Ne,easeIn:Zw,easeInOut:Yh,easeOut:Yw,circIn:Ho,circInOut:Zh,circOut:Xh,backIn:qo,backInOut:Jh,backOut:Gh,anticipate:_h},n1=e=>typeof e=="string",Zc=e=>{if(ef(e)){Uo(e.length===4);const[t,n,r,s]=e;return rr(t,n,r,s)}else if(n1(e))return t1[e];return e},vr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r1(e,t){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(l.schedule(u),e()),u(a)}const l={schedule:(u,h=!1,f=!1)=>{const m=f&&s?n:r;return h&&o.add(u),m.has(u)||m.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,i&&(i=!1,l.process(u))}};return l}const s1=40;function tf(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=vr.reduce((v,k)=>(v[k]=r1(i),v),{}),{setup:a,read:c,resolveKeyframes:l,preUpdate:u,update:h,preRender:f,render:p,postRender:m}=o,y=()=>{const v=et.useManualTiming?s.timestamp:performance.now();n=!1,et.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,s1),1)),s.timestamp=v,s.isProcessing=!0,a.process(s),c.process(s),l.process(s),u.process(s),h.process(s),f.process(s),p.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(y))},A=()=>{n=!0,r=!0,s.isProcessing||e(y)};return{schedule:vr.reduce((v,k)=>{const P=o[k];return v[k]=(C,S=!1,w=!1)=>(n||A(),P.schedule(C,S,w)),v},{}),cancel:v=>{for(let k=0;k<vr.length;k++)o[vr[k]].cancel(v)},state:s,steps:o}}const{schedule:H,cancel:ft,state:ae,steps:zs}=tf(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ne,!0);let Ir;function i1(){Ir=void 0}const ye={now:()=>(Ir===void 0&&ye.set(ae.isProcessing||et.useManualTiming?ae.timestamp:performance.now()),Ir),set:e=>{Ir=e,queueMicrotask(i1)}},nf=e=>t=>typeof t=="string"&&t.startsWith(e),Wo=nf("--"),o1=nf("var(--"),Qo=e=>o1(e)?a1.test(e.split("/*")[0].trim()):!1,a1=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Vn={...hn,transform:e=>Ye(0,1,e)},wr={...hn,default:1},In=e=>Math.round(e*1e5)/1e5,Go=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function c1(e){return e==null}const l1=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jo=(e,t)=>n=>!!(typeof n=="string"&&l1.test(n)&&n.startsWith(e)||t&&!c1(n)&&Object.prototype.hasOwnProperty.call(n,t)),rf=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Go);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},u1=e=>Ye(0,255,e),qs={...hn,transform:e=>Math.round(u1(e))},kt={test:Jo("rgb","red"),parse:rf("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+qs.transform(e)+", "+qs.transform(t)+", "+qs.transform(n)+", "+In(Vn.transform(r))+")"};function d1(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Vi={test:Jo("#"),parse:d1,transform:kt.transform},sr=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),st=sr("deg"),Ve=sr("%"),T=sr("px"),h1=sr("vh"),f1=sr("vw"),Yc={...Ve,parse:e=>Ve.parse(e)/100,transform:e=>Ve.transform(e*100)},Kt={test:Jo("hsl","hue"),parse:rf("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ve.transform(In(t))+", "+Ve.transform(In(n))+", "+In(Vn.transform(r))+")"},Z={test:e=>kt.test(e)||Vi.test(e)||Kt.test(e),parse:e=>kt.test(e)?kt.parse(e):Kt.test(e)?Kt.parse(e):Vi.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?kt.transform(e):Kt.transform(e),getAnimatableNone:e=>{const t=Z.parse(e);return t.alpha=0,Z.transform(t)}},p1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m1(e){return isNaN(e)&&typeof e=="string"&&(e.match(Go)?.length||0)+(e.match(p1)?.length||0)>0}const sf="number",of="color",A1="var",g1="var(",el="${}",y1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $n(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=t.replace(y1,c=>(Z.test(c)?(r.color.push(i),s.push(of),n.push(Z.parse(c))):c.startsWith(g1)?(r.var.push(i),s.push(A1),n.push(c)):(r.number.push(i),s.push(sf),n.push(parseFloat(c))),++i,el)).split(el);return{values:n,split:a,indexes:r,types:s}}function af(e){return $n(e).values}function cf(e){const{split:t,types:n}=$n(e),r=t.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],s[o]!==void 0){const a=n[o];a===sf?i+=In(s[o]):a===of?i+=Z.transform(s[o]):i+=s[o]}return i}}const x1=e=>typeof e=="number"?0:Z.test(e)?Z.getAnimatableNone(e):e;function b1(e){const t=af(e);return cf(e)(t.map(x1))}const pt={test:m1,parse:af,createTransformer:cf,getAnimatableNone:b1};function Hs(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function v1({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=Hs(c,a,e+1/3),i=Hs(c,a,e),o=Hs(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Xr(e,t){return n=>n>0?t:e}const W=(e,t,n)=>e+(t-e)*n,Ws=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},w1=[Vi,kt,Kt],S1=e=>w1.find(t=>t.test(e));function tl(e){const t=S1(e);if(!t)return!1;let n=t.parse(e);return t===Kt&&(n=v1(n)),n}const nl=(e,t)=>{const n=tl(e),r=tl(t);if(!n||!r)return Xr(e,t);const s={...n};return i=>(s.red=Ws(n.red,r.red,i),s.green=Ws(n.green,r.green,i),s.blue=Ws(n.blue,r.blue,i),s.alpha=W(n.alpha,r.alpha,i),kt.transform(s))},$i=new Set(["none","hidden"]);function k1(e,t){return $i.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function C1(e,t){return n=>W(e,t,n)}function _o(e){return typeof e=="number"?C1:typeof e=="string"?Qo(e)?Xr:Z.test(e)?nl:R1:Array.isArray(e)?lf:typeof e=="object"?Z.test(e)?nl:P1:Xr}function lf(e,t){const n=[...e],r=n.length,s=e.map((i,o)=>_o(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function P1(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=_o(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function N1(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}const R1=(e,t)=>{const n=pt.createTransformer(t),r=$n(e),s=$n(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?$i.has(e)&&!s.values.length||$i.has(t)&&!r.values.length?k1(e,t):nr(lf(N1(r,s),s.values),n):Xr(e,t)};function uf(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?W(e,t,n):_o(e)(e,t)}const E1=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>H.update(t,n),stop:()=>ft(t),now:()=>ae.isProcessing?ae.timestamp:ye.now()}},df=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Zr=2e4;function Xo(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Zr;)t+=n,r=e.next(t);return t>=Zr?1/0:t}function I1(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(Xo(r),Zr);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:Pe(s)}}const j1=5;function hf(e,t,n){const r=Math.max(t-j1,0);return qh(n-e(r),t-r)}const G={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qs=.001;function M1({duration:e=G.duration,bounce:t=G.bounce,velocity:n=G.velocity,mass:r=G.mass}){let s,i,o=1-t;o=Ye(G.minDamping,G.maxDamping,o),e=Ye(G.minDuration,G.maxDuration,Pe(e)),o<1?(s=l=>{const u=l*o,h=u*e,f=u-n,p=Ui(l,o),m=Math.exp(-h);return Qs-f/p*m},i=l=>{const h=l*o*e,f=h*n+n,p=Math.pow(o,2)*Math.pow(l,2)*e,m=Math.exp(-h),y=Ui(Math.pow(l,2),o);return(-s(l)+Qs>0?-1:1)*((f-p)*m)/y}):(s=l=>{const u=Math.exp(-l*e),h=(l-n)*e+1;return-Qs+u*h},i=l=>{const u=Math.exp(-l*e),h=(n-l)*(e*e);return u*h});const a=5/e,c=B1(s,i,a);if(e=Fe(e),isNaN(c))return{stiffness:G.stiffness,damping:G.damping,duration:e};{const l=Math.pow(c,2)*r;return{stiffness:l,damping:o*2*Math.sqrt(r*l),duration:e}}}const T1=12;function B1(e,t,n){let r=n;for(let s=1;s<T1;s++)r=r-e(r)/t(r);return r}function Ui(e,t){return e*Math.sqrt(1-t*t)}const D1=["duration","bounce"],L1=["stiffness","damping","mass"];function rl(e,t){return t.some(n=>e[n]!==void 0)}function O1(e){let t={velocity:G.velocity,stiffness:G.stiffness,damping:G.damping,mass:G.mass,isResolvedFromDuration:!1,...e};if(!rl(e,L1)&&rl(e,D1))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Ye(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:G.mass,stiffness:s,damping:i}}else{const n=M1(e);t={...t,...n,mass:G.mass},t.isResolvedFromDuration=!0}return t}function Yr(e=G.visualDuration,t=G.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:l,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=O1({...n,velocity:-Pe(n.velocity||0)}),m=f||0,y=l/(2*Math.sqrt(c*u)),A=o-i,g=Pe(Math.sqrt(c/u)),b=Math.abs(A)<5;r||(r=b?G.restSpeed.granular:G.restSpeed.default),s||(s=b?G.restDelta.granular:G.restDelta.default);let v;if(y<1){const P=Ui(g,y);v=C=>{const S=Math.exp(-y*g*C);return o-S*((m+y*g*A)/P*Math.sin(P*C)+A*Math.cos(P*C))}}else if(y===1)v=P=>o-Math.exp(-g*P)*(A+(m+g*A)*P);else{const P=g*Math.sqrt(y*y-1);v=C=>{const S=Math.exp(-y*g*C),w=Math.min(P*C,300);return o-S*((m+y*g*A)*Math.sinh(w)+P*A*Math.cosh(w))/P}}const k={calculatedDuration:p&&h||null,next:P=>{const C=v(P);if(p)a.done=P>=h;else{let S=P===0?m:0;y<1&&(S=P===0?Fe(m):hf(v,P,C));const w=Math.abs(S)<=r,R=Math.abs(o-C)<=s;a.done=w&&R}return a.value=a.done?o:C,a},toString:()=>{const P=Math.min(Xo(k),Zr),C=df(S=>k.next(P*S).value,P,30);return P+"ms "+C},toTransition:()=>{}};return k}Yr.applyToOptions=e=>{const t=I1(e,100,Yr);return e.ease=t.ease,e.duration=Fe(t.duration),e.type="keyframes",e};function Ki({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},p=w=>a!==void 0&&w<a||c!==void 0&&w>c,m=w=>a===void 0?c:c===void 0||Math.abs(a-w)<Math.abs(c-w)?a:c;let y=n*t;const A=h+y,g=o===void 0?A:o(A);g!==A&&(y=g-h);const b=w=>-y*Math.exp(-w/r),v=w=>g+b(w),k=w=>{const R=b(w),j=v(w);f.done=Math.abs(R)<=l,f.value=f.done?g:j};let P,C;const S=w=>{p(f.value)&&(P=w,C=Yr({keyframes:[f.value,m(f.value)],velocity:hf(v,w,f.value),damping:s,stiffness:i,restDelta:l,restSpeed:u}))};return S(0),{calculatedDuration:null,next:w=>{let R=!1;return!C&&P===void 0&&(R=!0,k(w),S(w)),P!==void 0&&w>=P?C.next(w-P):(!R&&k(w),f)}}}function F1(e,t,n){const r=[],s=n||et.mix||uf,i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Ne:t;a=nr(c,a)}r.push(a)}return r}function V1(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Uo(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=F1(t,r,s),c=a.length,l=u=>{if(o&&u<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const f=Fn(e[h],e[h+1],u);return a[h](f)};return n?u=>l(Ye(e[0],e[i-1],u)):l}function $1(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Fn(0,t,r);e.push(W(n,1,s))}}function U1(e){const t=[0];return $1(t,e.length-1),t}function K1(e,t){return e.map(n=>n*t)}function z1(e,t){return e.map(()=>t||Yh).splice(0,e.length-1)}function jn({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=e1(r)?r.map(Zc):Zc(r),i={done:!1,value:t[0]},o=K1(n&&n.length===t.length?n:U1(t),e),a=V1(o,t,{ease:Array.isArray(s)?s:z1(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}const q1=e=>e!==null;function Zo(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(q1),a=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const H1={decay:Ki,inertia:Ki,tween:jn,keyframes:jn,spring:Yr};function ff(e){typeof e.type=="string"&&(e.type=H1[e.type])}class Yo{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const W1=e=>e/100;class ea extends Yo{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ye.now()&&this.tick(ye.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ff(t);const{type:n=jn,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:a}=t;const c=n||jn;c!==jn&&typeof a[0]!="number"&&(this.mixKeyframes=nr(W1,uf(a[0],a[1])),a=[0,100]);const l=c({...t,keyframes:a});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...a].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=Xo(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=l}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:l=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:y,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let v=this.currentTime,k=r;if(h){const w=Math.min(this.currentTime,s)/a;let R=Math.floor(w),j=w%1;!j&&w>=1&&(j=1),j===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(f==="reverse"?(j=1-j,p&&(j-=p/a)):f==="mirror"&&(k=o)),v=Ye(0,1,j)*a}const P=b?{done:!1,value:u[0]}:k.next(v);i&&(P.value=i(P.value));let{done:C}=P;!b&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return S&&m!==Ki&&(P.value=Zo(u,this.options,A,this.speed)),y&&y(P.value),S&&this.finish(),P}then(t,n){return this.finished.then(t,n)}get duration(){return Pe(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pe(t)}get time(){return Pe(this.currentTime)}set time(t){t=Fe(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ye.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Pe(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=E1,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ye.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Q1(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ct=e=>e*180/Math.PI,zi=e=>{const t=Ct(Math.atan2(e[1],e[0]));return qi(t)},G1={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:zi,rotateZ:zi,skewX:e=>Ct(Math.atan(e[1])),skewY:e=>Ct(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},qi=e=>(e=e%360,e<0&&(e+=360),e),sl=zi,il=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ol=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),J1={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:il,scaleY:ol,scale:e=>(il(e)+ol(e))/2,rotateX:e=>qi(Ct(Math.atan2(e[6],e[5]))),rotateY:e=>qi(Ct(Math.atan2(-e[2],e[0]))),rotateZ:sl,rotate:sl,skewX:e=>Ct(Math.atan(e[4])),skewY:e=>Ct(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Hi(e){return e.includes("scale")?1:0}function Wi(e,t){if(!e||e==="none")return Hi(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=J1,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=G1,s=a}if(!s)return Hi(t);const i=r[t],o=s[1].split(",").map(X1);return typeof i=="function"?i(o):o[i]}const _1=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Wi(n,t)};function X1(e){return parseFloat(e.trim())}const fn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pn=new Set(fn),al=e=>e===hn||e===T,Z1=new Set(["x","y","z"]),Y1=fn.filter(e=>!Z1.has(e));function eS(e){const t=[];return Y1.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const jt={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Wi(t,"x"),y:(e,{transform:t})=>Wi(t,"y")};jt.translateX=jt.x;jt.translateY=jt.y;const Mt=new Set;let Qi=!1,Gi=!1,Ji=!1;function pf(){if(Gi){const e=Array.from(Mt).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=eS(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{r.getValue(i)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gi=!1,Qi=!1,Mt.forEach(e=>e.complete(Ji)),Mt.clear()}function mf(){Mt.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Gi=!0)})}function tS(){Ji=!0,mf(),pf(),Ji=!1}class ta{constructor(t,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Mt.add(this),Qi||(Qi=!0,H.read(mf),H.resolveKeyframes(pf))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}Q1(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Mt.delete(this)}cancel(){this.state==="scheduled"&&(Mt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nS=e=>e.startsWith("--");function rS(e,t,n){nS(t)?e.style.setProperty(t,n):e.style[t]=n}const sS=Ko(()=>window.ScrollTimeline!==void 0),iS={};function oS(e,t){const n=Ko(e);return()=>iS[t]??n()}const Af=oS(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sn=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,cl={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sn([0,.65,.55,1]),circOut:Sn([.55,0,1,.45]),backIn:Sn([.31,.01,.66,-.59]),backOut:Sn([.33,1.53,.69,.99])};function gf(e,t){if(e)return typeof e=="function"?Af()?df(e,t):"ease-out":ef(e)?Sn(e):Array.isArray(e)?e.map(n=>gf(n,t)||cl.easeOut):cl[e]}function aS(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},l=void 0){const u={[t]:n};c&&(u.offset=c);const h=gf(a,s);Array.isArray(h)&&(u.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return l&&(f.pseudoElement=l),e.animate(u,f)}function yf(e){return typeof e=="function"&&"applyToOptions"in e}function cS({type:e,...t}){return yf(e)&&Af()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class lS extends Yo{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Uo(typeof t.type!="string");const l=cS(t);this.animation=aS(n,r,s,l,i),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=Zo(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):rS(n,r,u),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Pe(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pe(t)}get time(){return Pe(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Fe(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&sS()?(this.animation.timeline=t,Ne):n(this)}}const xf={anticipate:_h,backInOut:Jh,circInOut:Zh};function uS(e){return e in xf}function dS(e){typeof e.ease=="string"&&uS(e.ease)&&(e.ease=xf[e.ease])}const ll=10;class hS extends lS{constructor(t){dS(t),ff(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new ea({...o,autoplay:!1}),c=Fe(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-ll).value,a.sample(c).value,ll),a.stop()}}const ul=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(pt.test(e)||e==="0")&&!e.startsWith("url("));function fS(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function pS(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=ul(s,t),a=ul(i,t);return!o||!a?!1:fS(e)||(n==="spring"||yf(n))&&r}function _i(e){e.duration=0,e.type="keyframes"}const mS=new Set(["opacity","clipPath","filter","transform"]),AS=Ko(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gS(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=t.owner.getProps();return AS()&&n&&mS.has(n)&&(n!=="transform"||!l)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const yS=40;class xS extends Yo{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:c,motionValue:l,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ye.now();const f={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:l,element:u,...h},p=u?.KeyframeResolver||ta;this.keyframeResolver=new p(a,(m,y,A)=>this.onKeyframesResolved(m,y,f,!A),c,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:c,isHandoff:l,onUpdate:u}=r;this.resolvedAt=ye.now(),pS(t,i,o,a)||((et.instantAnimations||!c)&&u?.(Zo(t,r,n)),t[0]=t[t.length-1],_i(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>yS?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!l&&gS(f)?new hS({...f,element:f.motionValue.owner.current}):new ea(f);p.finished.then(()=>this.notifyFinished()).catch(Ne),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),tS()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const bS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vS(e){const t=bS.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function bf(e,t,n=1){const[r,s]=vS(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Uh(o)?parseFloat(o):o}return Qo(s)?bf(s,t,n+1):s}function na(e,t){return e?.[t]??e?.default??e}const vf=new Set(["width","height","top","left","right","bottom",...fn]),wS={test:e=>e==="auto",parse:e=>e},wf=e=>t=>t.test(e),Sf=[hn,T,Ve,st,f1,h1,wS],dl=e=>Sf.find(wf(e));function SS(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||zh(e):!0}const kS=new Set(["brightness","contrast","saturate","opacity"]);function CS(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Go)||[];if(!r)return e;const s=n.replace(r,"");let i=kS.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const PS=/\b([a-z-]*)\(.*?\)/gu,Xi={...pt,getAnimatableNone:e=>{const t=e.match(PS);return t?t.map(CS).join(" "):e}},hl={...hn,transform:Math.round},NS={rotate:st,rotateX:st,rotateY:st,rotateZ:st,scale:wr,scaleX:wr,scaleY:wr,scaleZ:wr,skew:st,skewX:st,skewY:st,distance:T,translateX:T,translateY:T,translateZ:T,x:T,y:T,z:T,perspective:T,transformPerspective:T,opacity:Vn,originX:Yc,originY:Yc,originZ:T},ra={borderWidth:T,borderTopWidth:T,borderRightWidth:T,borderBottomWidth:T,borderLeftWidth:T,borderRadius:T,radius:T,borderTopLeftRadius:T,borderTopRightRadius:T,borderBottomRightRadius:T,borderBottomLeftRadius:T,width:T,maxWidth:T,height:T,maxHeight:T,top:T,right:T,bottom:T,left:T,padding:T,paddingTop:T,paddingRight:T,paddingBottom:T,paddingLeft:T,margin:T,marginTop:T,marginRight:T,marginBottom:T,marginLeft:T,backgroundPositionX:T,backgroundPositionY:T,...NS,zIndex:hl,fillOpacity:Vn,strokeOpacity:Vn,numOctaves:hl},RS={...ra,color:Z,backgroundColor:Z,outlineColor:Z,fill:Z,stroke:Z,borderColor:Z,borderTopColor:Z,borderRightColor:Z,borderBottomColor:Z,borderLeftColor:Z,filter:Xi,WebkitFilter:Xi},kf=e=>RS[e];function Cf(e,t){let n=kf(e);return n!==Xi&&(n=pt),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const ES=new Set(["auto","none","0"]);function IS(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!ES.has(i)&&$n(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=Cf(n,s)}class jS extends ta{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let l=t[c];if(typeof l=="string"&&(l=l.trim(),Qo(l))){const u=bf(l,n.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!vf.has(r)||t.length!==2)return;const[s,i]=t,o=dl(s),a=dl(i);if(o!==a)if(al(o)&&al(a))for(let c=0;c<t.length;c++){const l=t[c];typeof l=="string"&&(t[c]=parseFloat(l))}else jt[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||SS(t[s]))&&r.push(s);r.length&&IS(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jt[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=jt[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,c])=>{t.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function MS(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Pf=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Nf(e){return Kh(e)&&"offsetHeight"in e}const fl=30,TS=e=>!isNaN(parseFloat(e));class BS{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=ye.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ye.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=TS(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new zo);const r=this.events[t].add(n);return t==="change"?()=>{r(),H.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ye.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>fl)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,fl);return qh(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function an(e,t){return new BS(e,t)}const{schedule:sa}=tf(queueMicrotask,!1),Ie={x:!1,y:!1};function Rf(){return Ie.x||Ie.y}function DS(e){return e==="x"||e==="y"?Ie[e]?null:(Ie[e]=!0,()=>{Ie[e]=!1}):Ie.x||Ie.y?null:(Ie.x=Ie.y=!0,()=>{Ie.x=Ie.y=!1})}function Ef(e,t){const n=MS(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function pl(e){return!(e.pointerType==="touch"||Rf())}function LS(e,t,n={}){const[r,s,i]=Ef(e,n),o=a=>{if(!pl(a))return;const{target:c}=a,l=t(c,a);if(typeof l!="function"||!c)return;const u=h=>{pl(h)&&(l(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const If=(e,t)=>t?e===t?!0:If(e,t.parentElement):!1,ia=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,OS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function FS(e){return OS.has(e.tagName)||e.tabIndex!==-1}const jr=new WeakSet;function ml(e){return t=>{t.key==="Enter"&&e(t)}}function Gs(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const VS=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=ml(()=>{if(jr.has(n))return;Gs(n,"down");const s=ml(()=>{Gs(n,"up")}),i=()=>Gs(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Al(e){return ia(e)&&!Rf()}function $S(e,t,n={}){const[r,s,i]=Ef(e,n),o=a=>{const c=a.currentTarget;if(!Al(a))return;jr.add(c);const l=t(c,a),u=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),jr.has(c)&&jr.delete(c),Al(p)&&typeof l=="function"&&l(p,{success:m})},h=p=>{u(p,c===window||c===document||n.useGlobalTarget||If(c,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),Nf(a)&&(a.addEventListener("focus",l=>VS(l,s)),!FS(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function jf(e){return Kh(e)&&"ownerSVGElement"in e}function US(e){return jf(e)&&e.tagName==="svg"}const ce=e=>!!(e&&e.getVelocity),KS=[...Sf,Z,pt],zS=e=>KS.find(wf(e)),oa=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function gl(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function qS(...e){return t=>{let n=!1;const r=e.map(s=>{const i=gl(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():gl(e[s],null)}}}}function HS(...e){return x.useCallback(qS(...e),e)}class WS extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Nf(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function QS({children:e,isPresent:t,anchorX:n,root:r}){const s=x.useId(),i=x.useRef(null),o=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=x.useContext(oa),c=HS(i,e?.ref);return x.useInsertionEffect(()=>{const{width:l,height:u,top:h,left:f,right:p}=o.current;if(t||!i.current||!l||!u)return;const m=n==="left"?`left: ${f}`:`right: ${p}`;i.current.dataset.motionPopId=s;const y=document.createElement("style");a&&(y.nonce=a);const A=r??document.head;return A.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${m}px !important;
            top: ${h}px !important;
          }
        `),()=>{A.contains(y)&&A.removeChild(y)}},[t]),d.jsx(WS,{isPresent:t,childRef:i,sizeRef:o,children:x.cloneElement(e,{ref:c})})}const GS=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:c})=>{const l=Oo(JS),u=x.useId();let h=!0,f=x.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:n,custom:s,onExitComplete:p=>{l.set(p,!0);for(const m of l.values())if(!m)return;r&&r()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[n,l,r]);return i&&h&&(f={...f}),x.useMemo(()=>{l.forEach((p,m)=>l.set(m,!1))},[n]),x.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=d.jsx(QS,{isPresent:n,anchorX:a,root:c,children:e})),d.jsx(gs.Provider,{value:f,children:e})};function JS(){return new Map}function Mf(e=!0){const t=x.useContext(gs);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=x.useId();x.useEffect(()=>{if(e)return s(i)},[e]);const o=x.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Sr=e=>e.key||"";function yl(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const aa=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[l,u]=Mf(o),h=x.useMemo(()=>yl(e),[e]),f=o&&!l?[]:h.map(Sr),p=x.useRef(!0),m=x.useRef(h),y=Oo(()=>new Map),[A,g]=x.useState(h),[b,v]=x.useState(h);$h(()=>{p.current=!1,m.current=h;for(let C=0;C<b.length;C++){const S=Sr(b[C]);f.includes(S)?y.delete(S):y.get(S)!==!0&&y.set(S,!1)}},[b,f.length,f.join("-")]);const k=[];if(h!==A){let C=[...h];for(let S=0;S<b.length;S++){const w=b[S],R=Sr(w);f.includes(R)||(C.splice(S,0,w),k.push(w))}return i==="wait"&&k.length&&(C=k),v(yl(C)),g(h),null}const{forceRender:P}=x.useContext(Lo);return d.jsx(d.Fragment,{children:b.map(C=>{const S=Sr(C),w=o&&!l?!1:h===b||f.includes(S),R=()=>{if(y.has(S))y.set(S,!0);else return;let j=!0;y.forEach(O=>{O||(j=!1)}),j&&(P?.(),v(m.current),o&&u?.(),r&&r())};return d.jsx(GS,{isPresent:w,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:w?void 0:R,anchorX:a,children:C},S)})})},Tf=x.createContext({strict:!1}),xl={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cn={};for(const e in xl)cn[e]={isEnabled:t=>xl[e].some(n=>!!t[n])};function _S(e){for(const t in e)cn[t]={...cn[t],...e[t]}}const XS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function es(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||XS.has(e)}let Bf=e=>!es(e);function ZS(e){typeof e=="function"&&(Bf=t=>t.startsWith("on")?!es(t):e(t))}try{ZS(require("@emotion/is-prop-valid").default)}catch{}function YS(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Bf(s)||n===!0&&es(s)||!t&&!es(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const ys=x.createContext({});function xs(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Un(e){return typeof e=="string"||Array.isArray(e)}const ca=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],la=["initial",...ca];function bs(e){return xs(e.animate)||la.some(t=>Un(e[t]))}function Df(e){return!!(bs(e)||e.variants)}function ek(e,t){if(bs(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Un(n)?n:void 0,animate:Un(r)?r:void 0}}return e.inherit!==!1?t:{}}function tk(e){const{initial:t,animate:n}=ek(e,x.useContext(ys));return x.useMemo(()=>({initial:t,animate:n}),[bl(t),bl(n)])}function bl(e){return Array.isArray(e)?e.join(" "):e}const Kn={};function nk(e){for(const t in e)Kn[t]=e[t],Wo(t)&&(Kn[t].isCSSVariable=!0)}function Lf(e,{layout:t,layoutId:n}){return pn.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Kn[e]||e==="opacity")}const rk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sk=fn.length;function ik(e,t,n){let r="",s=!0;for(let i=0;i<sk;i++){const o=fn[i],a=e[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const l=Pf(a,ra[o]);if(!c){s=!1;const u=rk[o]||o;r+=`${u}(${l}) `}n&&(t[o]=l)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function ua(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const c in t){const l=t[c];if(pn.has(c)){o=!0;continue}else if(Wo(c)){s[c]=l;continue}else{const u=Pf(l,ra[c]);c.startsWith("origin")?(a=!0,i[c]=u):r[c]=u}}if(t.transform||(o||n?r.transform=ik(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:l="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${l} ${u}`}}const da=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Of(e,t,n){for(const r in t)!ce(t[r])&&!Lf(r,n)&&(e[r]=t[r])}function ok({transformTemplate:e},t){return x.useMemo(()=>{const n=da();return ua(n,t,e),Object.assign({},n.vars,n.style)},[t])}function ak(e,t){const n=e.style||{},r={};return Of(r,n,e),Object.assign(r,ok(e,t)),r}function ck(e,t){const n={},r=ak(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const lk={offset:"stroke-dashoffset",array:"stroke-dasharray"},uk={offset:"strokeDashoffset",array:"strokeDasharray"};function dk(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?lk:uk;e[i.offset]=T.transform(-r);const o=T.transform(t),a=T.transform(n);e[i.array]=`${o} ${a}`}function Ff(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},c,l,u){if(ua(e,a,l),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=u?.transformBox??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&dk(h,s,i,o,!1)}const Vf=()=>({...da(),attrs:{}}),$f=e=>typeof e=="string"&&e.toLowerCase()==="svg";function hk(e,t,n,r){const s=x.useMemo(()=>{const i=Vf();return Ff(i,t,$f(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Of(i,e.style,e),s.style={...i,...s.style}}return s}const fk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ha(e){return typeof e!="string"||e.includes("-")?!1:!!(fk.indexOf(e)>-1||/[A-Z]/u.test(e))}function pk(e,t,n,{latestValues:r},s,i=!1){const a=(ha(e)?hk:ck)(t,r,s,e),c=YS(t,typeof e=="string",i),l=e!==x.Fragment?{...c,...a,ref:n}:{},{children:u}=t,h=x.useMemo(()=>ce(u)?u.get():u,[u]);return x.createElement(e,{...l,children:h})}function vl(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function fa(e,t,n,r){if(typeof t=="function"){const[s,i]=vl(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=vl(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function Mr(e){return ce(e)?e.get():e}function mk({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Ak(n,r,s,e),renderState:t()}}function Ak(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=Mr(i[f]);let{initial:o,animate:a}=e;const c=bs(e),l=Df(e);t&&l&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!xs(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=fa(e,f[p]);if(m){const{transitionEnd:y,transition:A,...g}=m;for(const b in g){let v=g[b];if(Array.isArray(v)){const k=u?v.length-1:0;v=v[k]}v!==null&&(s[b]=v)}for(const b in y)s[b]=y[b]}}}return s}const Uf=e=>(t,n)=>{const r=x.useContext(ys),s=x.useContext(gs),i=()=>mk(e,t,r,s);return n?i():Oo(i)};function pa(e,t,n){const{style:r}=e,s={};for(const i in r)(ce(r[i])||t.style&&ce(t.style[i])||Lf(i,e)||n?.getValue(i)?.liveStyle!==void 0)&&(s[i]=r[i]);return s}const gk=Uf({scrapeMotionValuesFromProps:pa,createRenderState:da});function Kf(e,t,n){const r=pa(e,t,n);for(const s in e)if(ce(e[s])||ce(t[s])){const i=fn.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const yk=Uf({scrapeMotionValuesFromProps:Kf,createRenderState:Vf}),xk=Symbol.for("motionComponentSymbol");function zt(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function bk(e,t,n){return x.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):zt(n)&&(n.current=r))},[t])}const ma=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vk="framerAppearId",zf="data-"+ma(vk),qf=x.createContext({});function wk(e,t,n,r,s){const{visualElement:i}=x.useContext(ys),o=x.useContext(Tf),a=x.useContext(gs),c=x.useContext(oa).reducedMotion,l=x.useRef(null);r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const u=l.current,h=x.useContext(qf);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&Sk(l.current,n,s,h);const f=x.useRef(!1);x.useInsertionEffect(()=>{u&&f.current&&u.update(n,a)});const p=n[zf],m=x.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return $h(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),m.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),m.current=!1),u.enteringChildren=void 0)}),u}function Sk(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Hf(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&zt(a),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function Hf(e){if(e)return e.options.allowProjection!==!1?e.projection:Hf(e.parent)}function Js(e,{forwardMotionProps:t=!1}={},n,r){n&&_S(n);const s=ha(e)?yk:gk;function i(a,c){let l;const u={...x.useContext(oa),...a,layoutId:kk(a)},{isStatic:h}=u,f=tk(a),p=s(a,h);if(!h&&Fo){Ck();const m=Pk(u);l=m.MeasureLayout,f.visualElement=wk(e,p,u,r,m.ProjectionNode)}return d.jsxs(ys.Provider,{value:f,children:[l&&f.visualElement?d.jsx(l,{visualElement:f.visualElement,...u}):null,pk(e,a,bk(p,f.visualElement,c),p,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=x.forwardRef(i);return o[xk]=e,o}function kk({layoutId:e}){const t=x.useContext(Lo).id;return t&&e!==void 0?t+"-"+e:e}function Ck(e,t){x.useContext(Tf).strict}function Pk(e){const{drag:t,layout:n}=cn;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Nk(e,t){if(typeof Proxy>"u")return Js;const n=new Map,r=(i,o)=>Js(i,o,e,t),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Js(o,void 0,e,t)),n.get(o))})}function Wf({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Rk({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Ek(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function _s(e){return e===void 0||e===1}function Zi({scale:e,scaleX:t,scaleY:n}){return!_s(e)||!_s(t)||!_s(n)}function wt(e){return Zi(e)||Qf(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Qf(e){return wl(e.x)||wl(e.y)}function wl(e){return e&&e!=="0%"}function ts(e,t,n){const r=e-n,s=t*r;return n+s}function Sl(e,t,n,r,s){return s!==void 0&&(e=ts(e,s,r)),ts(e,n,r)+t}function Yi(e,t=0,n=1,r,s){e.min=Sl(e.min,t,n,r,s),e.max=Sl(e.max,t,n,r,s)}function Gf(e,{x:t,y:n}){Yi(e.x,t.translate,t.scale,t.originPoint),Yi(e.y,n.translate,n.scale,n.originPoint)}const kl=.999999999999,Cl=1.0000000000001;function Ik(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ht(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Gf(e,o)),r&&wt(i.latestValues)&&Ht(e,i.latestValues))}t.x<Cl&&t.x>kl&&(t.x=1),t.y<Cl&&t.y>kl&&(t.y=1)}function qt(e,t){e.min=e.min+t,e.max=e.max+t}function Pl(e,t,n,r,s=.5){const i=W(e.min,e.max,s);Yi(e,t,n,i,r)}function Ht(e,t){Pl(e.x,t.x,t.scaleX,t.scale,t.originX),Pl(e.y,t.y,t.scaleY,t.scale,t.originY)}function Jf(e,t){return Wf(Ek(e.getBoundingClientRect(),t))}function jk(e,t,n){const r=Jf(e,n),{scroll:s}=t;return s&&(qt(r.x,s.offset.x),qt(r.y,s.offset.y)),r}const Nl=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wt=()=>({x:Nl(),y:Nl()}),Rl=()=>({min:0,max:0}),_=()=>({x:Rl(),y:Rl()}),eo={current:null},_f={current:!1};function Mk(){if(_f.current=!0,!!Fo)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>eo.current=e.matches;e.addEventListener("change",t),t()}else eo.current=!1}const Tk=new WeakMap;function Bk(e,t,n){for(const r in t){const s=t[r],i=n[r];if(ce(s))e.addValue(r,s);else if(ce(i))e.addValue(r,an(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,an(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const El=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Dk{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ta,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=ye.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,H.render(this.render,!1,!0))};const{latestValues:c,renderState:l}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=bs(n),this.isVariantNode=Df(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&ce(p)&&p.set(c[f])}}mount(t){this.current=t,Tk.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),_f.current||Mk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:eo.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ft(this.notifyUpdate),ft(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=pn.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&H.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in cn){const n=cn[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<El.length;r++){const s=El[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Bk(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=an(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Uh(r)||zh(r))?r=parseFloat(r):!zS(r)&&pt.test(n)&&(r=Cf(t,n)),this.setBaseTarget(t,ce(r)?r.get():r)),ce(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=fa(this.props,n,this.presenceContext?.custom);i&&(r=i[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ce(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new zo),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){sa.render(this.render)}}class Xf extends Dk{constructor(){super(...arguments),this.KeyframeResolver=jS}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ce(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Zf(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];s?.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function Lk(e){return window.getComputedStyle(e)}class Ok extends Xf{constructor(){super(...arguments),this.type="html",this.renderInstance=Zf}readValueFromInstance(t,n){if(pn.has(n))return this.projection?.isProjecting?Hi(n):_1(t,n);{const r=Lk(t),s=(Wo(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Jf(t,n)}build(t,n,r){ua(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return pa(t,n,r)}}const Yf=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Fk(e,t,n,r){Zf(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Yf.has(s)?s:ma(s),t.attrs[s])}class Vk extends Xf{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(pn.has(n)){const r=kf(n);return r&&r.default||0}return n=Yf.has(n)?n:ma(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Kf(t,n,r)}build(t,n,r){Ff(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){Fk(t,n,r,s)}mount(t){this.isSVGTag=$f(t.tagName),super.mount(t)}}const $k=(e,t)=>ha(e)?new Vk(t):new Ok(t,{allowProjection:e!==x.Fragment});function Xt(e,t,n){const r=e.getProps();return fa(r,t,n!==void 0?n:r.custom,e)}const to=e=>Array.isArray(e);function Uk(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,an(n))}function Kk(e){return to(e)?e[e.length-1]||0:e}function zk(e,t){const n=Xt(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=Kk(i[o]);Uk(e,o,a)}}function qk(e){return!!(ce(e)&&e.add)}function no(e,t){const n=e.getValue("willChange");if(qk(n))return n.add(t);if(!n&&et.WillChange){const r=new et.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function ep(e){return e.props[zf]}const Hk=e=>e!==null;function Wk(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(Hk),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const Qk={type:"spring",stiffness:500,damping:25,restSpeed:10},Gk=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Jk={type:"keyframes",duration:.8},_k={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Xk=(e,{keyframes:t})=>t.length>2?Jk:pn.has(e)?e.startsWith("scale")?Gk(t[1]):Qk:_k;function Zk({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const Aa=(e,t,n,r={},s,i)=>o=>{const a=na(r,e)||{},c=a.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Fe(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-l,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};Zk(a)||Object.assign(u,Xk(e,u)),u.duration&&(u.duration=Fe(u.duration)),u.repeatDelay&&(u.repeatDelay=Fe(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(_i(u),u.delay===0&&(h=!0)),(et.instantAnimations||et.skipAnimations)&&(h=!0,_i(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!i&&t.get()!==void 0){const f=Wk(u.keyframes,a);if(f!==void 0){H.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new ea(u):new xS(u)};function Yk({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function tp(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const c=[],l=s&&e.animationState&&e.animationState.getState()[s];for(const u in a){const h=e.getValue(u,e.latestValues[u]??null),f=a[u];if(f===void 0||l&&Yk(l,u))continue;const p={delay:n,...na(i||{},u)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const g=ep(e);if(g){const b=window.MotionHandoffAnimation(g,u,H);b!==null&&(p.startTime=b,y=!0)}}no(e,u),h.start(Aa(u,h,f,e.shouldReduceMotion&&vf.has(u)?{type:!1}:p,e,y));const A=h.animation;A&&c.push(A)}return o&&Promise.all(c).then(()=>{H.update(()=>{o&&zk(e,o)})}),c}function np(e,t,n,r=0,s=1){const i=Array.from(e).sort((l,u)=>l.sortNodePosition(u)).indexOf(t),o=e.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function ro(e,t,n={}){const r=Xt(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(tp(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:l=0,staggerChildren:u,staggerDirection:h}=s;return eC(e,t,c,l,u,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,l]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>l())}else return Promise.all([i(),o(n.delay)])}function eC(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),a.push(ro(c,t,{...o,delay:n+(typeof r=="function"?0:r)+np(e.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(a)}function tC(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>ro(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=ro(e,t,n);else{const s=typeof t=="function"?Xt(e,t,n.custom):t;r=Promise.all(tp(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function rp(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const nC=la.length;function sp(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?sp(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<nC;n++){const r=la[n],s=e.props[r];(Un(s)||s===!1)&&(t[r]=s)}return t}const rC=[...ca].reverse(),sC=ca.length;function iC(e){return t=>Promise.all(t.map(({animation:n,options:r})=>tC(e,n,r)))}function oC(e){let t=iC(e),n=Il(),r=!0;const s=c=>(l,u)=>{const h=Xt(e,u,c==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:f,transitionEnd:p,...m}=h;l={...l,...m,...p}}return l};function i(c){t=c(e)}function o(c){const{props:l}=e,u=sp(e.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let A=0;A<sC;A++){const g=rC[A],b=n[g],v=l[g]!==void 0?l[g]:u[g],k=Un(v),P=g===c?b.isActive:null;P===!1&&(m=A);let C=v===u[g]&&v!==l[g]&&k;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...p},!b.isActive&&P===null||!v&&!b.prevProp||xs(v)||typeof v=="boolean")continue;const S=aC(b.prevProp,v);let w=S||g===c&&b.isActive&&!C&&k||A>m&&k,R=!1;const j=Array.isArray(v)?v:[v];let O=j.reduce(s(g),{});P===!1&&(O={});const{prevResolvedValues:Q={}}=b,He={...Q,...O},pe=ee=>{w=!0,f.has(ee)&&(R=!0,f.delete(ee)),b.needsAnimating[ee]=!0;const xe=e.getValue(ee);xe&&(xe.liveStyle=!1)};for(const ee in He){const xe=O[ee],nt=Q[ee];if(p.hasOwnProperty(ee))continue;let yt=!1;to(xe)&&to(nt)?yt=!rp(xe,nt):yt=xe!==nt,yt?xe!=null?pe(ee):f.add(ee):xe!==void 0&&f.has(ee)?pe(ee):b.protectedKeys[ee]=!0}b.prevProp=v,b.prevResolvedValues=O,b.isActive&&(p={...p,...O}),r&&e.blockInitialAnimation&&(w=!1);const Be=C&&S;w&&(!Be||R)&&h.push(...j.map(ee=>{const xe={type:g};if(typeof ee=="string"&&r&&!Be&&e.manuallyAnimateOnMount&&e.parent){const{parent:nt}=e,yt=Xt(nt,ee);if(nt.enteringChildren&&yt){const{delayChildren:ga}=yt.transition||{};xe.delay=np(nt.enteringChildren,e,ga)}}return{animation:ee,options:xe}}))}if(f.size){const A={};if(typeof l.initial!="boolean"){const g=Xt(e,Array.isArray(l.initial)?l.initial[0]:l.initial);g&&g.transition&&(A.transition=g.transition)}f.forEach(g=>{const b=e.getBaseTarget(g),v=e.getValue(g);v&&(v.liveStyle=!0),A[g]=b??null}),h.push({animation:A})}let y=!!h.length;return r&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(h):Promise.resolve()}function a(c,l){if(n[c].isActive===l)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(c,l)),n[c].isActive=l;const u=o(c);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Il()}}}function aC(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!rp(t,e):!1}function vt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Il(){return{animate:vt(!0),whileInView:vt(),whileHover:vt(),whileTap:vt(),whileDrag:vt(),whileFocus:vt(),exit:vt()}}class gt{constructor(t){this.isMounted=!1,this.node=t}update(){}}class cC extends gt{constructor(t){super(t),t.animationState||(t.animationState=oC(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();xs(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let lC=0;class uC extends gt{constructor(){super(...arguments),this.id=lC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const dC={animation:{Feature:cC},exit:{Feature:uC}};function zn(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function ir(e){return{point:{x:e.pageX,y:e.pageY}}}const hC=e=>t=>ia(t)&&e(t,ir(t));function Mn(e,t,n,r){return zn(e,t,hC(n),r)}const ip=1e-4,fC=1-ip,pC=1+ip,op=.01,mC=0-op,AC=0+op;function de(e){return e.max-e.min}function gC(e,t,n){return Math.abs(e-t)<=n}function jl(e,t,n,r=.5){e.origin=r,e.originPoint=W(t.min,t.max,e.origin),e.scale=de(n)/de(t),e.translate=W(n.min,n.max,e.origin)-e.originPoint,(e.scale>=fC&&e.scale<=pC||isNaN(e.scale))&&(e.scale=1),(e.translate>=mC&&e.translate<=AC||isNaN(e.translate))&&(e.translate=0)}function Tn(e,t,n,r){jl(e.x,t.x,n.x,r?r.originX:void 0),jl(e.y,t.y,n.y,r?r.originY:void 0)}function Ml(e,t,n){e.min=n.min+t.min,e.max=e.min+de(t)}function yC(e,t,n){Ml(e.x,t.x,n.x),Ml(e.y,t.y,n.y)}function Tl(e,t,n){e.min=t.min-n.min,e.max=e.min+de(t)}function Bn(e,t,n){Tl(e.x,t.x,n.x),Tl(e.y,t.y,n.y)}function Se(e){return[e("x"),e("y")]}const ap=({current:e})=>e?e.ownerDocument.defaultView:null,Bl=(e,t)=>Math.abs(e-t);function xC(e,t){const n=Bl(e.x,t.x),r=Bl(e.y,t.y);return Math.sqrt(n**2+r**2)}class cp{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Zs(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=xC(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:y}=f,{timestamp:A}=ae;this.history.push({...y,timestamp:A});const{onStart:g,onMove:b}=this.handlers;p||(g&&g(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Xs(p,this.transformPagePoint),H.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Zs(f.type==="pointercancel"?this.lastMoveEventInfo:Xs(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,g),y&&y(f,g)},!ia(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=ir(t),c=Xs(a,this.transformPagePoint),{point:l}=c,{timestamp:u}=ae;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,Zs(c,this.history)),this.removeListeners=nr(Mn(this.contextWindow,"pointermove",this.handlePointerMove),Mn(this.contextWindow,"pointerup",this.handlePointerUp),Mn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ft(this.updatePoint)}}function Xs(e,t){return t?{point:t(e.point)}:e}function Dl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Zs({point:e},t){return{point:e,delta:Dl(e,lp(t)),offset:Dl(e,bC(t)),velocity:vC(t,.1)}}function bC(e){return e[0]}function lp(e){return e[e.length-1]}function vC(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=lp(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Fe(t)));)n--;if(!r)return{x:0,y:0};const i=Pe(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wC(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?W(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?W(n,e,r.max):Math.min(e,n)),e}function Ll(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function SC(e,{top:t,left:n,bottom:r,right:s}){return{x:Ll(e.x,n,s),y:Ll(e.y,t,r)}}function Ol(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function kC(e,t){return{x:Ol(e.x,t.x),y:Ol(e.y,t.y)}}function CC(e,t){let n=.5;const r=de(e),s=de(t);return s>r?n=Fn(t.min,t.max-r,e.min):r>s&&(n=Fn(e.min,e.max-s,t.min)),Ye(0,1,n)}function PC(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const so=.35;function NC(e=so){return e===!1?e=0:e===!0&&(e=so),{x:Fl(e,"left","right"),y:Fl(e,"top","bottom")}}function Fl(e,t,n){return{min:Vl(e,t),max:Vl(e,n)}}function Vl(e,t){return typeof e=="number"?e:e[t]||0}const RC=new WeakMap;class EC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ir(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DS(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Se(g=>{let b=this.getAxisMotionValue(g).get()||0;if(Ve.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const k=v.layout.layoutBox[g];k&&(b=de(k)*(parseFloat(b)/100))}}this.originPoint[g]=b}),y&&H.postRender(()=>y(h,f)),no(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:A}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=f;if(m&&this.currentDirection===null){this.currentDirection=IC(g),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,g),this.updateAxis("y",f.point,g),this.visualElement.render(),A&&A(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>Se(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new cp(t,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:ap(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&H.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!kr(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=wC(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&zt(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=SC(r.layoutBox,t):this.constraints=!1,this.elastic=NC(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Se(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=PC(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!zt(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=jk(r,s.root,this.visualElement.getTransformPagePoint());let o=kC(s.layout.layoutBox,i);if(n){const a=n(Rk(o));this.hasMutatedConstraints=!!a,a&&(o=Wf(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=Se(u=>{if(!kr(u,n,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,m)});return Promise.all(l).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return no(this.visualElement,t),r.start(Aa(t,r,0,n,this.visualElement,!1))}stopAnimation(){Se(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Se(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Se(n=>{const{drag:r}=this.getProps();if(!kr(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-W(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!zt(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Se(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();s[o]=CC({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Se(o=>{if(!kr(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(W(c,l,s[o]))})}addListeners(){if(!this.visualElement.current)return;RC.set(this.visualElement,this);const t=this.visualElement.current,n=Mn(t,"pointerdown",c=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();zt(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),H.read(r);const o=zn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(Se(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=so,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function kr(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function IC(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jC extends gt{constructor(t){super(t),this.removeGroupControls=Ne,this.removeListeners=Ne,this.controls=new EC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ne}unmount(){this.removeGroupControls(),this.removeListeners()}}const $l=e=>(t,n)=>{e&&H.postRender(()=>e(t,n))};class MC extends gt{constructor(){super(...arguments),this.removePointerDownListener=Ne}onPointerDown(t){this.session=new cp(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ap(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:$l(t),onStart:$l(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&H.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Mn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ul(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xn={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(T.test(e))e=parseFloat(e);else return e;const n=Ul(e,t.target.x),r=Ul(e,t.target.y);return`${n}% ${r}%`}},TC={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=pt.parse(e);if(s.length>5)return r;const i=pt.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const l=W(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=l),typeof s[3+o]=="number"&&(s[3+o]/=l),i(s)}};let Ys=!1;class BC extends x.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;nk(DC),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),Ys&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Tr.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Ys=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||H.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sa.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;Ys=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function up(e){const[t,n]=Mf(),r=x.useContext(Lo);return d.jsx(BC,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(qf),isPresent:t,safeToRemove:n})}const DC={borderRadius:{...xn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xn,borderTopRightRadius:xn,borderBottomLeftRadius:xn,borderBottomRightRadius:xn,boxShadow:TC};function LC(e,t,n){const r=ce(e)?e:an(e);return r.start(Aa("",r,t,n)),r.animation}const OC=(e,t)=>e.depth-t.depth;class FC{constructor(){this.children=[],this.isDirty=!1}add(t){Vo(this.children,t),this.isDirty=!0}remove(t){$o(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(OC),this.isDirty=!1,this.children.forEach(t)}}function VC(e,t){const n=ye.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(ft(r),e(i-t))};return H.setup(r,!0),()=>ft(r)}const dp=["TopLeft","TopRight","BottomLeft","BottomRight"],$C=dp.length,Kl=e=>typeof e=="string"?parseFloat(e):e,zl=e=>typeof e=="number"||T.test(e);function UC(e,t,n,r,s,i){s?(e.opacity=W(0,n.opacity??1,KC(r)),e.opacityExit=W(t.opacity??1,0,zC(r))):i&&(e.opacity=W(t.opacity??1,n.opacity??1,r));for(let o=0;o<$C;o++){const a=`border${dp[o]}Radius`;let c=ql(t,a),l=ql(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||zl(c)===zl(l)?(e[a]=Math.max(W(Kl(c),Kl(l),r),0),(Ve.test(l)||Ve.test(c))&&(e[a]+="%")):e[a]=l}(t.rotate||n.rotate)&&(e.rotate=W(t.rotate||0,n.rotate||0,r))}function ql(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const KC=hp(0,.5,Xh),zC=hp(.5,.95,Ne);function hp(e,t,n){return r=>r<e?0:r>t?1:n(Fn(e,t,r))}function Hl(e,t){e.min=t.min,e.max=t.max}function ve(e,t){Hl(e.x,t.x),Hl(e.y,t.y)}function Wl(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ql(e,t,n,r,s){return e-=t,e=ts(e,1/n,r),s!==void 0&&(e=ts(e,1/s,r)),e}function qC(e,t=0,n=1,r=.5,s,i=e,o=e){if(Ve.test(t)&&(t=parseFloat(t),t=W(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=W(i.min,i.max,r);e===i&&(a-=t),e.min=Ql(e.min,t,n,a,s),e.max=Ql(e.max,t,n,a,s)}function Gl(e,t,[n,r,s],i,o){qC(e,t[n],t[r],t[s],t.scale,i,o)}const HC=["x","scaleX","originX"],WC=["y","scaleY","originY"];function Jl(e,t,n,r){Gl(e.x,t,HC,n?n.x:void 0,r?r.x:void 0),Gl(e.y,t,WC,n?n.y:void 0,r?r.y:void 0)}function _l(e){return e.translate===0&&e.scale===1}function fp(e){return _l(e.x)&&_l(e.y)}function Xl(e,t){return e.min===t.min&&e.max===t.max}function QC(e,t){return Xl(e.x,t.x)&&Xl(e.y,t.y)}function Zl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function pp(e,t){return Zl(e.x,t.x)&&Zl(e.y,t.y)}function Yl(e){return de(e.x)/de(e.y)}function eu(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class GC{constructor(){this.members=[]}add(t){Vo(this.members,t),t.scheduleRender()}remove(t){if($o(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JC(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=n?.z||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:l,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:m}=n;l&&(r=`perspective(${l}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=e.x.scale*t.x,c=e.y.scale*t.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const ei=["","X","Y","Z"],_C=1e3;let XC=0;function ti(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function mp(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=ep(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",H,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&mp(r)}function Ap({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t?.()){this.id=XC++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eP),this.nodes.forEach(sP),this.nodes.forEach(iP),this.nodes.forEach(tP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new FC)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zo),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=jf(o)&&!US(o),this.instance=o;const{layoutId:a,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),e){let u,h=0;const f=()=>this.root.updateBlockedByResize=!1;H.read(()=>{h=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,u&&u(),u=VC(f,250),Tr.hasAnimatedSinceResize&&(Tr.hasAnimatedSinceResize=!1,this.nodes.forEach(ru)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&l&&(a||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||l.getDefaultTransition()||uP,{onLayoutAnimationStart:y,onLayoutAnimationComplete:A}=l.getProps(),g=!this.targetLayout||!pp(this.targetLayout,p),b=!h&&f;if(this.options.layoutRoot||this.resumeFrom||b||h&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...na(m,"layout"),onPlay:y,onComplete:A};(l.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(u,b)}else h||ru(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ft(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oP),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mp(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tu);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(nu);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rP),this.nodes.forEach(ZC),this.nodes.forEach(YC)):this.nodes.forEach(nu),this.clearAllSnapshots();const a=ye.now();ae.delta=Ye(0,1e3/60,a-ae.timestamp),ae.timestamp=a,ae.isProcessing=!0,zs.update.process(ae),zs.preRender.process(ae),zs.render.process(ae),ae.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sa.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nP),this.sharedNodes.forEach(aP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,H.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){H.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!de(this.snapshot.measuredBox.x)&&!de(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!fp(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;o&&this.instance&&(a||wt(this.latestValues)||u)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),dP(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return _();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hP))){const{scroll:l}=this.root;l&&(qt(a.x,l.offset.x),qt(a.y,l.offset.y))}return a}removeElementScroll(o){const a=_();if(ve(a,o),this.scroll?.wasRoot)return a;for(let c=0;c<this.path.length;c++){const l=this.path[c],{scroll:u,options:h}=l;l!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&ve(a,o),qt(a.x,u.offset.x),qt(a.y,u.offset.y))}return a}applyTransform(o,a=!1){const c=_();ve(c,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ht(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),wt(u.latestValues)&&Ht(c,u.latestValues)}return wt(this.latestValues)&&Ht(c,this.latestValues),c}removeTransform(o){const a=_();ve(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!wt(l.latestValues))continue;Zi(l.latestValues)&&l.updateSnapshot();const u=_(),h=l.measurePageBox();ve(u,h),Jl(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return wt(this.latestValues)&&Jl(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ae.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=ae.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_(),this.relativeTargetOrigin=_(),Bn(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),ve(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=_(),this.targetWithTransforms=_()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ve(this.target,this.layout.layoutBox),Gf(this.target,this.targetDelta)):ve(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_(),this.relativeTargetOrigin=_(),Bn(this.relativeTargetOrigin,this.target,f.target),ve(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Zi(this.parent.latestValues)||Qf(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ae.timestamp&&(c=!1),c)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;ve(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Ik(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=_());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Wl(this.prevProjectionDelta.x,this.projectionDelta.x),Wl(this.prevProjectionDelta.y,this.projectionDelta.y)),Tn(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!eu(this.projectionDelta.x,this.prevProjectionDelta.x)||!eu(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wt(),this.projectionDelta=Wt(),this.projectionDeltaWithTransform=Wt()}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},h=Wt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=_(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,y=p!==m,A=this.getStack(),g=!A||A.members.length<=1,b=!!(y&&!g&&this.options.crossfade===!0&&!this.path.some(lP));this.animationProgress=0;let v;this.mixTargetDelta=k=>{const P=k/1e3;su(h.x,o.x,P),su(h.y,o.y,P),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bn(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cP(this.relativeTarget,this.relativeTargetOrigin,f,P),v&&QC(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=_()),ve(v,this.relativeTarget)),y&&(this.animationValues=u,UC(u,l,this.latestValues,P,b,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ft(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=H.update(()=>{Tr.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=an(0)),this.currentAnimation=LC(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_C),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:u}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&gp(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||_();const h=de(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=de(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}ve(a,c),Ht(a,u),Tn(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GC),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const l={};c.z&&ti("z",o,l,this.animationValues);for(let u=0;u<ei.length;u++)ti(`rotate${ei[u]}`,o,l,this.animationValues),ti(`skew${ei[u]}`,o,l,this.animationValues);o.render();for(const u in l)o.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Mr(a?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Mr(a?.pointerEvents)||""),this.hasProjected&&!wt(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let h=JC(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,l.animationValues?o.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in Kn){if(u[m]===void 0)continue;const{correct:y,applyTo:A,isCSSVariable:g}=Kn[m],b=h==="none"?u[m]:y(u[m],l);if(A){const v=A.length;for(let k=0;k<v;k++)o[A[k]]=b}else g?this.options.visualElement.renderState.vars[m]=b:o[m]=b}this.options.layoutId&&(o.pointerEvents=l===this?Mr(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(tu),this.root.sharedNodes.clear()}}}function ZC(e){e.updateLayout()}function YC(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,i=t.source!==e.layout.source;s==="size"?Se(u=>{const h=i?t.measuredBox[u]:t.layoutBox[u],f=de(h);h.min=n[u].min,h.max=h.min+f}):gp(s,t.layoutBox,n)&&Se(u=>{const h=i?t.measuredBox[u]:t.layoutBox[u],f=de(n[u]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+f)});const o=Wt();Tn(o,n,t.layoutBox);const a=Wt();i?Tn(a,e.applyTransform(r,!0),t.measuredBox):Tn(a,n,t.layoutBox);const c=!fp(o);let l=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:f}=u;if(h&&f){const p=_();Bn(p,t.layoutBox,h.layoutBox);const m=_();Bn(m,n,f.layoutBox),pp(p,m)||(l=!0),u.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function eP(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tP(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nP(e){e.clearSnapshot()}function tu(e){e.clearMeasurements()}function nu(e){e.isLayoutDirty=!1}function rP(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ru(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function sP(e){e.resolveTargetDelta()}function iP(e){e.calcProjection()}function oP(e){e.resetSkewAndRotation()}function aP(e){e.removeLeadSnapshot()}function su(e,t,n){e.translate=W(t.translate,0,n),e.scale=W(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function iu(e,t,n,r){e.min=W(t.min,n.min,r),e.max=W(t.max,n.max,r)}function cP(e,t,n,r){iu(e.x,t.x,n.x,r),iu(e.y,t.y,n.y,r)}function lP(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uP={duration:.45,ease:[.4,0,.1,1]},ou=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),au=ou("applewebkit/")&&!ou("chrome/")?Math.round:Ne;function cu(e){e.min=au(e.min),e.max=au(e.max)}function dP(e){cu(e.x),cu(e.y)}function gp(e,t,n){return e==="position"||e==="preserve-aspect"&&!gC(Yl(t),Yl(n),.2)}function hP(e){return e!==e.root&&e.scroll?.wasRoot}const fP=Ap({attachResizeListener:(e,t)=>zn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ni={current:void 0},yp=Ap({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ni.current){const e=new fP({});e.mount(window),e.setOptions({layoutScroll:!0}),ni.current=e}return ni.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),pP={pan:{Feature:MC},drag:{Feature:jC,ProjectionNode:yp,MeasureLayout:up}};function lu(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&H.postRender(()=>i(t,ir(t)))}class mP extends gt{mount(){const{current:t}=this.node;t&&(this.unmount=LS(t,(n,r)=>(lu(this.node,r,"Start"),s=>lu(this.node,s,"End"))))}unmount(){}}class AP extends gt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nr(zn(this.node.current,"focus",()=>this.onFocus()),zn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uu(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&H.postRender(()=>i(t,ir(t)))}class gP extends gt{mount(){const{current:t}=this.node;t&&(this.unmount=$S(t,(n,r)=>(uu(this.node,r,"Start"),(s,{success:i})=>uu(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const io=new WeakMap,ri=new WeakMap,yP=e=>{const t=io.get(e.target);t&&t(e)},xP=e=>{e.forEach(yP)};function bP({root:e,...t}){const n=e||document;ri.has(n)||ri.set(n,{});const r=ri.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(xP,{root:e,...t})),r[s]}function vP(e,t,n){const r=bP(t);return io.set(e,n),r.observe(e),()=>{io.delete(e),r.unobserve(e)}}const wP={some:0,all:1};class SP extends gt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:wP[s]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=l?u:h;f&&f(c)};return vP(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(kP(t,n))&&this.startObserver()}unmount(){}}function kP({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const CP={inView:{Feature:SP},tap:{Feature:gP},focus:{Feature:AP},hover:{Feature:mP}},PP={layout:{ProjectionNode:yp,MeasureLayout:up}},NP={...dC,...CP,...pP,...PP},qn=Nk(NP,$k);function RP({isActive:e,children:t,borderRadius:n=6,className:r=""}){const s=x.useRef(null),[i,o]=x.useState({width:0,height:0}),[a,c]=x.useState(0),l=x.useMemo(()=>`snakeGradient-${Math.random().toString(36).substr(2,9)}`,[]),u=x.useCallback(()=>{if(s.current){const{offsetWidth:g,offsetHeight:b}=s.current;o({width:g,height:b})}},[]);x.useEffect(()=>{u();const g=new ResizeObserver(u);return s.current&&g.observe(s.current),()=>g.disconnect()},[]),x.useEffect(()=>{e&&c(g=>g+1)},[e]);const{width:h,height:f}=i,p=3,m=p/2,y=2*(h+f-2*n)+2*Math.PI*n,A=y*.3;return d.jsxs("div",{ref:s,className:`relative ${r}`,children:[t,e&&h>0&&d.jsxs("svg",{className:"absolute inset-0 pointer-events-none z-10",width:h,height:f,style:{overflow:"visible"},children:[d.jsx("defs",{children:d.jsxs("filter",{id:`${l}-glow`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[d.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2",result:"blur"}),d.jsx("feFlood",{floodColor:"#c2ffe0",floodOpacity:"0.3",result:"color"}),d.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),d.jsxs("feMerge",{children:[d.jsx("feMergeNode",{in:"glow"}),d.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),d.jsx(qn.rect,{x:m,y:m,width:h-p,height:f-p,rx:n,ry:n,fill:"none",stroke:"#c2ffe0",strokeWidth:p,strokeLinecap:"round",strokeDasharray:`${A} ${y-A}`,filter:`url(#${l}-glow)`,initial:{strokeDashoffset:0},animate:{strokeDashoffset:[-y,0]},transition:{duration:3,repeat:1/0,ease:"linear"}},a)]})]})}function EP({className:e,type:t,onFocus:n,onBlur:r,...s}){const[i,o]=x.useState(!1);return d.jsx(RP,{isActive:!i,children:d.jsx("input",{type:t,"data-slot":"input",...s,className:se("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-10 w-full min-w-0 rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),onFocus:a=>{o(!0),n?.(a)},onBlur:a=>{o(!1),r?.(a)}})})}function si(e){return!e||/\s/.test(e)?!1:!!(/^https?:\/\//i.test(e)||e.includes(".")&&!e.startsWith("."))}function xp({value:e,onChange:t,onSubmit:n,placeholder:r,className:s}){const[i,o]=x.useState(!1),[a,c]=x.useState([]),[l,u]=x.useState(-1),h=x.useRef(null),f=x.useRef(null);x.useEffect(()=>{if(!e||si(e)){c([]);return}const A=new AbortController;h.current?.abort(),h.current=A;const g=setTimeout(async()=>{try{const b=await fetch(`/api/autocomplete?q=${encodeURIComponent(e)}`,{signal:A.signal});if(!b.ok)return;const v=await b.json();c(v[1]?.slice(0,8)||[])}catch{}},150);return()=>{clearTimeout(g),A.abort()}},[e]),x.useEffect(()=>{a.length>0?o(!0):o(!1),a.length===0&&u(-1)},[a]);const p=i&&e.length>0&&!si(e),m=A=>{A.key==="ArrowDown"?(A.preventDefault(),a.length>0&&u(g=>(g+1)%a.length)):A.key==="ArrowUp"?(A.preventDefault(),a.length>0&&u(g=>g<=0?a.length-1:g-1)):A.key==="Enter"?l>=0&&a[l]&&(A.preventDefault(),n(a[l])):A.key==="Escape"&&o(!1)},y=x.useMemo(()=>a,[a]);return d.jsxs("div",{className:"relative",ref:f,children:[d.jsx(EP,{value:e,onChange:A=>t(A.currentTarget.value),placeholder:r,className:s,onBlur:()=>setTimeout(()=>o(!1),200),onKeyDown:m,onKeyUp:A=>{A.key==="Enter"&&l===-1&&n(e)}}),d.jsx(aa,{children:p&&d.jsxs(qn.ul,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},className:"absolute z-50 mt-1 w-full rounded-md border border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg overflow-hidden",role:"listbox",children:[y.map((A,g)=>d.jsx("li",{role:"option","aria-selected":g===l,className:`px-3 py-2 text-sm cursor-pointer hover:bg-accent ${g===l?"bg-accent":""}`,onMouseDown:b=>{b.preventDefault(),n(A)},onMouseEnter:()=>u(g),children:A},A+g)),y.length===0&&e&&!si(e)&&d.jsxs("li",{className:"px-3 py-2 text-sm text-muted-foreground",children:['Search DuckDuckGo for "',e,'"']})]})})]})}var IP=["title"],jP=["title"],MP=["title"],TP=["title"],BP=["title"];function Dt(){return Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dt.apply(this,arguments)}function or(e,t){if(e==null)return{};var n=DP(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function DP(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var LP=function(t){var n=t.title,r=or(t,IP);return D.createElement("svg",Dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 513 342"},r),n&&D.createElement("title",null,n),D.createElement("path",{fill:"#10338c",d:"M0 0h513v342H0z"}),D.createElement("g",{fill:"#FFF"},D.createElement("path",{d:"M222.2 170.7c.3-.3.5-.6.8-.9-.2.3-.5.6-.8.9zM188 212.6l11 22.9 24.7-5.7-11 22.8 19.9 15.8-24.8 5.6.1 25.4-19.9-15.9-19.8 15.9.1-25.4-24.8-5.6 19.9-15.8-11.1-22.8 24.8 5.7zm197.9 28.5 5.2 10.9 11.8-2.7-5.3 10.9 9.5 7.5-11.8 2.6v12.2l-9.4-7.6-9.5 7.6.1-12.2-11.8-2.6 9.5-7.5-5.3-10.9 11.8 2.7zm-48.6-116 5.2 10.9 11.8-2.7-5.3 10.9 9.5 7.5-11.8 2.7v12.1l-9.4-7.6-9.5 7.6.1-12.1-11.9-2.7 9.5-7.5-5.3-10.9L332 136zm48.6-66.2 5.2 10.9 11.8-2.7-5.3 10.9 9.5 7.5-11.8 2.7v12.1l-9.4-7.6-9.5 7.6.1-12.1-11.8-2.7 9.5-7.5-5.3-10.9 11.8 2.7zm42.5 49.7 5.2 10.9 11.8-2.7-5.3 10.9 9.5 7.5-11.8 2.6V150l-9.4-7.6-9.5 7.6v-12.2l-11.8-2.6 9.5-7.5-5.3-10.9 11.8 2.7zM398 166.5l4.1 12.7h13.3l-10.8 7.8 4.2 12.7-10.8-7.9-10.8 7.9 4.1-12.7-10.7-7.8h13.3z"}),D.createElement("path",{d:"M254.8 0v30.6l-45.1 25.1h45.1V115h-59.1l59.1 32.8v22.9h-26.7l-73.5-40.9v40.9H99v-48.6l-87.4 48.6H-1.2v-30.6L44 115H-1.2V55.7h59.1L-1.2 22.8V0h26.7L99 40.8V0h55.6v48.6L242.1 0z"})),D.createElement("path",{fill:"#D80027",d:"M142.8 0h-32v69.3h-112v32h112v69.4h32v-69.4h112v-32h-112z"}),D.createElement("path",{fill:"#0052B4",d:"m154.6 115 100.2 55.7v-15.8L183 115z"}),D.createElement("path",{fill:"#FFF",d:"m154.6 115 100.2 55.7v-15.8L183 115z"}),D.createElement("path",{d:"m154.6 115 100.2 55.7v-15.8L183 115zm-83.9 0-71.9 39.9v15.8L99 115z",fill:"#D80027"}),D.createElement("path",{fill:"#0052B4",d:"M99 55.7-1.2 0v15.7l71.9 40z"}),D.createElement("path",{fill:"#FFF",d:"M99 55.7-1.2 0v15.7l71.9 40z"}),D.createElement("path",{d:"M99 55.7-1.2 0v15.7l71.9 40zm84 0 71.8-40V0L154.6 55.7z",fill:"#D80027"}))},OP=function(t){var n=t.title,r=or(t,jP);return D.createElement("svg",Dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 513 342"},r),n&&D.createElement("title",null,n),D.createElement("path",{fill:"#009b3a",d:"M0 0h513v342H0z"}),D.createElement("path",{fill:"#fedf00",d:"m256.5 19.3 204.9 151.4L256.5 322 50.6 170.7z"}),D.createElement("circle",{fill:"#FFF",cx:256.5,cy:171,r:80.4}),D.createElement("path",{fill:"#002776",d:"M215.9 165.7c-13.9 0-27.4 2.1-40.1 6 .6 43.9 36.3 79.3 80.3 79.3 27.2 0 51.3-13.6 65.8-34.3-24.9-31-63.2-51-106-51zm119 20.3c.9-5 1.5-10.1 1.5-15.4 0-44.4-36-80.4-80.4-80.4-33.1 0-61.5 20.1-73.9 48.6 10.9-2.2 22.1-3.4 33.6-3.4 46.8.1 89 19.5 119.2 50.6z"}))},FP=function(t){var n=t.title,r=or(t,MP);return D.createElement("svg",Dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 513 342"},r),n&&D.createElement("title",null,n),D.createElement("path",{fill:"#D80027",d:"M0 0h513v342H0z"}),D.createElement("path",{d:"M0 0h513v114H0z"}),D.createElement("path",{fill:"#FFDA44",d:"M0 228h513v114H0z"}))},VP=function(t){var n=t.title,r=or(t,TP);return D.createElement("svg",Dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 513 342"},r),n&&D.createElement("title",null,n),D.createElement("path",{fill:"#FFF",d:"M0 0h512v342H0z"}),D.createElement("circle",{fill:"#D80027",cx:256.5,cy:171,r:96}))},du=function(t){var n=t.title,r=or(t,BP);return D.createElement("svg",Dt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 513 342"},r),n&&D.createElement("title",null,n),D.createElement("path",{fill:"#FFF",d:"M0 0h513v342H0z"}),D.createElement("path",{d:"M0 0h513v26.3H0zm0 52.6h513v26.3H0zm0 52.6h513v26.3H0zm0 52.6h513v26.3H0zm0 52.7h513v26.3H0zm0 52.6h513v26.3H0zm0 52.6h513V342H0z",fill:"#D80027"}),D.createElement("path",{fill:"#2E52B2",d:"M0 0h256.5v184.1H0z"}),D.createElement("path",{d:"m47.8 138.9-4-12.8-4.4 12.8H26.2l10.7 7.7-4 12.8 10.9-7.9 10.6 7.9-4.1-12.8 10.9-7.7zm56.3 0-4.1-12.8-4.2 12.8H82.6l10.7 7.7-4 12.8 10.7-7.9 10.8 7.9-4-12.8 10.7-7.7zm56.5 0-4.3-12.8-4 12.8h-13.5l11 7.7-4.2 12.8 10.7-7.9 11 7.9-4.2-12.8 10.7-7.7zm56.2 0-4-12.8-4.2 12.8h-13.3l10.8 7.7-4 12.8 10.7-7.9 10.8 7.9-4.3-12.8 11-7.7zM100 75.3l-4.2 12.8H82.6L93.3 96l-4 12.6 10.7-7.8 10.8 7.8-4-12.6 10.7-7.9h-13.4zm-56.2 0-4.4 12.8H26.2L36.9 96l-4 12.6 10.9-7.8 10.6 7.8L50.3 96l10.9-7.9H47.8zm112.5 0-4 12.8h-13.5l11 7.9-4.2 12.6 10.7-7.8 11 7.8-4.2-12.6 10.7-7.9h-13.2zm56.5 0-4.2 12.8h-13.3l10.8 7.9-4 12.6 10.7-7.8 10.8 7.8-4.3-12.6 11-7.9h-13.5zm-169-50.6-4.4 12.6H26.2l10.7 7.9-4 12.7L43.8 50l10.6 7.9-4.1-12.7 10.9-7.9H47.8zm56.2 0-4.2 12.6H82.6l10.7 7.9-4 12.7L100 50l10.8 7.9-4-12.7 10.7-7.9h-13.4zm56.3 0-4 12.6h-13.5l11 7.9-4.2 12.7 10.7-7.9 11 7.9-4.2-12.7 10.7-7.9h-13.2zm56.5 0-4.2 12.6h-13.3l10.8 7.9-4 12.7 10.7-7.9 10.8 7.9-4.3-12.7 11-7.9h-13.5z",fill:"#FFF"}))};const ii=[{id:"chicago",name:"Chicago",country:"USA",code:"US",FlagComponent:du},{id:"tokyo",name:"Tokyo",country:"Japan",code:"JP",FlagComponent:VP},{id:"sydney",name:"Sydney",country:"Australia",code:"AU",FlagComponent:LP},{id:"frankfurt",name:"Frankfurt",country:"Germany",code:"DE",FlagComponent:FP},{id:"new-york",name:"New York",country:"USA",code:"US",FlagComponent:du},{id:"sao-paulo",name:"So Paulo",country:"Brazil",code:"BR",FlagComponent:OP}];function bp(){const{settings:e,setSettings:t}=Hn(),[n,r]=x.useState(!1),[s,i]=x.useState(!1),o=x.useRef(null),a=ii.find(l=>l.id===e.region)||ii[0];x.useEffect(()=>{const l=u=>{o.current&&!o.current.contains(u.target)&&r(!1)};return n&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[n]);const c=async l=>{if(!(l===e.region||s)){i(!0),r(!1);try{t({...e,region:l}),await Dn(l,e.proxyType)}catch(u){console.error("Failed to change region:",u)}finally{i(!1)}}};return d.jsxs("div",{className:"relative",ref:o,children:[d.jsxs("button",{type:"button",onClick:()=>r(!n),disabled:s,className:"flex items-center gap-2 h-10 px-3 rounded-md border border-input bg-card hover:bg-accent transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-xs w-full",title:`VPN Region: ${a.name}`,children:[d.jsx(a.FlagComponent,{title:a.country,className:"w-5 h-3.5 rounded-sm shadow-sm"}),d.jsx(NA,{className:`w-3.5 h-3.5 text-muted-foreground transition-transform ml-auto ${n?"rotate-180":""}`})]}),d.jsx(aa,{children:n&&d.jsxs(qn.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.12},className:"absolute top-full mt-1 right-0 w-64 rounded-md border border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 shadow-lg overflow-hidden z-50",children:[d.jsx("div",{className:"px-2.5 py-2 border-b border-border bg-muted/30",children:d.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-foreground",children:[d.jsx(ag,{className:"w-3 h-3 text-primary"}),d.jsx("span",{children:"VPN Region"})]})}),d.jsx("div",{className:"p-2 grid grid-cols-2 gap-1.5",children:ii.map(l=>d.jsxs("button",{type:"button",onClick:()=>c(l.id),className:`relative flex flex-col items-center justify-center p-2 rounded-md text-sm transition-all ${l.id===e.region?"bg-accent text-accent-foreground shadow-sm ring-1 ring-primary/20":"bg-card hover:bg-accent border border-border/50 hover:border-border hover:shadow-xs"}`,children:[l.id===e.region&&d.jsx(CA,{className:"w-3 h-3 absolute top-1 right-1 text-primary"}),d.jsx(l.FlagComponent,{title:l.country,className:"w-12 h-8 rounded shadow-sm mb-1.5"}),d.jsxs("div",{className:"text-center space-y-0.5",children:[d.jsx("div",{className:"font-medium text-[11px] leading-tight",children:l.name}),d.jsx("div",{className:"text-[10px] text-muted-foreground leading-tight",children:l.country})]})]},l.id))})]})})]})}function $P({initialUrl:e,onNavigate:t,onRefresh:n,onBack:r,onForward:s,canGoBack:i,canGoForward:o}){const{settings:a,setSettings:c}=Hn(),[l,u]=x.useState(!1),[h,f]=x.useState(e),p=Ke();x.useEffect(()=>{f(e)},[e]);const m=b=>{b.preventDefault(),t(h)},y=()=>{p({to:"/"})},A=()=>{c({...a,searchBarPinned:!a.searchBarPinned})},g=a.searchBarPinned||l;return d.jsxs(d.Fragment,{children:[d.jsx(qn.div,{className:"fixed bottom-0 left-1/2 -translate-x-1/2 z-50 cursor-pointer",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:d.jsxs("div",{className:"bg-background/90 backdrop-blur-sm border border-b-0 border-border rounded-t-lg px-4 py-1 shadow-lg flex items-center gap-2 hover:bg-accent/50 transition-colors",children:[d.jsx(EA,{className:"w-4 h-4 animate-pulse"}),d.jsx("span",{className:"text-xs text-muted-foreground",children:"Browser Controls"})]})}),d.jsx(aa,{children:g&&d.jsx(qn.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{duration:.2},className:"fixed bottom-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-md border-t border-border shadow-2xl",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:d.jsx("div",{className:"container mx-auto px-4 py-3",children:d.jsxs("form",{onSubmit:m,className:"flex items-center gap-2",children:[d.jsx("button",{type:"button",onClick:y,className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"Home",children:d.jsx(WA,{className:"w-5 h-5"})}),d.jsx("button",{type:"button",onClick:r,disabled:!i,className:"p-2 rounded-lg hover:bg-accent transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Back",children:d.jsx(xu,{className:"w-5 h-5"})}),d.jsx("button",{type:"button",onClick:s,disabled:!o,className:"p-2 rounded-lg hover:bg-accent transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Forward",children:d.jsx(wA,{className:"w-5 h-5"})}),d.jsx("button",{type:"button",onClick:n,className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"Refresh",children:d.jsx(Ep,{className:"w-5 h-5"})}),d.jsx("div",{className:"flex-1",children:d.jsx(xp,{value:h,onChange:f,placeholder:"Enter URL or search...",onSubmit:b=>t(b)})}),d.jsx(bp,{}),d.jsx("button",{type:"button",onClick:()=>p({to:"/history"}),className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"History",children:d.jsx(go,{className:"w-5 h-5"})}),d.jsx("button",{type:"button",onClick:()=>p({to:"/bookmarks"}),className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"Bookmarks",children:d.jsx(Ur,{className:"w-5 h-5"})}),d.jsx("button",{type:"button",onClick:()=>p({to:"/settings"}),className:"p-2 rounded-lg hover:bg-accent transition-colors",title:"Settings",children:d.jsx(ig,{className:"w-5 h-5"})}),d.jsx("button",{type:"button",onClick:A,className:"p-2 rounded-lg hover:bg-accent transition-colors",title:a.searchBarPinned?"Unpin":"Pin",children:a.searchBarPinned?d.jsx(YA,{className:"w-5 h-5"}):d.jsx(tg,{className:"w-5 h-5"})})]})})})})]})}const UP=Qw({query:"string","target?":"string","forceProxyType?":"string"}),vp=Re("/search")({component:KP,validateSearch:UP});function KP(){const e=vp.useSearch(),t=atob(e.query),n=e.target?atob(e.target):t,{settings:r,setSettings:s}=Hn();x.useEffect(()=>{window.aclib&&(window.aclib.runPop({zoneId:"10602038"}),window.aclib.runInterstitial({zoneId:"10602046"}),window.aclib.runInPagePush({zoneId:"10602050",maxAds:2}))},[]);const[i,o]=x.useState(t),[a,c]=x.useState(n),[l,u]=x.useState([t]),[h,f]=x.useState(0),[p,m]=x.useState(!0),y=x.useRef(null),g=(e.forceProxyType||r.proxyType)==="scramjet"?`/scrammy/${bt(a)}`:`/~/${gr(bt(a))}`;x.useEffect(()=>{const C=y.current;if(!C)return;const S=()=>{m(!1),Mg({url:i,title:i,visitedAt:Date.now(),favicon:`https://www.google.com/s2/favicons?sz=64&domain_url=${i}`}).catch(()=>{})};return C.addEventListener("load",S),()=>{C.removeEventListener("load",S)}},[g,i]);const b=C=>{const S=bt(C);o(C),c(C),m(!0);const w=l.slice(0,h+1);w.push(C),u(w),f(w.length-1),y.current&&(r.proxyType==="scramjet"?y.current.src=`/scrammy/${S}`:y.current.src=`/~/${gr(S)}`)},v=()=>{m(!0),y.current&&(y.current.src=y.current.src)},k=()=>{if(h>0){const C=h-1,S=l[C];f(C),o(S),c(S),m(!0),y.current&&(r.proxyType==="scramjet"?y.current.src=`/scrammy/${bt(S)}`:y.current.src=`/~/${gr(bt(S))}`)}},P=()=>{if(h<l.length-1){const C=h+1,S=l[C];f(C),o(S),c(S),m(!0),y.current&&(r.proxyType==="scramjet"?y.current.src=`/scrammy/${bt(S)}`:y.current.src=`/~/${gr(bt(S))}`)}};return d.jsxs(d.Fragment,{children:[p&&d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background/80 z-40",children:d.jsxs("div",{className:"flex flex-col items-center gap-3",children:[d.jsxs("div",{className:"relative w-12 h-12",children:[d.jsx("div",{className:"absolute inset-0 border-4 border-primary/20 rounded-full"}),d.jsx("div",{className:"absolute inset-0 border-4 border-primary border-t-transparent rounded-full animate-spin"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}),d.jsx("iframe",{ref:y,title:"content-viewer",src:g,className:"fixed inset-0 w-screen border-0",style:{display:"block",height:r.searchBarPinned?"calc(100vh - 70px)":"100vh"},allowFullScreen:!0}),d.jsx($P,{initialUrl:i,onNavigate:b,onRefresh:v,onBack:k,onForward:P,canGoBack:h>0,canGoForward:h<l.length-1})]})}const zP=Re("/privacy")({component:qP});function qP(){return d.jsx("div",{className:"min-h-screen w-screen flex items-start justify-center p-8",children:d.jsxs("div",{className:"max-w-3xl w-full space-y-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(ge,{to:"/",className:"text-primary hover:underline text-sm",children:" Back to fern"}),d.jsx("h1",{className:"text-5xl font-bold font-display",children:"privacy policy"}),d.jsxs("p",{className:"text-muted-foreground text-sm",children:["Last updated: ",new Date().toLocaleDateString()]})]}),d.jsxs("div",{className:"space-y-6 text-foreground",children:[d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Information We Collect"}),d.jsx("p",{className:"text-muted-foreground",children:"When you use fern, we automatically collect your IP address for operational purposes. We also use Google Analytics to understand how our service is used, which may collect additional usage data."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"How We Use Your Information"}),d.jsx("p",{className:"text-muted-foreground",children:"We use collected information to operate and improve fern. IP addresses help us prevent abuse and maintain service quality. Analytics data helps us understand usage patterns."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Children's Privacy"}),d.jsx("p",{className:"text-muted-foreground",children:"We do not knowingly collect personal information from children under 13. If we become aware that we have collected data from a child under 13, we will take steps to delete it."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Third-Party Services"}),d.jsx("p",{className:"text-muted-foreground",children:"We use Google Analytics, which is governed by Google's privacy policy. Google may use cookies and other tracking technologies to collect information about your use of the service."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Data Security"}),d.jsx("p",{className:"text-muted-foreground",children:"We implement reasonable security measures to protect your information, but no method of transmission over the internet is 100% secure."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Changes to Privacy Policy"}),d.jsx("p",{className:"text-muted-foreground",children:"We may update this privacy policy from time to time. Changes will be posted on this page with an updated date."})]})]})]})})}function HP(){const e=Ke(),[t,n]=x.useState([]),[r,s]=x.useState(""),[i,o]=x.useState(!0);x.useEffect(()=>{a()},[]);const a=async()=>{try{o(!0);const m=await Tg(500);n(m)}catch(m){console.error("Failed to load history:",m)}finally{o(!1)}},c=async m=>{if(s(m),!m.trim()){a();return}try{const y=await Bg(m);n(y)}catch(y){console.error("Failed to search history:",y)}},l=async m=>{try{await Dg(m),n(y=>y.filter(A=>A.id!==m))}catch(y){console.error("Failed to delete history entry:",y)}},u=async()=>{if(confirm("Are you sure you want to clear all browsing history?"))try{await Lg(),n([])}catch(m){console.error("Failed to clear history:",m)}},h=m=>{e({to:"/search",search:{query:btoa(m.url)}})},p=(m=>{const y={},A=Date.now();for(const g of m){const b=A-g.visitedAt;let v;b<864e5?v="Today":b<1728e5?v="Yesterday":b<6048e5?v="This week":v=new Date(g.visitedAt).toLocaleDateString("en-US",{month:"long",year:"numeric"}),y[v]||(y[v]=[]),y[v].push(g)}return y})(t);return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(oo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),d.jsx("input",{type:"text",value:r,onChange:m=>c(m.target.value),placeholder:"Search history...",className:se("w-full h-10 pl-10 pr-10 rounded-md border border-input bg-background","placeholder:text-muted-foreground outline-none transition-colors","focus:border-ring")}),r&&d.jsx("button",{onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d.jsx(ao,{className:"w-4 h-4"})})]}),d.jsxs("button",{onClick:u,disabled:t.length===0,className:"px-3 py-1.5 text-sm rounded-md border hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5",children:[d.jsx(hi,{className:"w-3.5 h-3.5"}),"Clear All"]})]}),i?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading history..."})}):t.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[d.jsx(go,{className:"w-16 h-16 text-muted-foreground/40 mb-4"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:r?"No results found":"No browsing history yet"})]}):d.jsx("div",{className:"space-y-6",children:Object.entries(p).map(([m,y])=>d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-sm font-semibold text-muted-foreground sticky top-0 bg-background py-2",children:m}),d.jsx("div",{className:"space-y-1",children:y.map(A=>d.jsxs("div",{className:"group flex items-center gap-3 p-3 rounded-md border border-border hover:bg-accent transition-colors",children:[d.jsx("div",{className:"size-8 rounded overflow-hidden bg-muted flex items-center justify-center flex-shrink-0",children:A.favicon?d.jsx("img",{src:A.favicon,alt:"",className:"size-8 object-contain",onError:g=>{g.currentTarget.style.display="none"}}):d.jsx(FA,{className:"w-4 h-4 text-muted-foreground"})}),d.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>h(A),children:[d.jsx("div",{className:"text-sm font-medium truncate",children:A.title||A.url}),d.jsx("div",{className:"text-xs text-muted-foreground truncate",children:A.url}),d.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(A.visitedAt).toLocaleString()})]}),d.jsx("button",{onClick:()=>A.id&&l(A.id),className:"opacity-0 group-hover:opacity-100 p-2 rounded hover:bg-destructive/10 text-destructive transition-opacity",title:"Delete",children:d.jsx(hi,{className:"w-4 h-4"})})]},A.id))})]},m))})]})}const WP=Re("/history")({component:QP});function QP(){return d.jsx("div",{className:"min-h-screen w-screen flex items-start justify-center p-8",children:d.jsxs("div",{className:"max-w-5xl w-full space-y-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(ge,{to:"/",className:"text-primary hover:underline text-sm",children:" Back to fern"}),d.jsx("h1",{className:"text-5xl font-bold font-display",children:"browsing history"}),d.jsx("p",{className:"text-muted-foreground",children:"View and search your browsing history. Click any entry to revisit the page."})]}),d.jsx(HP,{})]})})}const GP=Re("/credits")({component:JP});function JP(){return d.jsx("div",{className:"min-h-screen w-full flex items-start justify-center p-8 overflow-x-hidden",children:d.jsxs("div",{className:"max-w-3xl w-full space-y-8 overflow-x-hidden",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(ge,{to:"/",className:"text-primary hover:underline text-sm",children:" Back to fern"}),d.jsx("h1",{className:"text-5xl font-bold font-display",children:"credits"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"The team behind fern"})]}),d.jsxs("div",{className:"space-y-6 text-foreground",children:[d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Development"}),d.jsx("p",{className:"text-muted-foreground",children:"fern is made possible by the contributions of dedicated developers who have helped shape and build this project."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Core Team"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:"akane"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Main development and UI design"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:"proudparrot2"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Helped build the initial site and architecture"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:"slqnt"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"Advice and guidance along the way"})]})]})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Technologies & Libraries"}),d.jsx("p",{className:"text-muted-foreground",children:"fern is powered by the following open source projects:"}),d.jsxs("div",{className:"space-y-3 mt-3",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:d.jsx("a",{href:"https://github.com/mercuryworkshop/scramjet",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Scramjet"})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"A powerful web proxy framework by Mercury Workshop"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:d.jsx("a",{href:"https://github.com/titaniumnetwork-dev/ultraviolet",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Ultraviolet"})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"A highly sophisticated proxy used for evading internet censorship by Titanium Network"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:d.jsx("a",{href:"https://github.com/MercuryWorkshop/EpoxyTransport",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"EpoxyTransport"})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"A flexible network transport library by Mercury Workshop"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:d.jsx("a",{href:"https://github.com/MercuryWorkshop/wisp-server-python",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"wisp-server-python"})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"A Python implementation of the WISP protocol by Mercury Workshop"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("p",{className:"font-medium",children:d.jsx("a",{href:"https://github.com/MercuryWorkshop/CurlTransport",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"CurlTransport"})}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"A libcurl-based transport implementation by Mercury Workshop"})]})]})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Open Source"}),d.jsx("p",{className:"text-muted-foreground",children:"This project is built with open source technologies and is grateful for the broader community's contributions to the tools and libraries that make fern possible."})]}),d.jsxs("section",{className:"space-y-2",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Source Code Availability"}),d.jsx("p",{className:"text-muted-foreground",children:"Due to dependencies using the AGPL license, the complete source code for this application is available upon request. To receive a copy of the source code, please send a written request with 100 ZAR (to cover postage costs) to:"}),d.jsx("p",{className:"text-muted-foreground",children:"877 Pretorius St, Arcadia, Pretoria, 0083, South Africa (PO Box 34)"})]})]})]})})}function _P(){const e=Ke(),[t,n]=x.useState([]),[r,s]=x.useState(""),[i,o]=x.useState(!0),[a,c]=x.useState(null),[l,u]=x.useState({}),[h,f]=x.useState("all"),[p,m]=x.useState(!1);x.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0);const w=await Ku();n(w)}catch(w){console.error("Failed to load bookmarks:",w)}finally{o(!1)}},A=async w=>{if(s(w),!w.trim()){y();return}try{const R=await $g(w);n(R)}catch(R){console.error("Failed to search bookmarks:",R)}},g=async w=>{if(confirm("Delete this bookmark?"))try{await Vg(w),n(R=>R.filter(j=>j.id!==w))}catch(R){console.error("Failed to delete bookmark:",R)}},b=w=>{c(w.id),u(w)},v=async()=>{if(!(!a||!l.title||!l.url))try{await Fg(a,l),n(w=>w.map(R=>R.id===a?{...R,...l}:R)),c(null),u({})}catch(w){console.error("Failed to update bookmark:",w)}},k=async()=>{if(!l.title||!l.url){alert("Please fill in title and URL");return}try{const R={id:await Og({title:l.title,url:l.url,folder:l.folder||"Default",favicon:l.favicon,notes:l.notes,createdAt:Date.now()}),title:l.title,url:l.url,folder:l.folder||"Default",favicon:l.favicon,notes:l.notes,createdAt:Date.now()};n(j=>[R,...j]),m(!1),u({})}catch(w){console.error("Failed to add bookmark:",w)}},P=w=>{e({to:"/search",search:{query:btoa(w.url)}})},C=Array.from(new Set(t.map(w=>w.folder))),S=h==="all"?t:t.filter(w=>w.folder===h);return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(oo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),d.jsx("input",{type:"text",value:r,onChange:w=>A(w.target.value),placeholder:"Search bookmarks...",className:se("w-full h-10 pl-10 pr-10 rounded-md border border-input bg-background","placeholder:text-muted-foreground outline-none transition-colors","focus:border-ring")}),r&&d.jsx("button",{onClick:()=>A(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d.jsx(ao,{className:"w-4 h-4"})})]}),d.jsxs("button",{onClick:()=>{m(!0),u({folder:"Default"})},className:"px-3 py-1.5 text-sm rounded-md border bg-primary text-primary-foreground hover:opacity-90 transition-opacity flex items-center gap-1.5",children:[d.jsx(Ha,{className:"w-3.5 h-3.5"}),"Add Bookmark"]})]}),C.length>0&&d.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[d.jsxs("button",{onClick:()=>f("all"),className:se("px-3 py-1.5 rounded-md text-sm transition-colors whitespace-nowrap",h==="all"?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:["All (",t.length,")"]}),C.map(w=>d.jsxs("button",{onClick:()=>f(w),className:se("px-3 py-1.5 rounded-md text-sm transition-colors flex items-center gap-1.5 whitespace-nowrap",h===w?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:[d.jsx(KA,{className:"w-3.5 h-3.5"}),w," (",t.filter(R=>R.folder===w).length,")"]},w))]}),p&&d.jsxs("div",{className:"p-4 rounded-md border bg-card space-y-3",children:[d.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[d.jsx(Ha,{className:"w-3.5 h-3.5"}),"Add New Bookmark"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:"Title",value:l.title||"",onChange:w=>u(R=>({...R,title:w.target.value})),className:se("h-9 px-3 rounded-md border border-input bg-background text-sm","placeholder:text-muted-foreground outline-none focus:border-ring")}),d.jsx("input",{type:"text",placeholder:"Folder",value:l.folder||"",onChange:w=>u(R=>({...R,folder:w.target.value})),className:se("h-9 px-3 rounded-md border border-input bg-background text-sm","placeholder:text-muted-foreground outline-none focus:border-ring")})]}),d.jsx("input",{type:"url",placeholder:"URL (https://example.com)",value:l.url||"",onChange:w=>u(R=>({...R,url:w.target.value})),className:se("w-full h-9 px-3 rounded-md border border-input bg-background text-sm","placeholder:text-muted-foreground outline-none focus:border-ring")}),d.jsx("textarea",{placeholder:"Notes (optional)",value:l.notes||"",onChange:w=>u(R=>({...R,notes:w.target.value})),rows:2,className:se("w-full px-3 py-2 rounded-md border border-input bg-background text-sm resize-none","placeholder:text-muted-foreground outline-none focus:border-ring")}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx("button",{onClick:()=>{m(!1),u({})},className:"px-3 py-1.5 text-sm rounded-md border hover:bg-accent",children:"Cancel"}),d.jsx("button",{onClick:k,className:"px-3 py-1.5 text-sm rounded-md bg-primary text-primary-foreground hover:bg-primary/90",children:"Save"})]})]}),i?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading bookmarks..."})}):S.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[d.jsx(Ur,{className:"w-16 h-16 text-muted-foreground/40 mb-4"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:r?"No bookmarks found":"No bookmarks yet"})]}):d.jsx("div",{className:"space-y-2",children:S.map(w=>d.jsx("div",{className:"group p-3 rounded-md border border-border hover:bg-accent transition-colors",children:a===w.id?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",value:l.title||"",onChange:R=>u(j=>({...j,title:R.target.value})),className:se("h-9 px-3 rounded-md border border-input bg-background text-sm","outline-none focus:border-ring")}),d.jsx("input",{type:"text",value:l.folder||"",onChange:R=>u(j=>({...j,folder:R.target.value})),className:se("h-9 px-3 rounded-md border border-input bg-background text-sm","outline-none focus:border-ring")})]}),d.jsx("input",{type:"url",value:l.url||"",onChange:R=>u(j=>({...j,url:R.target.value})),className:se("w-full h-9 px-3 rounded-md border border-input bg-background text-sm","outline-none focus:border-ring")}),d.jsx("textarea",{value:l.notes||"",onChange:R=>u(j=>({...j,notes:R.target.value})),rows:2,className:se("w-full px-3 py-2 rounded-md border border-input bg-background text-sm resize-none","outline-none focus:border-ring")}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx("button",{onClick:()=>{c(null),u({})},className:"px-3 py-1.5 text-sm rounded-md border hover:bg-accent",children:"Cancel"}),d.jsxs("button",{onClick:v,className:"px-3 py-1.5 text-sm rounded-md bg-primary text-primary-foreground hover:bg-primary/90 flex items-center gap-1.5",children:[d.jsx(rg,{className:"w-3.5 h-3.5"}),"Save"]})]})]}):d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"size-8 rounded overflow-hidden bg-muted flex items-center justify-center flex-shrink-0",children:w.favicon?d.jsx("img",{src:w.favicon,alt:"",className:"size-8 object-contain",onError:R=>{R.currentTarget.style.display="none"}}):d.jsx(Ur,{className:"w-4 h-4 text-muted-foreground"})}),d.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>P(w),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-sm font-medium truncate",children:w.title}),d.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-muted text-muted-foreground whitespace-nowrap",children:w.folder})]}),d.jsx("div",{className:"text-xs text-muted-foreground truncate",children:w.url}),w.notes&&d.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:w.notes})]}),d.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>b(w),className:"p-2 rounded hover:bg-accent",title:"Edit",children:d.jsx(XA,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>w.id&&g(w.id),className:"p-2 rounded hover:bg-destructive/10 text-destructive",title:"Delete",children:d.jsx(hi,{className:"w-4 h-4"})})]})]})},w.id))})]})}const XP=Re("/bookmarks")({component:ZP});function ZP(){return d.jsx("div",{className:"min-h-screen w-screen flex items-start justify-center p-8",children:d.jsxs("div",{className:"max-w-5xl w-full space-y-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(ge,{to:"/",className:"text-primary hover:underline text-sm",children:" Back to fern"}),d.jsx("h1",{className:"text-5xl font-bold font-display",children:"bookmarks"}),d.jsx("p",{className:"text-muted-foreground",children:"Save and organize your favorite sites. Organize bookmarks into folders for easy access."})]}),d.jsx(_P,{})]})})}const YP="modulepreload",eN=function(e){return"/"+e},hu={},fu=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=o(n.map(l=>{if(l=eN(l),l in hu)return;hu[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":YP,u||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},tN="PR5QBwJHSEwfEVBCRAsTAwNHSEw/Cgc6EwcXTEpHBxwKR0hMDhEGHhVfXUEfEVwBCwQWD0gGEwgDR15MDwYdADMXHkxcRzsgKiw8KyJfCxpIFRwJRBheFUQMFkxcRxUGRElQAAcIF0xcRzUHEi0HDERJUBsUCVBURA0GGhYWSEFJAhsaDhAQQAUKH0xKRxsNCQsnHApHSEwOEQYeFV9dQQEMBgYTB1wJDxEaGwQEAR0DEQFABQofQQAEBAcFChwdSQMTGA8GHQBIFRwJRBheFUQMFkxcRxYNRElQAAcIF0xcRzYHFQYdHAJHXkwTFx5MXEcaGhIVAVRJShYHFQYdHAJLEQELShMeFkdeTA8GHQAzFx5MXEc7ICosPCsiXxYHFQYdHEgVHAlEGF4VRAwWTFxHBhpESVAABwgXTFxHJgcNMR0FRElQGxQJUFREDQYaFhZIQUkSBRlIERsFEgoZQAUKH0xKRxsNCQsnHApHSEwvKz4nKCA2VBIRXAcFClATSh5QBwJHSEwBCVBCRAsTAwNHSEwhCh0JCgBQQkQQAAJEX1AGEhECHVxKXRkRElwJCQoVAgNLEQELR15MDwYdADMXHkxcRxoaEhUBVElKBRkRSxUBCQIeC0gGHQNJAxMYDwYdAEgMEQFEGF4VRAwWTFxHBhlESVAABwgXTFxHJhkPEQYLFEoqTEpHBxwKR0hMDhEGHhVfXUEeSxEBC0deTA8GHQAzFx5MXEc7ICosPCsiXwYZDxFcBwUKUBNKHlAHAkdITBQKEAIJHVBCRAsTAwNHSEw0ChACCR1QQkQQAAJEX1AGEhECHVxKXQAJElwJAUoCAgccXRwJBx4BHkgRARQVHRwHERsBCEpHXVJcXRwJBx4BHkdeTA8GHQAzFx5MXEc7ICosPCsiXwABBAkdQBYLFUwbSQlMDwFQVEQCFABESVAABwgXTFxHNQsgCgANA0U8ITFHXkwTFx5MXEcaGhIVAVRJSgICBxxcCQMDHRwFABwBEUsRAQtHXkwPBh0AMxceTFxHOyAqLDwrIl8VCEgVHAlEGF4VRAwWTFxHEBlESVAABwgXTFxHPwEQDBcdRElQGxQJUFREDQYaFhZIQUkHFwsFDVwZBxERBkQYXhVEDBZMXEcVDwsAAUxKRxwPCwBQVEQiEwMDFlBCRBAAAkRfUAYSEQIdXEpdCAMXHEAEAAEaSR1FBV8IQB5IDQYDCkdeTA8GHQAzFx5MXEdQEzs=",nN="fern";function rN(e,t){const n=atob(e);let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n.charCodeAt(s)^t.charCodeAt(s%t.length));return r}const pu=(()=>{try{return JSON.parse(rN(tN,nN))}catch{return[]}})(),oi=2;function sN(){try{const e=localStorage.getItem("quickApps"),t=parseInt(localStorage.getItem("quickAppsVersion")||"0",10);if(e){const n=JSON.parse(e);if(Array.isArray(n)){if(t<oi){const r=new Set(n.map(o=>o.id)),s=pu.filter(o=>!r.has(o.id)),i=[...n,...s];return localStorage.setItem("quickApps",JSON.stringify(i)),localStorage.setItem("quickAppsVersion",oi.toString()),i}return n}}localStorage.setItem("quickAppsVersion",oi.toString())}catch{}return pu}function iN(e){try{localStorage.setItem("quickApps",JSON.stringify(e))}catch{}}const mu={"www.youtube.com":re["yt.png"],"youtube.com":re["yt.png"],"yt.omada.cafe":re["yt.png"],"discord.com":re["discor.png"],"discordapp.com":re["discor.png"],"www.reddit.com":re["redit.ico"],"reddit.com":re["redit.ico"],"www.tiktok.com":re["tt.ico"],"tiktok.com":re["tt.ico"],"x.com":re["twit.ico"],"www.x.com":re["twit.ico"],"twitter.com":re["twit.ico"],"www.twitter.com":re["twit.ico"],"beech.watch":re["beech.ico"],"www.beech.watch":re["beech.ico"]};function Au(e,t){try{const n=new URL(e);if(mu[n.hostname])return mu[n.hostname];if(t){if(t.startsWith("INLINED:")){const r=t.substring(8);return re[r]||t}return t.startsWith("/")?`/${t.slice(1)}`:t}return`https://www.google.com/s2/favicons?sz=64&domain_url=${n.protocol}//${n.hostname}`}catch{if(t){if(t.startsWith("INLINED:")){const n=t.substring(8);return re[n]||t}if(t.startsWith("/"))return`/${t.slice(1)}`}return t||void 0}}function oN(){const e=Ke(),[t,n]=x.useState(()=>sN()),[r,s]=x.useState(!1),[i,o]=x.useState(null),[a,c]=x.useState(null),[l,u]=x.useState(null);x.useEffect(()=>{iN(t)},[t]);const h=A=>{s(!0),A?(o(A.id),c({...A})):(o("new"),c({id:crypto.randomUUID(),name:"",url:"",iconUrl:""}))},f=()=>{o(null),c(null)},p=()=>{if(!a)return;const A={id:a.id||crypto.randomUUID(),name:a.name?.trim()||"App",url:a.url?.trim(),iconUrl:a.iconUrl?.trim()||void 0};A.url&&(n(g=>g.some(k=>k.id===A.id)?g.map(k=>k.id===A.id?A:k):[...g,A]),o(null),c(null))},m=A=>{n(g=>g.filter(b=>b.id!==A)),i===A&&f()},y=async A=>{if(!l)try{if(u(A.id),A.id==="gfn"){const{setupProxy:b}=await fu(async()=>{const{setupProxy:C}=await Promise.resolve().then(()=>nc);return{setupProxy:C}},void 0),v=localStorage.getItem("fern-settings"),k=v?JSON.parse(v):{};k.proxyType!=="scramjet"&&(k.proxyType="scramjet",localStorage.setItem("fern-settings",JSON.stringify(k)),await b(k.region,"scramjet"));const P={query:btoa(A.url),...A.proxyUrl?{target:btoa(A.proxyUrl)}:{},forceProxyType:"scramjet"};e({to:"/search",search:P});return}if(A.id==="games"){const{setupProxy:b}=await fu(async()=>{const{setupProxy:C}=await Promise.resolve().then(()=>nc);return{setupProxy:C}},void 0),v=localStorage.getItem("fern-settings"),k=v?JSON.parse(v):{};k.proxyType!=="ultraviolet"&&(k.proxyType="ultraviolet",localStorage.setItem("fern-settings",JSON.stringify(k)),await b(k.region,"ultraviolet"));const P={query:btoa(A.url),...A.proxyUrl?{target:btoa(A.proxyUrl)}:{},forceProxyType:"ultraviolet"};e({to:"/search",search:P});return}A.id;const g={query:btoa(A.url),...A.proxyUrl?{target:btoa(A.proxyUrl)}:{}};e({to:"/search",search:g})}finally{u(null)}};return d.jsxs("div",{className:"w-full",children:[d.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[d.jsx("h2",{className:"text-sm font-medium text-muted-foreground",children:"Quick apps"}),d.jsx("button",{className:"text-xs px-2 py-1 rounded-md border hover:bg-accent",onClick:()=>s(A=>!A),children:r?"Done":"Edit"})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.map(A=>d.jsxs("div",{className:"group relative",children:[d.jsx("button",{className:"w-full h-20 rounded-md border bg-card hover:bg-accent transition-colors flex flex-col items-center justify-center gap-2 px-2 relative",onClick:()=>!r&&y(A),disabled:l===A.id,children:l===A.id?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"size-7 rounded-md overflow-hidden bg-muted flex items-center justify-center",children:d.jsx("div",{className:"size-4 border-2 border-primary border-t-transparent rounded-full animate-spin"})}),d.jsx("span",{className:"text-xs truncate max-w-full",children:"Loading..."})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"size-7 rounded-md overflow-hidden bg-muted flex items-center justify-center",children:A.id==="bw"?d.jsx($A,{className:"size-5 text-foreground"}):A.id==="games"?d.jsx(qA,{className:"size-5 text-foreground"}):Au(A.url,A.iconUrl)?d.jsx("img",{src:Au(A.url,A.iconUrl),alt:"",className:"size-7 object-contain",loading:"lazy"}):d.jsx("span",{className:"text-xs text-muted-foreground",children:A.name?.[0]?.toUpperCase()||"?"})}),d.jsx("span",{className:"text-xs truncate max-w-full",children:A.name})]})}),r&&d.jsxs("div",{className:"absolute -top-2 -right-2 flex gap-1",children:[d.jsx("button",{className:"size-6 rounded-full border bg-background hover:bg-accent text-xs",onClick:()=>h(A),title:"Edit",children:""}),d.jsx("button",{className:"size-6 rounded-full border bg-background hover:bg-destructive text-destructive-foreground text-xs",onClick:()=>m(A.id),title:"Remove",children:""})]})]},A.id)),r&&d.jsx("button",{className:"h-20 rounded-md border border-dashed hover:bg-accent flex items-center justify-center text-sm text-muted-foreground",onClick:()=>h(),"aria-label":"Add app",children:"+ Add"})]}),r&&a&&d.jsxs("div",{className:"mt-4 rounded-md border bg-card p-3 space-y-2",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[d.jsx("label",{className:"text-xs text-muted-foreground",children:"Name"}),d.jsx("div",{className:"col-span-2",children:d.jsx("input",{type:"text",value:a.name,onChange:A=>c({...a,name:A.currentTarget.value}),placeholder:"My App",className:se("h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm","placeholder:text-muted-foreground outline-none transition-colors","focus:border-ring disabled:cursor-not-allowed disabled:opacity-50")})}),d.jsx("label",{className:"text-xs text-muted-foreground",children:"URL"}),d.jsx("div",{className:"col-span-2",children:d.jsx("input",{type:"text",value:a.url,onChange:A=>c({...a,url:A.currentTarget.value}),placeholder:"https://example.com",className:se("h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm","placeholder:text-muted-foreground outline-none transition-colors","focus:border-ring disabled:cursor-not-allowed disabled:opacity-50")})}),d.jsx("label",{className:"text-xs text-muted-foreground",children:"Icon URL"}),d.jsx("div",{className:"col-span-2",children:d.jsx("input",{type:"text",value:a.iconUrl||"",onChange:A=>c({...a,iconUrl:A.currentTarget.value}),placeholder:"https://.../favicon.png (optional)",className:se("h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm","placeholder:text-muted-foreground outline-none transition-colors","focus:border-ring disabled:cursor-not-allowed disabled:opacity-50")})})]}),d.jsxs("div",{className:"flex gap-2 justify-end",children:[d.jsx("button",{className:"px-3 py-1 text-sm rounded-md border hover:bg-accent",onClick:f,children:"Cancel"}),d.jsx("button",{className:"px-3 py-1 text-sm rounded-md border bg-primary text-primary-foreground hover:opacity-90",onClick:p,children:"Save"})]})]})]})}const aN=()=>{const e=x.useRef(null),t=x.useRef([]),n=x.useRef([]),r=x.useRef([]),s=x.useRef(),i=()=>getComputedStyle(document.documentElement).getPropertyValue("--primary").trim()||"oklch(0.4679 0.0592 152.3811)",o=u=>document.documentElement.classList.contains("dark")?"rgba(168, 247, 213, ":"rgba(79, 141, 107, ",a=(u,h,f)=>Array.from({length:f},()=>({x:Math.random()*u,y:Math.random()*h,size:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:Math.random()*.02+.005,twinklePhase:Math.random()*Math.PI*2})),c=(u,h)=>{const f=[];for(let m=0;m<5;m++){const y=Math.random()*u,A=Math.random()*h,g=Math.floor(Math.random()*4)+4,b=Math.random()*80+60,v=Array.from({length:g},(P,C)=>{const S=C/g*Math.PI*2+Math.random()*.5,w=b*(.6+Math.random()*.4);return{x:y+Math.cos(S)*w,y:A+Math.sin(S)*w}}),k=[];for(let P=0;P<g;P++){const C=Math.random()>.5?2:1;for(let S=1;S<=C;S++){const w=(P+S)%g;k.push([P,w])}}f.push({stars:v,connections:k})}return f},l=(u,h)=>({x:Math.random()*u,y:Math.random()*h*.5,length:Math.random()*80+60,speed:Math.random()*3+2,angle:Math.PI/4+Math.random()*.3,opacity:1});return x.useEffect(()=>{const u=e.current;if(!u)return;const h=u.getContext("2d");if(!h)return;const f=()=>{u.width=window.innerWidth,u.height=window.innerHeight,t.current=a(u.width,u.height,200),n.current=c(u.width,u.height)};f(),window.addEventListener("resize",f);let p=Date.now();const m=()=>{if(!h||!u)return;h.clearRect(0,0,u.width,u.height);const y=o(i());t.current.forEach(g=>{g.twinklePhase+=g.twinkleSpeed;const b=(Math.sin(g.twinklePhase)+1)/2,v=g.opacity*b;h.beginPath(),h.arc(g.x,g.y,g.size,0,Math.PI*2),h.fillStyle=y+v+")",h.fill()}),n.current.forEach(g=>{h.strokeStyle=y+"0.15)",h.lineWidth=1,g.connections.forEach(([b,v])=>{const k=g.stars[b],P=g.stars[v];h.beginPath(),h.moveTo(k.x,k.y),h.lineTo(P.x,P.y),h.stroke()}),g.stars.forEach(b=>{h.beginPath(),h.arc(b.x,b.y,2,0,Math.PI*2),h.fillStyle=y+"0.6)",h.fill(),h.beginPath(),h.arc(b.x,b.y,4,0,Math.PI*2),h.fillStyle=y+"0.2)",h.fill()})});const A=Date.now();A-p>1500+Math.random()*2e3&&(r.current.push(l(u.width,u.height)),p=A),r.current=r.current.filter(g=>{if(g.opacity<=0)return!1;const b=h.createLinearGradient(g.x,g.y,g.x-Math.cos(g.angle)*g.length,g.y-Math.sin(g.angle)*g.length);return b.addColorStop(0,y+g.opacity+")"),b.addColorStop(1,y+"0)"),h.beginPath(),h.moveTo(g.x,g.y),h.lineTo(g.x-Math.cos(g.angle)*g.length,g.y-Math.sin(g.angle)*g.length),h.strokeStyle=b,h.lineWidth=2,h.stroke(),h.beginPath(),h.arc(g.x,g.y,2,0,Math.PI*2),h.fillStyle=y+g.opacity+")",h.fill(),g.x+=Math.cos(g.angle)*g.speed,g.y+=Math.sin(g.angle)*g.speed,g.opacity-=.01,g.opacity>0&&g.x<u.width+100&&g.y<u.height+100}),s.current=requestAnimationFrame(m)};return m(),()=>{window.removeEventListener("resize",f),s.current&&cancelAnimationFrame(s.current)}},[]),d.jsx("canvas",{ref:e,className:"fixed inset-0 pointer-events-none",style:{zIndex:0}})},cN=Re("/")({component:lN});function lN(){const e=Ke(),[t,n]=x.useState("");return d.jsxs("div",{className:"min-h-screen w-screen flex items-center justify-center flex-col space-y-8 relative py-12",children:[d.jsx(aN,{}),d.jsx("h1",{className:"text-6xl font-bold font-display relative z-10",children:"fern"}),d.jsxs("div",{className:"w-96 relative z-10",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"flex-1",children:d.jsx(xp,{value:t,onChange:n,placeholder:"search...",onSubmit:r=>{e({to:"/search",search:{query:btoa(r)}})}})}),d.jsx(bp,{})]}),d.jsx("div",{className:"mt-4",children:d.jsx(oN,{})})]})]})}const uN=Re("/scrammy/$")({component:dN});function dN(){return d.jsx("div",{children:"looks like you tried to make a request to Scramjet but it didn't go through correctly - please report this in our discord server"})}const hN=pg.update({id:"/x7k9m2p",path:"/x7k9m2p",getParentRoute:()=>je}),fN=Ag.update({id:"/terms",path:"/terms",getParentRoute:()=>je}),pN=sy.update({id:"/settings",path:"/settings",getParentRoute:()=>je}),mN=vp.update({id:"/search",path:"/search",getParentRoute:()=>je}),AN=zP.update({id:"/privacy",path:"/privacy",getParentRoute:()=>je}),gN=WP.update({id:"/history",path:"/history",getParentRoute:()=>je}),yN=GP.update({id:"/credits",path:"/credits",getParentRoute:()=>je}),xN=XP.update({id:"/bookmarks",path:"/bookmarks",getParentRoute:()=>je}),bN=cN.update({id:"/",path:"/",getParentRoute:()=>je}),vN=uN.update({id:"/scrammy/$",path:"/scrammy/$",getParentRoute:()=>je}),wN={IndexRoute:bN,BookmarksRoute:xN,CreditsRoute:yN,HistoryRoute:gN,PrivacyRoute:AN,SearchRoute:mN,SettingsRoute:pN,TermsRoute:fN,X7k9m2pRoute:hN,ScrammySplatRoute:vN},SN=je._addFileChildren(wN)._addFileTypes(),kN=AA({routeTree:SN,basepath:void 0});if(window.location.pathname.endsWith("/index.html")){const e=window.location.pathname.replace("/index.html","/");window.history.replaceState({},"",e+window.location.search+window.location.hash)}const CN=()=>{try{const e=localStorage.getItem("fern-settings");if(e)return JSON.parse(e).proxyType||Nn.proxyType}catch{}return Nn.proxyType};await Dn(void 0,CN());const gu=document.getElementById("root");gu.innerHTML||Ip.createRoot(gu).render(d.jsx(x.StrictMode,{children:d.jsx(xA,{router:kN})}));
