import{f as R,j as e,r,A as L,e as T,S as $,X as G,d as b}from"./styles-BBhVFbFw.js";function M(){const[a,y]=r.useState([]),[N,m]=r.useState(!0),[u,v]=r.useState(null),[l,x]=r.useState(null),[c,g]=r.useState(""),[o,f]=r.useState(null),d=r.useRef(null);r.useEffect(()=>{const t=`${window.location.origin}/g.json`;console.log("Fetching games from:",t),fetch(t).then(s=>{if(console.log("Response status:",s.status,s.statusText),!s.ok)throw new Error(`Failed to load games: ${s.status} ${s.statusText}`);return s.json()}).then(s=>{console.log("Loaded games:",s.length),y(s),m(!1)}).catch(s=>{console.error("Error loading games:",s),v(s.message),m(!1)})},[]);const h=r.useMemo(()=>{const t=new Set;return a.forEach(s=>{s.tags?.forEach(n=>t.add(n))}),Array.from(t).sort()},[a]),i=r.useMemo(()=>a.filter(t=>{const s=t.name.toLowerCase().includes(c.toLowerCase()),n=!o||t.tags?.includes(o);return s&&n}),[a,c,o]),w=t=>{x(t)},S=()=>{x(null)},k=t=>`${window.location.origin}/resources/${t.directory}/index.html`,E=t=>`/resources/${t.directory}/${t.image}`;if(N)return e.jsx("div",{className:"h-screen w-screen flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading games..."})});if(u)return e.jsx("div",{className:"h-screen w-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-destructive",children:["Error: ",u]})});const C=()=>{d.current&&(d.current.src=d.current.src)};return l?e.jsxs("div",{className:"h-screen w-screen flex flex-col bg-background",children:[e.jsxs("div",{className:"border-b bg-card px-4 py-3 flex items-center gap-4",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors",type:"button",children:[e.jsx(L,{className:"w-4 h-4"}),"Back to games"]}),e.jsx("button",{onClick:C,className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors",type:"button",title:"Refresh game",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"text-sm font-medium",children:l.name})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("iframe",{ref:d,src:k(l),className:"absolute inset-0 w-full h-full border-0",title:l.name,allow:"fullscreen; autoplay; encrypted-media; gamepad; microphone; camera",allowFullScreen:!0})})]}):e.jsxs("div",{className:"min-h-screen bg-background p-6 overflow-x-hidden",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold font-display mb-2",children:"games"}),e.jsxs("p",{className:"text-muted-foreground",children:["Browse and play ",a.length," games"]})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search games...",value:c,onChange:t=>g(t.target.value),className:"w-full pl-10 pr-10 py-2 rounded-md border bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),c&&e.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",type:"button",children:e.jsx(G,{className:"w-4 h-4"})})]}),h.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Filter:"}),e.jsx("button",{onClick:()=>f(null),className:b("px-3 py-1 rounded-full text-xs border transition-colors",o?"bg-background hover:bg-accent border-border":"bg-primary text-primary-foreground border-primary"),type:"button",children:"All"}),h.map(t=>e.jsx("button",{onClick:()=>f(t),className:b("px-3 py-1 rounded-full text-xs border transition-colors",o===t?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border"),type:"button",children:t},t))]})]}),i.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No games found"})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:i.map(t=>e.jsxs("button",{onClick:()=>w(t),className:"group relative aspect-square rounded-md border bg-card hover:bg-accent transition-all overflow-hidden",type:"button",children:[e.jsxs("div",{className:"absolute inset-0 bg-muted flex items-center justify-center",children:[e.jsx("img",{src:E(t),alt:t.name,className:"w-full h-full object-cover",loading:"lazy",onError:s=>{const n=s.target;n.style.display="none";const p=n.nextElementSibling;p&&(p.style.display="flex")}}),e.jsx("div",{className:"absolute inset-0 items-center justify-center hidden",children:e.jsx("span",{className:"text-4xl font-bold text-muted-foreground",children:t.name[0]?.toUpperCase()||"?"})})]}),e.jsx("div",{className:"absolute inset-0 bg-background/80 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-3",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-sm font-medium text-foreground truncate",children:t.name}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.tags.slice(0,2).map(s=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-primary/20 text-primary",children:s},s))})]})})]},t.directory))}),e.jsxs("div",{className:"mt-6 mb-24 text-center text-sm text-muted-foreground",children:["Showing ",i.length," of ",a.length," games"]})]}),e.jsxs("div",{className:"fixed bottom-4 right-4 text-base text-muted-foreground z-10",children:["brought to you by ",e.jsx("span",{className:"font-display text-xl text-primary",children:"fern"})]})]})}const j=document.getElementById("root");j.innerHTML||R.createRoot(j).render(e.jsx(r.StrictMode,{children:e.jsx(M,{})}));
